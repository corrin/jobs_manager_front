openapi: 3.0.3
info:
  title: Jobs Manager API
  version: 1.0.0
paths:
  /accounting/api/reports/calendar/:
    get:
      operationId: accounting_api_reports_calendar_retrieve
      description: Returns aggregated KPIs for display in calendar
      summary: Get KPI calendar data
      parameters:
        - in: query
          name: month
          schema:
            type: integer
          description: Month (1-12). Defaults to current month.
        - in: query
          name: year
          schema:
            type: integer
          description: Year (YYYY). Defaults to current year.
      tags:
        - accounting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KPICalendarData'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardError'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardError'
          description: ''
  /accounting/api/reports/job-aging/:
    get:
      operationId: accounting_api_reports_job_aging_retrieve
      description: |-
        Get job aging data.

        Query Parameters:
            include_archived (bool): Whether to include archived jobs.
                Defaults to False.

        Returns:
            JSON response with job aging data structure
      tags:
        - accounting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobAgingResponse'
          description: ''
  /accounting/api/reports/job-movement/:
    get:
      operationId: accounting_api_reports_job_movement_retrieve
      description: Handle GET request for job movement metrics.
      tags:
        - accounting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /accounting/api/reports/profit-and-loss/:
    get:
      operationId: accounting_api_reports_profit_and_loss_retrieve
      tags:
        - accounting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /accounting/api/reports/sales-forecast/:
    get:
      operationId: sales_forecast_list
      description: Returns monthly sales comparison between Xero invoices and Job
        Manager revenue for all months with data
      summary: Get monthly sales forecast data
      tags:
        - accounting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  months:
                    type: array
                    items:
                      type: object
                      properties:
                        month:
                          type: string
                          example: 2025-01
                        month_label:
                          type: string
                          example: Jan 2025
                        xero_sales:
                          type: number
                          example: 125000.5
                        jm_sales:
                          type: number
                          example: 118500.75
                        variance:
                          type: number
                          example: 6499.75
                        variance_pct:
                          type: number
                          example: 5.48
          description: ''
        '500':
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
          description: ''
  /accounting/api/reports/sales-forecast/{month}/:
    get:
      operationId: sales_forecast_month_detail
      description: Returns detailed invoice and job data for a specific month, showing
        matched pairs and unmatched items
      summary: Get month detail for sales forecast
      parameters:
        - in: path
          name: month
          schema:
            type: string
          required: true
      tags:
        - accounting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  month:
                    type: string
                    example: 2025-01
                  month_label:
                    type: string
                    example: Jan 2025
                  rows:
                    type: array
                    items:
                      type: object
                      properties:
                        date:
                          type: string
                          format: date
                        client_name:
                          type: string
                        job_number:
                          type: integer
                          nullable: true
                        job_name:
                          type: string
                          nullable: true
                        invoice_numbers:
                          type: string
                          nullable: true
                        total_invoiced:
                          type: number
                        job_revenue:
                          type: number
                        variance:
                          type: number
                        job_id:
                          type: string
                          format: uuid
                          nullable: true
                        job_start_date:
                          type: string
                          format: date
                          nullable: true
                        total_xero_all_time:
                          type: number
                          nullable: true
                        total_jm_all_time:
                          type: number
                          nullable: true
                        variance_all_time:
                          type: number
                          nullable: true
                        note:
                          type: string
                          nullable: true
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
          description: ''
  /accounting/api/reports/staff-performance-summary/:
    get:
      operationId: accounting_api_reports_staff_performance_summary_retrieve
      description: API endpoint for staff performance summary (all staff)
      tags:
        - accounting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffPerformanceResponse'
          description: ''
  /accounting/api/reports/staff-performance/{staff_id}/:
    get:
      operationId: accounting_api_reports_staff_performance_retrieve
      description: API endpoint for individual staff performance detail
      parameters:
        - in: path
          name: staff_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - accounting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffPerformanceResponse'
          description: ''
  /accounts/api/bearer-token/:
    post:
      operationId: accounts_api_bearer_token_create
      description: Generate bearer token. Only enabled when ALLOW_BEARER_TOKEN_AUTHENTICATION=True.
      tags:
        - accounts
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BearerTokenRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/BearerTokenRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/BearerTokenRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BearerTokenResponse'
          description: ''
        '401':
          description: No response body
        '403':
          description: No response body
  /accounts/api/staff/:
    get:
      operationId: accounts_api_staff_list
      description: API endpoint for listing all staff members and creating new staff
        members. Supports multipart/form data for file uploads (e.g., profile pictures).
      summary: List and create staff members
      tags:
        - Staff Management
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Staff'
          description: ''
    post:
      operationId: accounts_api_staff_create
      description: Create a new staff member with the provided details. Supports multipart/form
        data for file uploads (e.g., profile pictures).
      summary: Create a new staff member
      tags:
        - Staff Management
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StaffCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StaffCreateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Staff'
          description: ''
  /accounts/api/staff/{id}/:
    get:
      operationId: accounts_api_staff_retrieve
      description: API endpoint for retrieving, updating, and deleting individual
        staff members. Supports GET (retrieve), PUT/PATCH (update), and DELETE operations.
        Includes comprehensive logging for update operations and handles multipart/form
        data for file uploads.
      summary: Retrieve, update, or delete staff member
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Staff Management
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Staff'
          description: ''
    put:
      operationId: accounts_api_staff_update
      description: API endpoint for retrieving, updating, and deleting individual
        staff members. Supports GET (retrieve), PUT/PATCH (update), and DELETE operations.
        Includes comprehensive logging for update operations and handles multipart/form
        data for file uploads.
      summary: Retrieve, update, or delete staff member
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Staff Management
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StaffRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StaffRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Staff'
          description: ''
    patch:
      operationId: accounts_api_staff_partial_update
      description: API endpoint for retrieving, updating, and deleting individual
        staff members. Supports GET (retrieve), PUT/PATCH (update), and DELETE operations.
        Includes comprehensive logging for update operations and handles multipart/form
        data for file uploads.
      summary: Retrieve, update, or delete staff member
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Staff Management
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedStaffRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedStaffRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Staff'
          description: ''
    delete:
      operationId: accounts_api_staff_destroy
      description: API endpoint for retrieving, updating, and deleting individual
        staff members. Supports GET (retrieve), PUT/PATCH (update), and DELETE operations.
        Includes comprehensive logging for update operations and handles multipart/form
        data for file uploads.
      summary: Retrieve, update, or delete staff member
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Staff Management
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
  /accounts/api/staff/all/:
    get:
      operationId: accounts_api_staff_all_list
      description: |-
        API endpoint for retrieving list of staff members for Kanban board.

        Supports filtering to return only actual users (excluding system/test accounts)
        based on the 'actual_users' query parameter.
      parameters:
        - in: query
          name: actual_users
          schema:
            type: string
            enum:
              - 'false'
              - 'true'
            default: 'false'
          description: Exclude system/test accounts. Pass "true" to exclude.
        - in: query
          name: date
          schema:
            type: string
            format: date
          description: Filter staff active on specific date (YYYY-MM-DD format).
        - in: query
          name: include_inactive
          schema:
            type: string
            enum:
              - 'false'
              - 'true'
            default: 'false'
          description: Include inactive staff. Pass "true" to include.
      tags:
        - accounts
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/KanbanStaff'
          description: ''
  /accounts/api/token/:
    post:
      operationId: accounts_api_token_create
      description: Obtains JWT tokens for authentication. When ENABLE_JWT_AUTH=True,
        tokens are set as httpOnly cookies and the response body will be an empty
        object. Otherwise, the response body will contain the tokens. Also checks
        if the user needs to reset their password.
      tags:
        - accounts
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomTokenObtainPairRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CustomTokenObtainPairRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CustomTokenObtainPairRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenObtainPairResponse'
          description: ''
        '401':
          description: No response body
  /accounts/api/token/refresh/:
    post:
      operationId: accounts_api_token_refresh_create
      description: Refreshes the JWT access token using a refresh token. When ENABLE_JWT_AUTH=True,
        the new access token is set as an httpOnly cookie and removed from the JSON
        response. Otherwise, the response contains the new access token.
      tags:
        - accounts
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefreshResponse'
          description: ''
        '401':
          description: No response body
  /accounts/api/token/verify/:
    post:
      operationId: accounts_api_token_verify_create
      description: |-
        Takes a token and indicates if it is valid.  This view provides no
        information about a token's fitness for a particular use.
      tags:
        - accounts
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
        required: true
      responses:
        '200':
          description: No response body
  /accounts/logout/:
    post:
      operationId: accounts_logout_create
      description: Custom logout view that clears JWT httpOnly cookies
      summary: Logs out the current user by clearing JWT cookies
      tags:
        - accounts
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '500':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /accounts/me/:
    get:
      operationId: accounts_me_retrieve
      description: Get current authenticated user information via JWT from httpOnly
        cookie
      summary: Returns the current authenticated user profile
      tags:
        - accounts
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
          description: ''
  /api/aws/instance/reboot/:
    post:
      operationId: api_aws_instance_reboot_create
      description: Reboot the UAT instance
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AWSInstanceStatusResponse'
          description: ''
  /api/aws/instance/start/:
    post:
      operationId: api_aws_instance_start_create
      description: Start the UAT instance
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AWSInstanceStatusResponse'
          description: ''
  /api/aws/instance/status/:
    get:
      operationId: api_aws_instance_status_retrieve
      description: Get current status of the UAT instance
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AWSInstanceStatusResponse'
          description: ''
  /api/aws/instance/stop/:
    post:
      operationId: api_aws_instance_stop_create
      description: Stop the UAT instance
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AWSInstanceStatusResponse'
          description: ''
  /api/company-defaults/:
    get:
      operationId: api_company_defaults_retrieve
      description: |-
        API view for managing company default settings.

        This view provides endpoints to retrieve and update the company's default
        configuration settings. All authenticated users can retrieve settings,
        but only authenticated users can update them.

        Endpoints:
            GET: Retrieve current company defaults
            PUT: Update all company defaults (full update)
            PATCH: Partially update company defaults

        Permissions:
            - IsAuthenticated: Any logged-in user can access this API

        Returns:
            Company defaults data serialized using CompanyDefaultsSerializer
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyDefaults'
          description: ''
    put:
      operationId: api_company_defaults_update
      description: |-
        API view for managing company default settings.

        This view provides endpoints to retrieve and update the company's default
        configuration settings. All authenticated users can retrieve settings,
        but only authenticated users can update them.

        Endpoints:
            GET: Retrieve current company defaults
            PUT: Update all company defaults (full update)
            PATCH: Partially update company defaults

        Permissions:
            - IsAuthenticated: Any logged-in user can access this API

        Returns:
            Company defaults data serialized using CompanyDefaultsSerializer
      tags:
        - api
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompanyDefaultsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CompanyDefaultsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CompanyDefaultsRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyDefaults'
          description: ''
    patch:
      operationId: api_company_defaults_partial_update
      description: |-
        API view for managing company default settings.

        This view provides endpoints to retrieve and update the company's default
        configuration settings. All authenticated users can retrieve settings,
        but only authenticated users can update them.

        Endpoints:
            GET: Retrieve current company defaults
            PUT: Update all company defaults (full update)
            PATCH: Partially update company defaults

        Permissions:
            - IsAuthenticated: Any logged-in user can access this API

        Returns:
            Company defaults data serialized using CompanyDefaultsSerializer
      tags:
        - api
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedCompanyDefaultsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedCompanyDefaultsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedCompanyDefaultsRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyDefaults'
          description: ''
  /api/company-defaults/schema/:
    get:
      operationId: api_company_defaults_schema_retrieve
      description: Return schema metadata for CompanyDefaults fields.
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyDefaultsSchema'
              examples:
                ExampleResponse:
                  value:
                    sections:
                      - key: general
                        title: General Settings
                        order: 1
                        fields:
                          - key: company_name
                            label: Company Name
                            type: text
                            required: true
                            help_text: ''
                            section: general
                  summary: Example Response
          description: ''
  /api/workflow/ai-providers/:
    get:
      operationId: api_workflow_ai_providers_list
      description: |-
        API endpoint that allows AI Providers to be viewed or edited.

        Provides standard CRUD operations and a custom action to set a
        provider as the default for the company.
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIProvider'
          description: ''
    post:
      operationId: api_workflow_ai_providers_create
      description: |-
        API endpoint that allows AI Providers to be viewed or edited.

        Provides standard CRUD operations and a custom action to set a
        provider as the default for the company.
      tags:
        - api
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIProviderCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AIProviderCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AIProviderCreateUpdateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIProviderCreateUpdate'
          description: ''
  /api/workflow/ai-providers/{id}/:
    get:
      operationId: api_workflow_ai_providers_retrieve
      description: |-
        API endpoint that allows AI Providers to be viewed or edited.

        Provides standard CRUD operations and a custom action to set a
        provider as the default for the company.
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this AI Provider.
          required: true
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIProvider'
          description: ''
    put:
      operationId: api_workflow_ai_providers_update
      description: |-
        API endpoint that allows AI Providers to be viewed or edited.

        Provides standard CRUD operations and a custom action to set a
        provider as the default for the company.
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this AI Provider.
          required: true
      tags:
        - api
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIProviderCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AIProviderCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AIProviderCreateUpdateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIProviderCreateUpdate'
          description: ''
    patch:
      operationId: api_workflow_ai_providers_partial_update
      description: |-
        API endpoint that allows AI Providers to be viewed or edited.

        Provides standard CRUD operations and a custom action to set a
        provider as the default for the company.
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this AI Provider.
          required: true
      tags:
        - api
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedAIProviderCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedAIProviderCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedAIProviderCreateUpdateRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIProviderCreateUpdate'
          description: ''
    delete:
      operationId: api_workflow_ai_providers_destroy
      description: |-
        API endpoint that allows AI Providers to be viewed or edited.

        Provides standard CRUD operations and a custom action to set a
        provider as the default for the company.
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this AI Provider.
          required: true
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
  /api/workflow/ai-providers/{id}/set-default/:
    post:
      operationId: api_workflow_ai_providers_set_default_create
      description: |-
        Set this provider as the default.
        This will atomically unset any other provider that is currently the default.
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this AI Provider.
          required: true
      tags:
        - api
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIProviderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AIProviderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AIProviderRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIProvider'
          description: ''
  /api/workflow/app-errors/:
    get:
      operationId: api_workflow_app_errors_list
      description: |-
        ViewSet for AppError with filtering capabilities and resolution actions.

        Provides list, retrieve, and resolution management for application errors.
        Includes comprehensive filtering and search capabilities for error analysis.

        Endpoints:
        - GET /api/app-errors/
        - GET /api/app-errors/<id>/
        - POST /api/app-errors/<id>/mark_resolved/
        - POST /api/app-errors/<id>/mark_unresolved/
      parameters:
        - in: query
          name: app
          schema:
            type: string
        - in: query
          name: app__icontains
          schema:
            type: string
        - in: query
          name: file
          schema:
            type: string
        - in: query
          name: file__icontains
          schema:
            type: string
        - in: query
          name: function
          schema:
            type: string
        - in: query
          name: function__icontains
          schema:
            type: string
        - in: query
          name: job_id
          schema:
            type: string
            format: uuid
        - name: ordering
          required: false
          in: query
          description: Which field to use when ordering the results.
          schema:
            type: string
        - name: page
          required: false
          in: query
          description: A page number within the paginated result set.
          schema:
            type: integer
        - in: query
          name: resolved
          schema:
            type: boolean
        - name: search
          required: false
          in: query
          description: A search term.
          schema:
            type: string
        - in: query
          name: severity
          schema:
            type: integer
        - in: query
          name: severity__gte
          schema:
            type: integer
        - in: query
          name: severity__lte
          schema:
            type: integer
        - in: query
          name: timestamp__gte
          schema:
            type: string
            format: date-time
        - in: query
          name: timestamp__lte
          schema:
            type: string
            format: date-time
        - in: query
          name: user_id
          schema:
            type: string
            format: uuid
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAppErrorList'
          description: ''
  /api/workflow/app-errors/{id}/:
    get:
      operationId: api_workflow_app_errors_retrieve
      description: |-
        ViewSet for AppError with filtering capabilities and resolution actions.

        Provides list, retrieve, and resolution management for application errors.
        Includes comprehensive filtering and search capabilities for error analysis.

        Endpoints:
        - GET /api/app-errors/
        - GET /api/app-errors/<id>/
        - POST /api/app-errors/<id>/mark_resolved/
        - POST /api/app-errors/<id>/mark_unresolved/
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Application Error.
          required: true
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppError'
          description: ''
  /api/workflow/app-errors/{id}/mark_resolved/:
    post:
      operationId: api_workflow_app_errors_mark_resolved_create
      description: Mark an error as resolved.
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Application Error.
          required: true
      tags:
        - api
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppErrorRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AppErrorRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AppErrorRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppError'
          description: ''
  /api/workflow/app-errors/{id}/mark_unresolved/:
    post:
      operationId: api_workflow_app_errors_mark_unresolved_create
      description: Mark an error as unresolved.
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Application Error.
          required: true
      tags:
        - api
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppErrorRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AppErrorRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AppErrorRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppError'
          description: ''
  /api/workflow/xero-pay-items/:
    get:
      operationId: api_workflow_xero_pay_items_list
      description: |-
        API endpoint for Xero pay items (earnings rates and leave types).

        Read-only - these are synced from Xero, not created locally.
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/XeroPayItem'
          description: ''
  /api/workflow/xero-pay-items/{id}/:
    get:
      operationId: api_workflow_xero_pay_items_retrieve
      description: |-
        API endpoint for Xero pay items (earnings rates and leave types).

        Read-only - these are synced from Xero, not created locally.
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Xero Pay Item.
          required: true
      tags:
        - api
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroPayItem'
          description: ''
  /api/xero/create_invoice/{job_id}:
    post:
      operationId: api_xero_create_invoice_create
      description: Creates an invoice in Xero for the specified job
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Xero
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentSuccessResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
  /api/xero/create_purchase_order/{purchase_order_id}:
    post:
      operationId: api_xero_create_purchase_order_create
      description: Creates or updates a Purchase Order in Xero.
      parameters:
        - in: path
          name: purchase_order_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Xero
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentSuccessResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
  /api/xero/create_quote/{job_id}:
    post:
      operationId: api_xero_create_quote_create
      description: Creates a quote in Xero for the specified job
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Xero
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/XeroQuoteCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/XeroQuoteCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/XeroQuoteCreateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentSuccessResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
  /api/xero/delete_invoice/{job_id}:
    delete:
      operationId: api_xero_delete_invoice_destroy
      description: Deletes a specific invoice in Xero for a given job, identified
        by its Xero ID.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
          required: true
        - in: query
          name: xero_invoice_id
          schema:
            type: string
          required: true
      tags:
        - Xero
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentSuccessResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
  /api/xero/delete_purchase_order/{purchase_order_id}:
    delete:
      operationId: api_xero_delete_purchase_order_destroy
      description: Deletes a purchase order in Xero for the specified purchase order
      parameters:
        - in: path
          name: purchase_order_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Xero
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentSuccessResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
  /api/xero/delete_quote/{job_id}:
    delete:
      operationId: api_xero_delete_quote_destroy
      description: Deletes a quote in Xero for the specified job
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Xero
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentSuccessResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroDocumentErrorResponse'
          description: ''
  /app-errors/:
    get:
      operationId: app_errors_list
      description: |-
        API view for listing application errors.

        Returns a paginated list of all AppError records ordered by timestamp
        (most recent first). Includes filtering capabilities for debugging and
        monitoring application issues.

        Endpoint: /api/app-errors/
      parameters:
        - in: query
          name: app
          schema:
            type: string
        - in: query
          name: job_id
          schema:
            type: string
            format: uuid
        - name: page
          required: false
          in: query
          description: A page number within the paginated result set.
          schema:
            type: integer
        - in: query
          name: resolved
          schema:
            type: boolean
        - name: search
          required: false
          in: query
          description: A search term.
          schema:
            type: string
        - in: query
          name: severity
          schema:
            type: integer
        - in: query
          name: user_id
          schema:
            type: string
            format: uuid
      tags:
        - app-errors
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAppErrorList'
          description: ''
  /app-errors/{id}/:
    get:
      operationId: app_errors_retrieve
      description: |-
        API view for retrieving a single application error.

        Returns detailed information about a specific AppError record
        including error message, context, location, and resolution status.
        Used for investigating specific application failures.

        Endpoint: /api/app-errors/<id>/
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - app-errors
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppError'
          description: ''
  /clients/{client_id}/:
    get:
      operationId: clients_retrieve
      description: Retrieve detailed information for a specific client.
      summary: Get client details
      parameters:
        - in: path
          name: client_id
          schema:
            type: string
            format: uuid
          description: UUID of the client
          required: true
      tags:
        - Clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientDetailResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /clients/{client_id}/jobs/:
    get:
      operationId: clients_jobs_retrieve
      description: Retrieve all jobs for a specific client.
      summary: Get client jobs
      parameters:
        - in: path
          name: client_id
          schema:
            type: string
            format: uuid
          description: UUID of the client
          required: true
      tags:
        - Clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientJobsResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /clients/{client_id}/update/:
    put:
      operationId: clients_update_update
      description: Update an existing client's information.
      summary: Update client
      parameters:
        - in: path
          name: client_id
          schema:
            type: string
            format: uuid
          description: UUID of the client
          required: true
      tags:
        - Clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientUpdateRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientUpdateResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
    patch:
      operationId: clients_update_partial_update
      description: Partially update an existing client's information.
      summary: Partially update client
      parameters:
        - in: path
          name: client_id
          schema:
            type: string
            format: uuid
          description: UUID of the client
          required: true
      tags:
        - Clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientUpdateRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientUpdateResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /clients/addresses/validate/:
    post:
      operationId: clients_addresses_validate_create
      description: Validate an address and return structured candidates.
      tags:
        - clients
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                address:
                  type: string
                  description: Freetext address to validate
              required:
                - address
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  candidates:
                    type: array
                    items:
                      type: object
                      properties:
                        formatted_address:
                          type: string
                        street:
                          type: string
                        suburb:
                          type: string
                        city:
                          type: string
                        state:
                          type: string
                        postal_code:
                          type: string
                        country:
                          type: string
                        google_place_id:
                          type: string
                        latitude:
                          type: number
                        longitude:
                          type: number
          description: ''
        '400':
          content:
            application/json:
              schema:
                description: Missing or invalid address
          description: ''
        '503':
          content:
            application/json:
              schema:
                description: Google API unavailable or not configured
          description: ''
  /clients/all/:
    get:
      operationId: clients_all_list
      description: Returns a list of all clients with basic information (id and name)
        for dropdowns and search.
      summary: List all clients
      tags:
        - Clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ClientNameOnly'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /clients/contacts/:
    get:
      operationId: clients_contacts_list
      description: List all contacts, optionally filtered by client_id.
      parameters:
        - in: query
          name: client_id
          schema:
            type: string
            format: uuid
          description: Filter contacts by client UUID
      tags:
        - clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ClientContact'
          description: ''
    post:
      operationId: clients_contacts_create
      description: |-
        ViewSet for ClientContact CRUD operations.

        Endpoints:
        - GET    /api/clients/contacts/           - list all contacts
        - POST   /api/clients/contacts/           - create contact
        - GET    /api/clients/contacts/<id>/      - retrieve contact
        - PUT    /api/clients/contacts/<id>/      - full update
        - PATCH  /api/clients/contacts/<id>/      - partial update
        - DELETE /api/clients/contacts/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - client_id: Filter contacts by client UUID
      tags:
        - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientContactRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientContactRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientContactRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientContact'
          description: ''
  /clients/contacts/{id}/:
    get:
      operationId: clients_contacts_retrieve
      description: |-
        ViewSet for ClientContact CRUD operations.

        Endpoints:
        - GET    /api/clients/contacts/           - list all contacts
        - POST   /api/clients/contacts/           - create contact
        - GET    /api/clients/contacts/<id>/      - retrieve contact
        - PUT    /api/clients/contacts/<id>/      - full update
        - PATCH  /api/clients/contacts/<id>/      - partial update
        - DELETE /api/clients/contacts/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - client_id: Filter contacts by client UUID
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Client Contact.
          required: true
      tags:
        - clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientContact'
          description: ''
    put:
      operationId: clients_contacts_update
      description: |-
        ViewSet for ClientContact CRUD operations.

        Endpoints:
        - GET    /api/clients/contacts/           - list all contacts
        - POST   /api/clients/contacts/           - create contact
        - GET    /api/clients/contacts/<id>/      - retrieve contact
        - PUT    /api/clients/contacts/<id>/      - full update
        - PATCH  /api/clients/contacts/<id>/      - partial update
        - DELETE /api/clients/contacts/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - client_id: Filter contacts by client UUID
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Client Contact.
          required: true
      tags:
        - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientContactRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientContactRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientContactRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientContact'
          description: ''
    patch:
      operationId: clients_contacts_partial_update
      description: |-
        ViewSet for ClientContact CRUD operations.

        Endpoints:
        - GET    /api/clients/contacts/           - list all contacts
        - POST   /api/clients/contacts/           - create contact
        - GET    /api/clients/contacts/<id>/      - retrieve contact
        - PUT    /api/clients/contacts/<id>/      - full update
        - PATCH  /api/clients/contacts/<id>/      - partial update
        - DELETE /api/clients/contacts/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - client_id: Filter contacts by client UUID
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Client Contact.
          required: true
      tags:
        - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedClientContactRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedClientContactRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedClientContactRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientContact'
          description: ''
    delete:
      operationId: clients_contacts_destroy
      description: |-
        ViewSet for ClientContact CRUD operations.

        Endpoints:
        - GET    /api/clients/contacts/           - list all contacts
        - POST   /api/clients/contacts/           - create contact
        - GET    /api/clients/contacts/<id>/      - retrieve contact
        - PUT    /api/clients/contacts/<id>/      - full update
        - PATCH  /api/clients/contacts/<id>/      - partial update
        - DELETE /api/clients/contacts/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - client_id: Filter contacts by client UUID
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Client Contact.
          required: true
      tags:
        - clients
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
  /clients/create/:
    post:
      operationId: clients_create_create
      description: Creates a new client in Xero first, then syncs locally. Requires
        valid Xero authentication.
      summary: Create a new client
      tags:
        - Clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ClientCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ClientCreateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientCreateResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientDuplicateErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /clients/jobs/{job_id}/contact/:
    get:
      operationId: clients_jobs_contact_retrieve
      description: Retrieve contact information for a specific job.
      summary: Get job contact
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          description: UUID of the job
          required: true
      tags:
        - Clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobContactResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
    put:
      operationId: clients_jobs_contact_update
      description: Update the contact person associated with a specific job.
      summary: Update job contact
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          description: UUID of the job
          required: true
      tags:
        - Clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobContactUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobContactUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobContactUpdateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobContactResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /clients/pickup-addresses/:
    get:
      operationId: clients_pickup_addresses_list
      description: List all pickup addresses, optionally filtered by supplier_id.
      parameters:
        - in: query
          name: supplier_id
          schema:
            type: string
            format: uuid
          description: Filter addresses by supplier UUID
      tags:
        - clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SupplierPickupAddress'
          description: ''
    post:
      operationId: clients_pickup_addresses_create
      description: |-
        ViewSet for SupplierPickupAddress CRUD operations.

        Endpoints:
        - GET    /api/clients/pickup-addresses/           - list all addresses
        - POST   /api/clients/pickup-addresses/           - create address
        - GET    /api/clients/pickup-addresses/<id>/      - retrieve address
        - PUT    /api/clients/pickup-addresses/<id>/      - full update
        - PATCH  /api/clients/pickup-addresses/<id>/      - partial update
        - DELETE /api/clients/pickup-addresses/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - supplier_id: Filter addresses by supplier (client) UUID
      tags:
        - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SupplierPickupAddressRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SupplierPickupAddressRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SupplierPickupAddressRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SupplierPickupAddress'
          description: ''
  /clients/pickup-addresses/{id}/:
    get:
      operationId: clients_pickup_addresses_retrieve
      description: |-
        ViewSet for SupplierPickupAddress CRUD operations.

        Endpoints:
        - GET    /api/clients/pickup-addresses/           - list all addresses
        - POST   /api/clients/pickup-addresses/           - create address
        - GET    /api/clients/pickup-addresses/<id>/      - retrieve address
        - PUT    /api/clients/pickup-addresses/<id>/      - full update
        - PATCH  /api/clients/pickup-addresses/<id>/      - partial update
        - DELETE /api/clients/pickup-addresses/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - supplier_id: Filter addresses by supplier (client) UUID
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Supplier Pickup Address.
          required: true
      tags:
        - clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SupplierPickupAddress'
          description: ''
    put:
      operationId: clients_pickup_addresses_update
      description: |-
        ViewSet for SupplierPickupAddress CRUD operations.

        Endpoints:
        - GET    /api/clients/pickup-addresses/           - list all addresses
        - POST   /api/clients/pickup-addresses/           - create address
        - GET    /api/clients/pickup-addresses/<id>/      - retrieve address
        - PUT    /api/clients/pickup-addresses/<id>/      - full update
        - PATCH  /api/clients/pickup-addresses/<id>/      - partial update
        - DELETE /api/clients/pickup-addresses/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - supplier_id: Filter addresses by supplier (client) UUID
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Supplier Pickup Address.
          required: true
      tags:
        - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SupplierPickupAddressRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SupplierPickupAddressRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SupplierPickupAddressRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SupplierPickupAddress'
          description: ''
    patch:
      operationId: clients_pickup_addresses_partial_update
      description: |-
        ViewSet for SupplierPickupAddress CRUD operations.

        Endpoints:
        - GET    /api/clients/pickup-addresses/           - list all addresses
        - POST   /api/clients/pickup-addresses/           - create address
        - GET    /api/clients/pickup-addresses/<id>/      - retrieve address
        - PUT    /api/clients/pickup-addresses/<id>/      - full update
        - PATCH  /api/clients/pickup-addresses/<id>/      - partial update
        - DELETE /api/clients/pickup-addresses/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - supplier_id: Filter addresses by supplier (client) UUID
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Supplier Pickup Address.
          required: true
      tags:
        - clients
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedSupplierPickupAddressRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedSupplierPickupAddressRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedSupplierPickupAddressRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SupplierPickupAddress'
          description: ''
    delete:
      operationId: clients_pickup_addresses_destroy
      description: |-
        ViewSet for SupplierPickupAddress CRUD operations.

        Endpoints:
        - GET    /api/clients/pickup-addresses/           - list all addresses
        - POST   /api/clients/pickup-addresses/           - create address
        - GET    /api/clients/pickup-addresses/<id>/      - retrieve address
        - PUT    /api/clients/pickup-addresses/<id>/      - full update
        - PATCH  /api/clients/pickup-addresses/<id>/      - partial update
        - DELETE /api/clients/pickup-addresses/<id>/      - soft delete (sets is_active=False)

        Query Parameters:
        - supplier_id: Filter addresses by supplier (client) UUID
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Supplier Pickup Address.
          required: true
      tags:
        - clients
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
  /clients/search/:
    get:
      operationId: clients_search_retrieve
      description: Lists/searches clients with pagination and sorting.
      summary: Search clients
      parameters:
        - in: query
          name: page
          schema:
            type: integer
          description: Page number (default 1)
        - in: query
          name: page_size
          schema:
            type: integer
          description: Results per page (default 50)
        - in: query
          name: q
          schema:
            type: string
          description: Search query (case-insensitive substring match). If empty, returns
            all clients.
        - in: query
          name: sort_by
          schema:
            type: string
          description: Field to sort by (default 'name')
        - in: query
          name: sort_dir
          schema:
            type: string
          description: "Sort direction: 'asc' or 'desc' (default 'asc')"
      tags:
        - Clients
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientSearchResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /job/api/company_defaults/:
    get:
      operationId: job_api_company_defaults_retrieve
      description: Fetch company default settings.
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyDefaultsJobDetail'
          description: ''
  /job/api/job/{job_id}/assignment:
    post:
      operationId: job_api_job_assignment_create
      description: API Endpoint to assign staff to a job (POST /api/job/<job_id>/assignment)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignJobRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AssignJobRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AssignJobRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AssignJobResponse'
          description: ''
  /job/api/job/{job_id}/assignment/{staff_id}:
    delete:
      operationId: job_api_job_assignment_destroy
      description: API Endpoint to remove staff from a job (DELETE /api/job/<job_id>/assignment/<staff_id>)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: staff_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AssignJobResponse'
          description: ''
  /job/api/job/completed/:
    get:
      operationId: job_api_job_completed_list
      description: API Endpoint to provide Job data for archiving display
      parameters:
        - name: page
          required: false
          in: query
          description: A page number within the paginated result set.
          schema:
            type: integer
        - name: page_size
          required: false
          in: query
          description: Number of results to return per page.
          schema:
            type: integer
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCompleteJobList'
          description: ''
  /job/api/job/completed/archive:
    post:
      operationId: job_api_job_completed_archive_create
      description: API Endpoint to set 'paid' flag as True in the received jobs
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArchiveJobsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ArchiveJobsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ArchiveJobsRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArchiveJobs'
          description: ''
  /job/api/jobs/{job_id}/quote-chat/:
    get:
      operationId: job_api_jobs_quote_chat_retrieve
      description: |-
        Load all chat messages for a specific job.

        Response format matches job_quote_chat_plan.md specification.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobQuoteChatHistoryResponse'
          description: ''
    post:
      operationId: job_api_jobs_quote_chat_create
      description: Save a new chat message (user or assistant) for a job
      summary: Save a new chat message
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobQuoteChatCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobQuoteChatCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobQuoteChatCreateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobQuoteChatInteractionSuccessResponse'
          description: ''
    delete:
      operationId: job_api_jobs_quote_chat_destroy
      description: Delete all chat messages for a job (start fresh).
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
  /job/api/jobs/{job_id}/quote-chat/{message_id}/:
    patch:
      operationId: job_api_jobs_quote_chat_partial_update
      description: |-
        Update an existing message (useful for streaming responses).

        Expected JSON:
        {
            "content": "Updated message content",
            "metadata": {"final": true}
        }
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: message_id
          schema:
            type: string
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedJobQuoteChatUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedJobQuoteChatUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedJobQuoteChatUpdateRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobQuoteChatUpdate'
          description: ''
  /job/api/jobs/{job_id}/quote-chat/interaction/:
    post:
      operationId: job_api_jobs_quote_chat_interaction_create
      description: Sends user message to AI assistant and returns the generated response
      summary: Get AI assistant response
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobQuoteChatInteractionRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobQuoteChatInteractionRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobQuoteChatInteractionRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobQuoteChatInteractionSuccessResponse'
          description: AI response generated successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobQuoteChatInteractionErrorResponse'
          description: Invalid input data or configuration error
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobQuoteChatInteractionErrorResponse'
          description: Job not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobQuoteChatInteractionErrorResponse'
          description: Internal server error
  /job/api/jobs/{job_id}/reorder/:
    post:
      operationId: job_api_jobs_reorder_create
      description: Reorder a job within or between kanban columns.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobReorderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobReorderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobReorderRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KanbanSuccessResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KanbanErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KanbanErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KanbanErrorResponse'
          description: ''
  /job/api/jobs/{job_id}/update-status/:
    post:
      operationId: job_api_jobs_update_status_create
      description: Update the status of a job on the Kanban board.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobStatusUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobStatusUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobStatusUpdateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KanbanSuccessResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KanbanErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KanbanErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KanbanErrorResponse'
          description: ''
  /job/api/jobs/advanced-search/:
    get:
      operationId: job_api_jobs_advanced_search_retrieve
      description: Endpoint for advanced job search - API endpoint.
      parameters:
        - in: query
          name: client_name
          schema:
            type: string
          description: Filter by client name
        - in: query
          name: contact_person
          schema:
            type: string
          description: Filter by contact person
        - in: query
          name: created_after
          schema:
            type: string
          description: Filter jobs created after this date (YYYY-MM-DD)
        - in: query
          name: created_before
          schema:
            type: string
          description: Filter jobs created before this date (YYYY-MM-DD)
        - in: query
          name: created_by
          schema:
            type: string
          description: Filter by creator
        - in: query
          name: description
          schema:
            type: string
          description: Filter by job description
        - in: query
          name: job_number
          schema:
            type: string
          description: Filter by job number
        - in: query
          name: name
          schema:
            type: string
          description: Filter by job name
        - in: query
          name: paid
          schema:
            type: string
          description: Filter by paid status
        - in: query
          name: q
          schema:
            type: string
          description: Universal search - searches across job number, name, description,
            and client name with OR logic
        - in: query
          name: rejected_flag
          schema:
            type: string
          description: Filter by rejected status
        - in: query
          name: status
          schema:
            type: string
          description: Filter by job status (can be multiple)
        - in: query
          name: xero_invoice_params
          schema:
            type: string
          description: Filter by Xero invoice parameters
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdvancedSearchResponse'
          description: ''
  /job/api/jobs/fetch-all/:
    get:
      operationId: job_api_jobs_fetch_all_retrieve
      description: Fetch all jobs for Kanban board - API endpoint.
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FetchAllJobsResponse'
          description: ''
  /job/api/jobs/fetch-by-column/{column_id}/:
    get:
      operationId: job_api_jobs_fetch_by_column_retrieve
      description: Fetch jobs by kanban column using new categorization system.
      parameters:
        - in: path
          name: column_id
          schema:
            type: string
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FetchJobsByColumnResponse'
          description: ''
  /job/api/jobs/fetch/{status}/:
    get:
      operationId: job_api_jobs_fetch_retrieve
      description: Fetch jobs by status with optional search - API endpoint.
      parameters:
        - in: path
          name: status
          schema:
            type: string
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FetchJobsResponse'
          description: ''
  /job/api/jobs/status-values/:
    get:
      operationId: job_api_jobs_status_values_retrieve
      description: Return available status values for Kanban - API endpoint.
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FetchStatusValuesResponse'
          description: ''
  /job/api/jobs/workshop:
    get:
      operationId: job_api_jobs_workshop_list
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorkshopJob'
          description: ''
  /job/api/workshop/timesheets/:
    get:
      operationId: job_api_workshop_timesheets_retrieve
      description: Return all timesheet entries for the staff member on a given date.
      parameters:
        - in: query
          name: date
          schema:
            type: string
            format: date
          description: Optional date (YYYY-MM-DD). Defaults to today.
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkshopTimesheetListResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '500':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
    post:
      operationId: job_api_workshop_timesheets_create
      description: Create a new timesheet entry for the authenticated staff.
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkshopTimesheetEntryRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/WorkshopTimesheetEntryRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/WorkshopTimesheetEntryRequestRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkshopTimesheetEntry'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '500':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
    patch:
      operationId: job_api_workshop_timesheets_partial_update
      description: Update an existing timesheet entry belonging to the staff member.
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedWorkshopTimesheetEntryUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedWorkshopTimesheetEntryUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedWorkshopTimesheetEntryUpdateRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkshopTimesheetEntry'
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '500':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
    delete:
      operationId: job_api_workshop_timesheets_destroy
      description: Delete a timesheet entry belonging to the staff member.
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '403':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '500':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /job/job/{job_id}/workshop-pdf/:
    get:
      operationId: job_job_workshop_pdf_retrieve
      description: Generate and return a workshop PDF for printing.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkshopPDFResponse'
          description: ''
  /job/rest/cost_lines/{cost_line_id}/:
    patch:
      operationId: job_rest_cost_lines_partial_update
      description: |-
        Update a cost line
        Dynamically infers the stock adjustment based on quantity change
      parameters:
        - in: path
          name: cost_line_id
          schema:
            type: string
          description: ID of the CostLine to update
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedCostLineCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedCostLineCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedCostLineCreateUpdateRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostLineCreateUpdate'
          description: ''
  /job/rest/cost_lines/{cost_line_id}/approve/:
    post:
      operationId: approveCostLine
      description: |-
        Approve an existing CostLine

        POST /job/rest/cost_lines/<cost_line_id>/approve
      parameters:
        - in: path
          name: cost_line_id
          schema:
            type: string
          description: ID of the CostLine to approve
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostLineApprovalResult'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostLineErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostLineErrorResponse'
          description: ''
  /job/rest/cost_lines/{cost_line_id}/delete/:
    delete:
      operationId: job_rest_cost_lines_delete_destroy
      description: Delete an existing CostLine by ID
      parameters:
        - in: path
          name: cost_line_id
          schema:
            type: string
          description: ID of the CostLine to delete
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostLineErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostLineErrorResponse'
          description: ''
  /job/rest/data-integrity/scan/:
    get:
      operationId: scan_data_integrity
      description: Check all foreign key relationships, JSON references, and business
        rules for violations.
      summary: Scan database integrity
      tags:
        - Data Quality
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataIntegrityResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /job/rest/data-quality/archived-jobs-compliance/:
    get:
      operationId: check_archived_jobs_compliance
      description: Verify that all archived jobs are either cancelled or fully invoiced
        and paid.
      summary: Check archived jobs compliance
      tags:
        - Data Quality
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArchivedJobsComplianceResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /job/rest/jobs/:
    post:
      operationId: job_rest_jobs_create
      description: Create a new Job. Concurrency is controlled in this endpoint (E-tag/If-Match).
      tags:
        - Jobs
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobCreateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobCreateResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/:
    get:
      operationId: getFullJob
      description: Fetch complete job data including financial information. Concurrency
        is controlled in this endpoint (E-tag/If-Match)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDetailResponse'
          description: ''
    put:
      operationId: job_rest_jobs_update
      description: Update Job data (autosave). Concurrency is controlled in this endpoint
        (E-tag/If-Match).
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobDeltaEnvelopeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobDeltaEnvelopeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobDeltaEnvelopeRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDetailResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
    patch:
      operationId: job_rest_jobs_partial_update
      description: Partially update Job data. Only updates the fields provided in
        the request body. Concurrency is controlled in this endpoint (E-tag/If-Match).
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedJobDeltaEnvelopeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedJobDeltaEnvelopeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedJobDeltaEnvelopeRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDetailResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
    delete:
      operationId: job_rest_jobs_destroy
      description: Delete a Job if permitted. Concurrency is controlled in this endpoint
        (E-tag/If-Match).
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDeleteResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/basic-info/:
    get:
      operationId: job_rest_jobs_basic_info_retrieve
      description: Fetch job basic information (description, delivery date, order
        number, notes). Concurrency is controlled in this endpoint (E-tag/If-Match)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobBasicInformationResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/cost_sets/{kind}/cost_lines/:
    post:
      operationId: job_rest_jobs_cost_sets_cost_lines_create
      description: Create a new cost line
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: kind
          schema:
            type: string
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CostLineCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CostLineCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CostLineCreateUpdateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostLineCreateUpdate'
          description: ''
  /job/rest/jobs/{job_id}/cost_sets/actual/cost_lines/:
    post:
      operationId: job_rest_jobs_cost_sets_actual_cost_lines_create
      description: Create a new cost line
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CostLineCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CostLineCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CostLineCreateUpdateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostLineCreateUpdate'
          description: ''
  /job/rest/jobs/{job_id}/cost_sets/quote/revise/:
    get:
      operationId: job_rest_jobs_cost_sets_quote_revise_retrieve
      description: Returns a list of archived quote revisions for the specified job.
        Each revision contains summary and cost line data as archived at the time
        of revision.
      summary: List archived quote revisions
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuoteRevisionsList'
          description: ''
    post:
      operationId: job_rest_jobs_cost_sets_quote_revise_create
      description: Archives the current quote cost lines and summary for the specified
        job, clears all current cost lines from the quote CostSet, and starts a new
        quote revision. Returns details of the archived revision and status.
      summary: Create a new quote revision
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuoteRevisionRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/QuoteRevisionRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/QuoteRevisionRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuoteRevisionResponse'
          description: ''
  /job/rest/jobs/{job_id}/costs/summary/:
    get:
      operationId: job_rest_jobs_costs_summary_retrieve
      description: Fetch job cost summary across all cost sets. Concurrency is controlled
        in this endpoint (E-tag/If-Match)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobCostSummaryResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/delivery-docket/:
    get:
      operationId: generateDeliveryDocketRest
      description: Generate a delivery docket PDF for a job and save it as a JobFile
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkshopPDFResponse'
          description: ''
  /job/rest/jobs/{job_id}/delta-rejections/:
    get:
      operationId: job_rest_job_delta_rejections_list
      description: Fetch delta rejections recorded for this job.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: limit
          schema:
            type: integer
          description: Maximum number of records to return (default 50, max 200).
        - in: query
          name: offset
          schema:
            type: integer
          description: Offset for pagination (default 0).
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDeltaRejectionListResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/events/:
    get:
      operationId: job_rest_jobs_events_retrieve
      description: Fetch job events list. Concurrency is controlled in this endpoint
        (E-tag/If-Match)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobEventsResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/events/create/:
    post:
      operationId: job_rest_jobs_events_create
      description: Add a manual event to the Job with duplicate prevention. Concurrency
        is controlled in this endpoint (E-tag/If-Match).
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobEventCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobEventCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobEventCreateRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobEventCreateResponse'
          description: ''
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
        '429':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/files/:
    get:
      operationId: listJobFiles
      description: List all active files for a job.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Job Files
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobFile'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
          description: ''
    post:
      operationId: uploadJobFiles
      description: Upload files to a job. Job ID (UUID) is in URL path.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Job Files
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobFileUploadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobFileUploadRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileUploadSuccessResponse'
          description: ''
        '207':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileUploadPartialResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/files/{file_id}/:
    get:
      operationId: getJobFile
      description: Download/view a specific job file.
      parameters:
        - in: path
          name: file_id
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: format
          schema:
            type: string
            enum:
              - file
              - json
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Job Files
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: string
                format: binary
            '*/*':
              schema:
                type: string
                format: binary
          description: Binary file content
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
            '*/*':
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
          description: ''
    put:
      operationId: updateJobFile
      description: Update job file metadata.
      parameters:
        - in: path
          name: file_id
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: format
          schema:
            type: string
            enum:
              - file
              - json
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Job Files
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobFileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobFileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobFileRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileUpdateSuccessResponse'
            '*/*':
              schema:
                $ref: '#/components/schemas/JobFileUpdateSuccessResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
            '*/*':
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
            '*/*':
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
          description: ''
    delete:
      operationId: deleteJobFile
      description: Delete a job file.
      parameters:
        - in: path
          name: file_id
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: format
          schema:
            type: string
            enum:
              - file
              - json
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Job Files
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
            '*/*':
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
            '*/*':
              schema:
                $ref: '#/components/schemas/JobFileErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/files/{file_id}/thumbnail/:
    get:
      operationId: getJobFileThumbnail
      description: Get JPEG thumbnail for a job file (images only).
      parameters:
        - in: path
          name: file_id
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Job Files
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: string
                format: binary
          description: JPEG thumbnail image
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobFileThumbnailErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/header/:
    get:
      operationId: job_rest_jobs_header_retrieve
      description: Fetch essential job header information for fast loading. Concurrency
        is controlled in this endpoint (E-tag/If-Match)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobHeaderResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/invoices/:
    get:
      operationId: job_rest_jobs_invoices_retrieve
      description: Fetch job invoices list. Concurrency is controlled in this endpoint
        (E-tag/If-Match)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobInvoicesResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/jsa/:
    get:
      operationId: job_rest_jobs_jsa_list
      description: List all JSAs for a job.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SafetyDocumentList'
          description: ''
  /job/rest/jobs/{job_id}/jsa/generate/:
    post:
      operationId: job_rest_jobs_jsa_generate_create
      description: Generate a new JSA for a job.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SafetyDocument'
          description: ''
  /job/rest/jobs/{job_id}/quote/:
    get:
      operationId: job_rest_jobs_quote_retrieve
      description: Fetch job quote. Concurrency is controlled in this endpoint (E-tag/If-Match)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Quote'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/quote/accept/:
    post:
      operationId: job_rest_jobs_quote_accept_create
      description: Accept a quote for the job. Sets the quote_acceptance_date to current
        datetime. Concurrency is controlled in this endpoint (E-tag/If-Match).
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobQuoteAcceptanceRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobQuoteAcceptanceRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobQuoteAcceptanceRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobQuoteAcceptance'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/quote/status/:
    get:
      operationId: job_rest_jobs_quote_status_retrieve
      description: Get quote status for job
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuoteImportStatusResponse'
          description: ''
  /job/rest/jobs/{job_id}/timeline/:
    get:
      operationId: job_rest_jobs_timeline_retrieve
      description: Fetch unified job timeline (events + cost lines)
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobTimelineResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/undo-change/:
    post:
      operationId: job_rest_jobs_undo_change_create
      description: Undo a previously applied job delta (requires delta envelope undo
        support).
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Jobs
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobUndoRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/JobUndoRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/JobUndoRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDetailResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/{job_id}/workshop-pdf/:
    get:
      operationId: job_rest_jobs_workshop_pdf_retrieve
      description: Generate and return a workshop PDF for printing.
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkshopPDFResponse'
          description: ''
  /job/rest/jobs/{id}/cost_sets/{kind}/:
    get:
      operationId: job_rest_jobs_cost_sets_retrieve
      description: |-
        Get the latest CostSet for a job by kind.

        Args:
            pk: Job primary key (UUID)
            kind: CostSet kind ('estimate', 'quote', or 'actual')

        Returns:
            Response: Serialized CostSet data or 404
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: kind
          schema:
            type: string
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CostSet'
          description: ''
  /job/rest/jobs/{id}/quote/apply/:
    post:
      operationId: job_rest_jobs_quote_apply_create
      description: |-
        Apply quote import from linked Google Sheet.

        POST /job/rest/jobs/<uuid:pk>/quote/apply/
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplyQuoteResponseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ApplyQuoteResponseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ApplyQuoteResponseRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplyQuoteResponse'
          description: ''
  /job/rest/jobs/{id}/quote/link/:
    post:
      operationId: job_rest_jobs_quote_link_create
      description: |-
        Link a job to a Google Sheets quote template.

        POST /job/rest/jobs/<uuid:pk>/quote/link/
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkQuoteSheetRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LinkQuoteSheetRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LinkQuoteSheetRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkQuoteSheet'
          description: ''
  /job/rest/jobs/{id}/quote/preview/:
    post:
      operationId: job_rest_jobs_quote_preview_create
      description: |-
        Preview quote import from linked Google Sheet.

        POST /job/rest/jobs/<uuid:pk>/quote/preview/
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreviewQuoteResponseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PreviewQuoteResponseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PreviewQuoteResponseRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PreviewQuoteResponse'
          description: ''
  /job/rest/jobs/delta-rejections/:
    get:
      operationId: job_rest_jobs_delta_rejections_admin_list
      description: Fetch rejected job delta envelopes (global admin view).
      parameters:
        - in: query
          name: job_id
          schema:
            type: string
            format: uuid
          description: Optional job UUID filter.
        - in: query
          name: limit
          schema:
            type: integer
          description: Maximum number of records to return (default 50, max 200).
        - in: query
          name: offset
          schema:
            type: integer
          description: Offset for pagination (default 0).
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDeltaRejectionListResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobRestErrorResponse'
          description: ''
  /job/rest/jobs/status-choices/:
    get:
      operationId: job_rest_jobs_status_choices_retrieve
      description: Fetch job status choices. Concurrency is controlled in this endpoint
        (E-tag/If-Match)
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobStatusChoicesResponse'
          description: ''
  /job/rest/jobs/weekly-metrics/:
    get:
      operationId: job_rest_jobs_weekly_metrics_list
      description: Fetch weekly metrics data for jobs with time entries in the specified
        week. Concurrency is controlled in this endpoint (E-tag/If-Match).
      parameters:
        - in: query
          name: week
          schema:
            type: string
          description: Month (1-12). Defaults to current month.
      tags:
        - Jobs
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WeeklyMetrics'
          description: ''
  /job/rest/month-end/:
    get:
      operationId: job_rest_month_end_retrieve
      description: |-
        REST API view for month-end processing of special jobs and stock data.

        GET: Returns special jobs data and stock job information for month-end review
        POST: Processes selected jobs for month-end archiving and status updates
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MonthEndGetResponse'
          description: ''
    post:
      operationId: job_rest_month_end_create
      description: |-
        REST API view for month-end processing of special jobs and stock data.

        GET: Returns special jobs data and stock job information for month-end review
        POST: Processes selected jobs for month-end archiving and status updates
      summary: Runs month-end operation based on given processed ids
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MonthEndPostRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MonthEndPostRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MonthEndPostRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MonthEndPostResponse'
          description: ''
  /job/rest/safety-ai/generate-controls/:
    post:
      operationId: job_rest_safety_ai_generate_controls_create
      description: Generate controls for hazards using AI.
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateControlsRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/GenerateControlsRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/GenerateControlsRequestRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenerateControlsResponse'
          description: ''
  /job/rest/safety-ai/generate-hazards/:
    post:
      operationId: job_rest_safety_ai_generate_hazards_create
      description: Generate hazards for a task description using AI.
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateHazardsRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/GenerateHazardsRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/GenerateHazardsRequestRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenerateHazardsResponse'
          description: ''
  /job/rest/safety-ai/improve-document/:
    post:
      operationId: job_rest_safety_ai_improve_document_create
      description: Improve an entire document using AI.
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ImproveDocumentRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ImproveDocumentRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ImproveDocumentRequestRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImproveDocumentResponse'
          description: ''
  /job/rest/safety-ai/improve-section/:
    post:
      operationId: job_rest_safety_ai_improve_section_create
      description: Improve a section of text using AI.
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ImproveSectionRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ImproveSectionRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ImproveSectionRequestRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImproveSectionResponse'
          description: ''
  /job/rest/safety-documents/:
    get:
      operationId: job_rest_safety_documents_list
      description: |-
        ViewSet for SafetyDocument CRUD operations.

        Endpoints:
        - GET    /rest/safety-documents/              - list all documents
        - GET    /rest/safety-documents/<id>/         - retrieve document
        - DELETE /rest/safety-documents/<id>/         - delete document

        Note: Content endpoints (GET/PUT) are handled by SafetyDocumentContentView.
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: Search by title
        - in: query
          name: type
          schema:
            type: string
          description: Filter by document type (jsa/swp/sop)
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SafetyDocumentList'
          description: ''
  /job/rest/safety-documents/{id}/:
    get:
      operationId: job_rest_safety_documents_retrieve
      description: |-
        ViewSet for SafetyDocument CRUD operations.

        Endpoints:
        - GET    /rest/safety-documents/              - list all documents
        - GET    /rest/safety-documents/<id>/         - retrieve document
        - DELETE /rest/safety-documents/<id>/         - delete document

        Note: Content endpoints (GET/PUT) are handled by SafetyDocumentContentView.
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Safety Document.
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SafetyDocument'
          description: ''
    delete:
      operationId: job_rest_safety_documents_destroy
      description: |-
        ViewSet for SafetyDocument CRUD operations.

        Endpoints:
        - GET    /rest/safety-documents/              - list all documents
        - GET    /rest/safety-documents/<id>/         - retrieve document
        - DELETE /rest/safety-documents/<id>/         - delete document

        Note: Content endpoints (GET/PUT) are handled by SafetyDocumentContentView.
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this Safety Document.
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
  /job/rest/safety-documents/{id}/content/:
    get:
      operationId: job_rest_safety_documents_content_retrieve
      description: |-
        GET/PUT content for a safety document stored in Google Docs.

        - GET: Fetch current content from Google Docs
        - PUT: Push updated content to Google Docs
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SafetyDocumentContentResponse'
          description: ''
    put:
      operationId: job_rest_safety_documents_content_update
      description: |-
        GET/PUT content for a safety document stored in Google Docs.

        - GET: Fetch current content from Google Docs
        - PUT: Push updated content to Google Docs
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SafetyDocumentContentUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SafetyDocumentContentUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SafetyDocumentContentUpdateRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SafetyDocument'
          description: ''
  /job/rest/sop/:
    get:
      operationId: job_rest_sop_list
      description: List all Standard Operating Procedures.
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SafetyDocumentList'
          description: ''
  /job/rest/sop/generate/:
    post:
      operationId: job_rest_sop_generate_create
      description: Generate a new Standard Operating Procedure.
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SOPGenerateRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SOPGenerateRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SOPGenerateRequestRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SafetyDocument'
          description: ''
  /job/rest/swp/:
    get:
      operationId: job_rest_swp_list
      description: List all Safe Work Procedures.
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SafetyDocumentList'
          description: ''
  /job/rest/swp/generate/:
    post:
      operationId: job_rest_swp_generate_create
      description: Generate a new Safe Work Procedure.
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SWPGenerateRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SWPGenerateRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SWPGenerateRequestRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SafetyDocument'
          description: ''
  /job/rest/timesheet/entries/:
    get:
      operationId: job_rest_timesheet_entries_retrieve
      description: Fetches all timesheet entries (CostLines) for a specific staff
        member and date.
      summary: Get timesheet entries for a staff member on a specific date
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetEntryGetResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetErrorResponse'
          description: ''
    post:
      operationId: job_rest_timesheet_entries_create
      description: Creates a new timesheet entry for a staff member on a specific
        date.
      summary: Create a timesheet entry as a CostLine
      tags:
        - job
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModernTimesheetEntryPostRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ModernTimesheetEntryPostRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ModernTimesheetEntryPostRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetEntryPostResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetErrorResponse'
          description: ''
  /job/rest/timesheet/jobs/{job_id}/:
    get:
      operationId: job_rest_timesheet_jobs_retrieve
      description: Get all timesheet cost lines for a job
      parameters:
        - in: path
          name: job_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetJobGetResponse'
          description: ''
  /job/rest/timesheet/staff/{staff_id}/date/{entry_date}/:
    get:
      operationId: job_rest_timesheet_staff_date_retrieve
      description: Get all cost lines for a staff member on a specific date
      parameters:
        - in: path
          name: entry_date
          schema:
            type: string
          required: true
        - in: path
          name: staff_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - job
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModernTimesheetDayGetResponse'
          description: ''
  /purchasing/rest/all-jobs/:
    get:
      operationId: purchasing_rest_all_jobs_retrieve
      description: Get all jobs with stock holding job flag.
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllJobsResponse'
          description: ''
  /purchasing/rest/delivery-receipts/:
    post:
      operationId: purchasing_rest_delivery_receipts_create
      description: |-
        REST API view for processing delivery receipts.

        POST: Processes delivery receipt for a purchase order with stock allocations.
        Concurrency is controlled in this endpoint (ETag/If-Match).
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeliveryReceiptRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DeliveryReceiptRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DeliveryReceiptRequest'
        required: true
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeliveryReceiptResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeliveryReceiptResponse'
          description: ''
  /purchasing/rest/jobs/:
    get:
      operationId: purchasing_rest_jobs_retrieve
      description: Get list of jobs suitable for purchasing operations.
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchasingJobsResponse'
          description: ''
  /purchasing/rest/product-mappings/:
    get:
      operationId: listProductMappings
      description: Get list of product mappings prioritizing unvalidated ones.
      tags:
        - Product Mapping
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductMappingListResponse'
          description: ''
  /purchasing/rest/product-mappings/{mapping_id}/validate/:
    post:
      operationId: validateProductMapping
      description: Validate a product parsing mapping.
      parameters:
        - in: path
          name: mapping_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Product Mapping
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductMappingValidateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductMappingValidateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductMappingValidateRequest'
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductMappingValidateResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductMappingValidateResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductMappingValidateResponse'
          description: ''
  /purchasing/rest/purchase-orders/:
    get:
      operationId: listPurchaseOrders
      description: Get list of purchase orders with optional status filtering.
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PurchaseOrderList'
          description: ''
    post:
      operationId: purchasing_rest_purchase_orders_create
      description: Create new purchase order.
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PurchaseOrderCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PurchaseOrderCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PurchaseOrderCreateRequest'
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseOrderCreate'
          description: ''
  /purchasing/rest/purchase-orders/{id}/:
    get:
      operationId: retrievePurchaseOrder
      description: Get purchase order details including lines.
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseOrderDetail'
          description: ''
    patch:
      operationId: purchasing_rest_purchase_orders_partial_update
      description: |-
        Update purchase order.

        Concurrency is controlled in this endpoint (ETag/If-Match).
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedPurchaseOrderUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedPurchaseOrderUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedPurchaseOrderUpdateRequest'
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseOrderUpdate'
          description: ''
  /purchasing/rest/purchase-orders/{po_id}/allocations/:
    get:
      operationId: purchasing_rest_purchase_orders_allocations_retrieve
      description: Get existing allocations for a purchase order.
      parameters:
        - in: path
          name: po_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseOrderAllocationsResponse'
          description: ''
  /purchasing/rest/purchase-orders/{po_id}/allocations/{allocation_type}/{allocation_id}/details/:
    get:
      operationId: getAllocationDetails
      description: Get details about a specific allocation before deletion.
      parameters:
        - in: path
          name: allocation_id
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: allocation_type
          schema:
            type: string
          required: true
        - in: path
          name: po_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllocationDetailsResponse'
          description: ''
  /purchasing/rest/purchase-orders/{po_id}/email/:
    post:
      operationId: getPurchaseOrderEmail
      description: Generate email data for the specified purchase order.
      parameters:
        - in: path
          name: po_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PurchaseOrderEmailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PurchaseOrderEmailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PurchaseOrderEmailRequest'
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseOrderEmailResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseOrderEmailResponse'
          description: ''
  /purchasing/rest/purchase-orders/{po_id}/events/:
    get:
      operationId: listPurchaseOrderEvents
      description: List all events/comments for a purchase order.
      parameters:
        - in: path
          name: po_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Purchase Orders
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseOrderEventsResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchasingErrorResponse'
          description: ''
    post:
      operationId: createPurchaseOrderEvent
      description: Create a new event/comment on a purchase order.
      parameters:
        - in: path
          name: po_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - Purchase Orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PurchaseOrderEventCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PurchaseOrderEventCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PurchaseOrderEventCreateRequest'
        required: true
      security:
        - cookieAuth: []
        - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchaseOrderEventCreateResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchasingErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchasingErrorResponse'
          description: ''
  /purchasing/rest/purchase-orders/{po_id}/lines/{line_id}/allocations/delete/:
    post:
      operationId: deleteAllocation
      description: Delete a specific allocation (Stock item or CostLine) from a purchase
        order line.
      parameters:
        - in: path
          name: line_id
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: po_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AllocationDeleteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AllocationDeleteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AllocationDeleteRequest'
        required: true
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllocationDeleteResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllocationDeleteResponse'
          description: ''
  /purchasing/rest/purchase-orders/{po_id}/pdf/:
    get:
      operationId: getPurchaseOrderPDF
      description: Generate and download PDF for the specified purchase order.
      parameters:
        - in: path
          name: po_id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: string
                format: binary
          description: PDF file attachment
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchasingErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurchasingErrorResponse'
          description: ''
  /purchasing/rest/stock/:
    get:
      operationId: purchasing_rest_stock_list
      description: |-
        ViewSet for Stock CRUD operations.

        Endpoints:
        - GET    /purchasing/rest/stock/              - list all active stock
        - POST   /purchasing/rest/stock/              - create stock item
        - GET    /purchasing/rest/stock/<id>/         - retrieve stock item
        - PUT    /purchasing/rest/stock/<id>/         - full update
        - PATCH  /purchasing/rest/stock/<id>/         - partial update
        - DELETE /purchasing/rest/stock/<id>/         - soft delete (sets is_active=False)

        Custom Actions:
        - POST   /purchasing/rest/stock/<id>/consume/ - consume stock for a job
      tags:
        - purchasing
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StockItem'
          description: ''
    post:
      operationId: purchasing_rest_stock_create
      description: |-
        ViewSet for Stock CRUD operations.

        Endpoints:
        - GET    /purchasing/rest/stock/              - list all active stock
        - POST   /purchasing/rest/stock/              - create stock item
        - GET    /purchasing/rest/stock/<id>/         - retrieve stock item
        - PUT    /purchasing/rest/stock/<id>/         - full update
        - PATCH  /purchasing/rest/stock/<id>/         - partial update
        - DELETE /purchasing/rest/stock/<id>/         - soft delete (sets is_active=False)

        Custom Actions:
        - POST   /purchasing/rest/stock/<id>/consume/ - consume stock for a job
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StockItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StockItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StockItemRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StockItem'
          description: ''
  /purchasing/rest/stock/{id}/:
    get:
      operationId: purchasing_rest_stock_retrieve
      description: |-
        ViewSet for Stock CRUD operations.

        Endpoints:
        - GET    /purchasing/rest/stock/              - list all active stock
        - POST   /purchasing/rest/stock/              - create stock item
        - GET    /purchasing/rest/stock/<id>/         - retrieve stock item
        - PUT    /purchasing/rest/stock/<id>/         - full update
        - PATCH  /purchasing/rest/stock/<id>/         - partial update
        - DELETE /purchasing/rest/stock/<id>/         - soft delete (sets is_active=False)

        Custom Actions:
        - POST   /purchasing/rest/stock/<id>/consume/ - consume stock for a job
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this stock.
          required: true
      tags:
        - purchasing
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StockItem'
          description: ''
    put:
      operationId: purchasing_rest_stock_update
      description: |-
        ViewSet for Stock CRUD operations.

        Endpoints:
        - GET    /purchasing/rest/stock/              - list all active stock
        - POST   /purchasing/rest/stock/              - create stock item
        - GET    /purchasing/rest/stock/<id>/         - retrieve stock item
        - PUT    /purchasing/rest/stock/<id>/         - full update
        - PATCH  /purchasing/rest/stock/<id>/         - partial update
        - DELETE /purchasing/rest/stock/<id>/         - soft delete (sets is_active=False)

        Custom Actions:
        - POST   /purchasing/rest/stock/<id>/consume/ - consume stock for a job
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this stock.
          required: true
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StockItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StockItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StockItemRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StockItem'
          description: ''
    patch:
      operationId: purchasing_rest_stock_partial_update
      description: |-
        ViewSet for Stock CRUD operations.

        Endpoints:
        - GET    /purchasing/rest/stock/              - list all active stock
        - POST   /purchasing/rest/stock/              - create stock item
        - GET    /purchasing/rest/stock/<id>/         - retrieve stock item
        - PUT    /purchasing/rest/stock/<id>/         - full update
        - PATCH  /purchasing/rest/stock/<id>/         - partial update
        - DELETE /purchasing/rest/stock/<id>/         - soft delete (sets is_active=False)

        Custom Actions:
        - POST   /purchasing/rest/stock/<id>/consume/ - consume stock for a job
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this stock.
          required: true
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedStockItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedStockItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedStockItemRequest'
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StockItem'
          description: ''
    delete:
      operationId: purchasing_rest_stock_destroy
      description: |-
        ViewSet for Stock CRUD operations.

        Endpoints:
        - GET    /purchasing/rest/stock/              - list all active stock
        - POST   /purchasing/rest/stock/              - create stock item
        - GET    /purchasing/rest/stock/<id>/         - retrieve stock item
        - PUT    /purchasing/rest/stock/<id>/         - full update
        - PATCH  /purchasing/rest/stock/<id>/         - partial update
        - DELETE /purchasing/rest/stock/<id>/         - soft delete (sets is_active=False)

        Custom Actions:
        - POST   /purchasing/rest/stock/<id>/consume/ - consume stock for a job
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this stock.
          required: true
      tags:
        - purchasing
      security:
        - cookieAuth: []
      responses:
        '204':
          description: No response body
  /purchasing/rest/stock/{id}/consume/:
    post:
      operationId: consumeStock
      description: Consume stock for a job, reducing available quantity.
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          description: A UUID string identifying this stock.
          required: true
      tags:
        - purchasing
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StockConsumeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StockConsumeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StockConsumeRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StockConsumeResponse'
          description: ''
  /purchasing/rest/supplier-price-status/:
    get:
      operationId: getSupplierPriceStatus
      description: |-
        Return latest price upload status per supplier.

        Minimal-impact: read-only query over existing Client and SupplierPriceList
        models. No migrations required.
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SupplierPriceStatusResponse'
          description: ''
  /purchasing/rest/xero-items/:
    get:
      operationId: purchasing_rest_xero_items_retrieve
      description: Return list of items from Xero.
      tags:
        - purchasing
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroItemListResponse'
          description: ''
  /quoting/api/django-job-executions/:
    get:
      operationId: quoting_api_django_job_executions_list
      parameters:
        - name: search
          required: false
          in: query
          description: A search term.
          schema:
            type: string
      tags:
        - quoting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DjangoJobExecution'
          description: ''
  /quoting/api/django-job-executions/{id}/:
    get:
      operationId: quoting_api_django_job_executions_retrieve
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            description: Unique ID for this job execution.
          required: true
      tags:
        - quoting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DjangoJobExecution'
          description: ''
  /quoting/api/django-jobs/:
    get:
      operationId: quoting_api_django_jobs_list
      parameters:
        - name: search
          required: false
          in: query
          description: A search term.
          schema:
            type: string
      tags:
        - quoting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DjangoJob'
          description: ''
    post:
      operationId: quoting_api_django_jobs_create
      tags:
        - quoting
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DjangoJobRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DjangoJobRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DjangoJobRequest'
        required: true
      security:
        - cookieAuth: []
        - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DjangoJob'
          description: ''
  /quoting/api/django-jobs/{id}/:
    get:
      operationId: quoting_api_django_jobs_retrieve
      parameters:
        - in: path
          name: id
          schema:
            type: string
            description: Unique id for this job.
          required: true
      tags:
        - quoting
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DjangoJob'
          description: ''
    put:
      operationId: quoting_api_django_jobs_update
      parameters:
        - in: path
          name: id
          schema:
            type: string
            description: Unique id for this job.
          required: true
      tags:
        - quoting
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DjangoJobRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DjangoJobRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DjangoJobRequest'
        required: true
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DjangoJob'
          description: ''
    patch:
      operationId: quoting_api_django_jobs_partial_update
      parameters:
        - in: path
          name: id
          schema:
            type: string
            description: Unique id for this job.
          required: true
      tags:
        - quoting
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedDjangoJobRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedDjangoJobRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedDjangoJobRequest'
      security:
        - cookieAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DjangoJob'
          description: ''
    delete:
      operationId: quoting_api_django_jobs_destroy
      parameters:
        - in: path
          name: id
          schema:
            type: string
            description: Unique id for this job.
          required: true
      tags:
        - quoting
      security:
        - cookieAuth: []
        - {}
      responses:
        '204':
          description: No response body
  /rest/app-errors/:
    get:
      operationId: rest_app_errors_retrieve
      description: |-
        REST-style view that exposes AppError telemetry for admin monitoring.

        Supports pagination via ``limit``/``offset`` query params and optional filters:
        - ``app`` (icontains match)
        - ``severity`` (exact integer)
        - ``resolved`` (boolean)
        - ``job_id`` / ``user_id`` (UUID strings)
      tags:
        - rest
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppErrorListResponse'
          description: ''
  /timesheets/api/daily/{target_date}/:
    get:
      operationId: getDailyTimesheetSummaryByDate
      description: |-
        Get daily timesheet summary for all staff

        Args:
            target_date: Date in YYYY-MM-DD format (required)

        Returns:
            JSON response with daily timesheet data
      parameters:
        - in: path
          name: target_date
          schema:
            type: string
          required: true
      tags:
        - timesheets
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DailyTimesheetSummary'
          description: ''
  /timesheets/api/jobs/:
    get:
      operationId: timesheets_api_jobs_retrieve
      description: Get list of active jobs for timesheet entries using CostSet system.
      tags:
        - timesheets
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobsListResponse'
          description: ''
  /timesheets/api/payroll/pay-runs/:
    get:
      operationId: timesheets_api_payroll_pay_runs_retrieve
      description: Return all pay runs for the configured payroll calendar.
      summary: List pay runs
      tags:
        - timesheets
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayRunListResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /timesheets/api/payroll/pay-runs/create:
    post:
      operationId: timesheets_api_payroll_pay_runs_create_create
      description: Create a new pay run for the specified week.
      summary: Create pay run for a week
      tags:
        - timesheets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePayRunRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreatePayRunRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreatePayRunRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePayRunResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /timesheets/api/payroll/pay-runs/refresh:
    post:
      operationId: timesheets_api_payroll_pay_runs_refresh_create
      description: Synchronize local pay run cache with Xero.
      summary: Refresh cached pay runs from Xero
      tags:
        - timesheets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayRunSyncResponseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PayRunSyncResponseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PayRunSyncResponseRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayRunSyncResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /timesheets/api/payroll/post-staff-week/:
    post:
      operationId: timesheets_api_payroll_post_staff_week_create
      description: |-
        Start posting timesheets. Returns a task_id to use with the stream endpoint.

        Use GET /api/payroll/post-staff-week/stream/{task_id}/ to receive SSE progress.
      summary: Start posting weekly timesheets to Xero Payroll
      tags:
        - timesheets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostWeekToXeroRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PostWeekToXeroRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PostWeekToXeroRequest'
        required: true
      security:
        - cookieAuth: []
      responses:
        '200':
          description: No response body
  /timesheets/api/staff/:
    get:
      operationId: timesheets_api_staff_retrieve
      description: Get filtered list of staff members for a specific date.
      summary: Returns staff members excluding system and users for a specific date
      parameters:
        - in: query
          name: date
          schema:
            type: string
          description: Date parameter in format YYYY-MM-DD
      tags:
        - timesheets
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StaffListResponse'
          description: ''
  /timesheets/api/staff/{staff_id}/daily/{target_date}/:
    get:
      operationId: getStaffDailyTimesheetDetailByDate
      description: |-
        Get detailed timesheet data for a specific staff member

        Args:
            staff_id: Staff member ID
            target_date: Date in YYYY-MM-DD format (required)

        Returns:
            JSON response with staff timesheet detail
      parameters:
        - in: path
          name: staff_id
          schema:
            type: string
          required: true
        - in: path
          name: target_date
          schema:
            type: string
          required: true
      tags:
        - timesheets
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DailyTimesheetSummary'
          description: ''
  /timesheets/api/weekly/:
    get:
      operationId: timesheets_api_weekly_retrieve
      description: Return weekly timesheet data with payroll fields (5/7 days).
      summary: Weekly overview with payroll data (MonSun/MonFri)
      parameters:
        - in: query
          name: start_date
          schema:
            type: string
            format: date
          description: Monday of target week in YYYY-MM-DD format. Defaults to current
            week.
      tags:
        - timesheets
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WeeklyTimesheetData'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErrorResponse'
          description: ''
  /xero-errors/:
    get:
      operationId: xero_errors_list
      description: |-
        API view for listing Xero synchronization errors.

        Returns a paginated list of all XeroError records ordered by timestamp
        (most recent first). Useful for monitoring and debugging Xero integration
        issues.

        Endpoint: /api/xero/errors/
      parameters:
        - name: page
          required: false
          in: query
          description: A page number within the paginated result set.
          schema:
            type: integer
      tags:
        - xero-errors
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedXeroErrorList'
          description: ''
  /xero-errors/{id}/:
    get:
      operationId: xero_errors_retrieve
      description: |-
        API view for retrieving a single Xero synchronization error.

        Returns detailed information about a specific XeroError record
        including error message, context, and timestamp. Used for investigating
        specific Xero integration failures.

        Endpoint: /api/xero/errors/<id>/
      parameters:
        - in: path
          name: id
          schema:
            type: string
            format: uuid
          required: true
      tags:
        - xero-errors
      security:
        - cookieAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XeroError'
          description: ''
components:
  schemas:
    AIProvider:
      type: object
      description: |-
        Serializer for reading AIProvider instances.
        This serializer is read-only and excludes the `api_key` for security.
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          description: Friendly name for this provider
          maxLength: 100
        provider_type:
          allOf:
            - $ref: '#/components/schemas/ProviderTypeEnum'
          description: |-
            Type of AI provider

            * `Claude` - Anthropic
            * `Gemini` - Google
            * `Mistral` - Mistral
        model_name:
          type: string
          description: Specific model name (e.g., gemini-2.5-flash-lite-preview-06-17)
          maxLength: 100
        default:
          type: boolean
          description: Use this provider as the default
      required:
        - id
        - name
        - provider_type
    AIProviderCreateUpdate:
      type: object
      description: |-
        Serializer for creating and updating AIProvider instances.
        This serializer handles the `api_key` securely by making it write-only.
      properties:
        name:
          type: string
          description: Friendly name for this provider
          maxLength: 100
        provider_type:
          allOf:
            - $ref: '#/components/schemas/ProviderTypeEnum'
          description: |-
            Type of AI provider

            * `Claude` - Anthropic
            * `Gemini` - Google
            * `Mistral` - Mistral
        model_name:
          type: string
          description: Specific model name (e.g., gemini-2.5-flash-lite-preview-06-17)
          maxLength: 100
        default:
          type: boolean
          description: Use this provider as the default
      required:
        - name
        - provider_type
    AIProviderCreateUpdateRequest:
      type: object
      description: |-
        Serializer for creating and updating AIProvider instances.
        This serializer handles the `api_key` securely by making it write-only.
      properties:
        name:
          type: string
          minLength: 1
          description: Friendly name for this provider
          maxLength: 100
        provider_type:
          allOf:
            - $ref: '#/components/schemas/ProviderTypeEnum'
          description: |-
            Type of AI provider

            * `Claude` - Anthropic
            * `Gemini` - Google
            * `Mistral` - Mistral
        model_name:
          type: string
          description: Specific model name (e.g., gemini-2.5-flash-lite-preview-06-17)
          maxLength: 100
        default:
          type: boolean
          description: Use this provider as the default
        api_key:
          type: string
          writeOnly: true
          description: API Key for the provider. Leave blank to keep unchanged on
            update.
      required:
        - name
        - provider_type
    AIProviderRequest:
      type: object
      description: |-
        Serializer for reading AIProvider instances.
        This serializer is read-only and excludes the `api_key` for security.
      properties:
        name:
          type: string
          minLength: 1
          description: Friendly name for this provider
          maxLength: 100
        provider_type:
          allOf:
            - $ref: '#/components/schemas/ProviderTypeEnum'
          description: |-
            Type of AI provider

            * `Claude` - Anthropic
            * `Gemini` - Google
            * `Mistral` - Mistral
        model_name:
          type: string
          description: Specific model name (e.g., gemini-2.5-flash-lite-preview-06-17)
          maxLength: 100
        default:
          type: boolean
          description: Use this provider as the default
      required:
        - name
        - provider_type
    AWSInstanceStatusResponse:
      type: object
      description: Serializer for AWS instance status responses.
      properties:
        success:
          type: boolean
        status:
          type: string
        error:
          type: string
        details:
          type: string
      required:
        - success
    AdvancedSearchResponse:
      type: object
      description: Serializer for advanced_search response.
      properties:
        success:
          type: boolean
          default: true
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/KanbanJob'
        total:
          type: integer
        error:
          type: string
    AllJobsResponse:
      type: object
      description: Serializer for AllJobsAPIView response.
      properties:
        success:
          type: boolean
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/JobForPurchasing'
        stock_holding_job_id:
          type: string
      required:
        - jobs
        - stock_holding_job_id
        - success
    AllocationDeleteRequest:
      type: object
      description: Serializer for allocation deletion request
      properties:
        allocation_type:
          allOf:
            - $ref: '#/components/schemas/AllocationTypeEnum'
          description: |-
            Type of allocation to delete

            * `job` - Job
            * `stock` - Stock
        allocation_id:
          type: string
          format: uuid
          description: ID of the Stock item or CostLine to delete
      required:
        - allocation_id
        - allocation_type
    AllocationDeleteResponse:
      type: object
      description: Serializer for allocation deletion response
      properties:
        success:
          type: boolean
        message:
          type: string
        deleted_quantity:
          type: number
          format: double
        description:
          type: string
        job_name:
          type: string
        updated_received_quantity:
          type: number
          format: double
      required:
        - message
        - success
    AllocationDetailsResponse:
      type: object
      description: Serializer for allocation details response
      properties:
        type:
          $ref: '#/components/schemas/TypeC98Enum'
        id:
          type: string
          format: uuid
        description:
          type: string
        quantity:
          type: number
          format: double
        job_name:
          type: string
        can_delete:
          type: boolean
        consumed_by_jobs:
          type: integer
        location:
          type: string
        unit_cost:
          type: number
          format: double
        unit_revenue:
          type: number
          format: double
      required:
        - can_delete
        - description
        - id
        - job_name
        - quantity
        - type
    AllocationItem:
      type: object
      description: Serializer for individual allocation items (job or stock).
      properties:
        type:
          $ref: '#/components/schemas/TypeC98Enum'
        job_id:
          type: string
          format: uuid
        job_name:
          type: string
        quantity:
          type: number
          format: double
        retail_rate:
          type: number
          format: double
          default: 0.0
        allocation_date:
          type: string
          format: date-time
          nullable: true
        description:
          type: string
        stock_location:
          type: string
          nullable: true
        metal_type:
          type: string
          nullable: true
        alloy:
          type: string
          nullable: true
        specifics:
          type: string
          nullable: true
        allocation_id:
          type: string
          format: uuid
          nullable: true
      required:
        - allocation_date
        - description
        - job_id
        - job_name
        - quantity
        - type
    AllocationTypeEnum:
      enum:
        - job
        - stock
      type: string
      description: |-
        * `job` - Job
        * `stock` - Stock
    AppError:
      type: object
      description: Basic serializer for AppError instances.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        timestamp:
          type: string
          format: date-time
          readOnly: true
        message:
          type: string
        data:
          nullable: true
        app:
          type: string
          nullable: true
          maxLength: 50
        file:
          type: string
          nullable: true
          maxLength: 200
        function:
          type: string
          nullable: true
          maxLength: 100
        severity:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        job_id:
          type: string
          format: uuid
          nullable: true
        user_id:
          type: string
          format: uuid
          nullable: true
        resolved:
          type: boolean
        resolved_timestamp:
          type: string
          format: date-time
          nullable: true
        resolved_by:
          type: string
          format: uuid
          nullable: true
      required:
        - id
        - message
        - timestamp
    AppErrorListResponse:
      type: object
      description: Serializer for paginated AppError list response.
      properties:
        count:
          type: integer
        next:
          type: string
          nullable: true
        previous:
          type: string
          nullable: true
        results:
          type: array
          items:
            $ref: '#/components/schemas/AppError'
      required:
        - count
        - results
    AppErrorRequest:
      type: object
      description: Basic serializer for AppError instances.
      properties:
        message:
          type: string
          minLength: 1
        data:
          nullable: true
        app:
          type: string
          nullable: true
          maxLength: 50
        file:
          type: string
          nullable: true
          maxLength: 200
        function:
          type: string
          nullable: true
          maxLength: 100
        severity:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        job_id:
          type: string
          format: uuid
          nullable: true
        user_id:
          type: string
          format: uuid
          nullable: true
        resolved:
          type: boolean
        resolved_timestamp:
          type: string
          format: date-time
          nullable: true
        resolved_by:
          type: string
          format: uuid
          nullable: true
      required:
        - message
    ApplyQuoteResponse:
      type: object
      description: Serializer for apply quote response.
      properties:
        success:
          type: boolean
        cost_set:
          allOf:
            - $ref: '#/components/schemas/CostSet'
          nullable: true
        draft_lines:
          type: array
          items:
            $ref: '#/components/schemas/DraftLine'
        changes:
          $ref: '#/components/schemas/QuoteChanges'
        error:
          type: string
      required:
        - success
    ApplyQuoteResponseRequest:
      type: object
      description: Serializer for apply quote response.
      properties:
        success:
          type: boolean
        draft_lines:
          type: array
          items:
            $ref: '#/components/schemas/DraftLineRequest'
        changes:
          $ref: '#/components/schemas/QuoteChangesRequest'
        error:
          type: string
          minLength: 1
      required:
        - success
    ArchiveJobs:
      type: object
      description: Serialiser for job archiving request
      properties:
        ids:
          type: array
          items:
            type: string
          description: List of job IDs to archive
      required:
        - ids
    ArchiveJobsRequest:
      type: object
      description: Serialiser for job archiving request
      properties:
        ids:
          type: array
          items:
            type: string
            minLength: 1
          description: List of job IDs to archive
      required:
        - ids
    ArchivedJobIssue:
      type: object
      description: Details of a non-compliant archived job.
      properties:
        job_id:
          type: string
          description: Job's unique identifier
        job_number:
          type: string
          description: Job number
        client_name:
          type: string
          description: Client name or 'Shop Job'
        archived_date:
          type: string
          format: date
          description: Date when job was archived
        current_status:
          type: string
          description: Job's current status
        issue:
          type: string
          description: "Compliance issue: 'Not invoiced', 'Not paid', 'Not cancelled',
            'Has open tasks'"
        invoice_status:
          type: string
          nullable: true
          description: Invoice status if relevant
        outstanding_amount:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Outstanding amount if relevant
        job_value:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Total job value (invoiced amount or quote/actual revenue)
      required:
        - archived_date
        - client_name
        - current_status
        - issue
        - job_id
        - job_number
        - job_value
    ArchivedJobsComplianceResponse:
      type: object
      description: Response for archived jobs compliance check.
      properties:
        total_archived_jobs:
          type: integer
          description: Total number of archived jobs
        non_compliant_jobs:
          type: array
          items:
            $ref: '#/components/schemas/ArchivedJobIssue'
          description: List of non-compliant jobs with details
        summary:
          allOf:
            - $ref: '#/components/schemas/ComplianceSummary'
          description: Summary of compliance issues
        checked_at:
          type: string
          format: date-time
          description: When the check was performed
      required:
        - checked_at
        - non_compliant_jobs
        - summary
        - total_archived_jobs
    AssignJobRequest:
      type: object
      description: Serialiser for job assignment request (job_id comes from URL)
      properties:
        staff_id:
          type: string
          format: uuid
          description: Staff ID to assign to the job
      required:
        - staff_id
    AssignJobResponse:
      type: object
      description: Serialiser for job assignment response
      properties:
        success:
          type: boolean
        message:
          type: string
      required:
        - message
        - success
    BearerTokenRequest:
      type: object
      description: Serializer for bearer token generation request.
      properties:
        username:
          type: string
          minLength: 1
          description: Username or email address
        password:
          type: string
          writeOnly: true
          minLength: 1
          description: User password
      required:
        - password
        - username
    BearerTokenResponse:
      type: object
      description: Serializer for bearer token generation response.
      properties:
        token:
          type: string
          description: Bearer token for API authentication
      required:
        - token
    BlankEnum:
      enum:
        - ''
    BrokenFKReference:
      type: object
      description: Details of a broken foreign key reference.
      properties:
        model:
          type: string
          description: Model name
        record_id:
          type: string
          description: Record's UUID
        field:
          type: string
          description: FK field name
        target_model:
          type: string
          description: Target model that doesn't exist
        target_id:
          type: string
          description: Target UUID that doesn't exist
      required:
        - field
        - model
        - record_id
        - target_id
        - target_model
    BrokenJSONReference:
      type: object
      description: Details of a broken JSON field reference.
      properties:
        model:
          type: string
          description: Model name
        record_id:
          type: string
          description: Record's UUID
        field:
          type: string
          description: JSON field path (e.g., meta.staff_id)
        staff_id:
          type: string
          nullable: true
          description: Invalid staff UUID
        stock_id:
          type: string
          nullable: true
          description: Invalid stock UUID
        purchase_order_line_id:
          type: string
          nullable: true
          description: Invalid PO line UUID
        issue:
          type: string
          nullable: true
          description: Issue description
      required:
        - field
        - model
        - record_id
    BusinessRuleViolation:
      type: object
      description: Details of a business rule violation.
      properties:
        model:
          type: string
          description: Model name
        record_id:
          type: string
          description: Record's UUID
        field:
          type: string
          description: Field name
        rule:
          type: string
          description: Business rule that was violated
        expected:
          type: string
          nullable: true
          description: Expected value
        actual:
          type: string
          nullable: true
          description: Actual value
        path:
          type: array
          items:
            type: string
          nullable: true
          description: Path for circular references
        expected_path:
          type: string
          nullable: true
          description: Expected file path
      required:
        - field
        - model
        - record_id
        - rule
    ClientContact:
      type: object
      description: Serializer for ClientContact model.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        client:
          type: string
          format: uuid
          description: The client this contact belongs to
        name:
          type: string
          description: Full name of the contact person
          maxLength: 255
        email:
          type: string
          format: email
          nullable: true
          description: Email address of the contact
          maxLength: 254
        phone:
          type: string
          nullable: true
          description: Phone number of the contact
          maxLength: 150
        position:
          type: string
          nullable: true
          description: Job title if it's helpful - else leave blank
          maxLength: 255
        is_primary:
          type: boolean
          description: Indicates if this is the primary contact for the client
        notes:
          type: string
          nullable: true
          description: Additional notes about this contact
        is_active:
          type: boolean
          readOnly: true
          description: Soft delete flag - inactive contacts are hidden from normal
            queries
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
        - client
        - created_at
        - id
        - is_active
        - name
        - updated_at
    ClientContactRequest:
      type: object
      description: Serializer for ClientContact model.
      properties:
        client:
          type: string
          format: uuid
          description: The client this contact belongs to
        name:
          type: string
          minLength: 1
          description: Full name of the contact person
          maxLength: 255
        email:
          type: string
          format: email
          nullable: true
          description: Email address of the contact
          maxLength: 254
        phone:
          type: string
          nullable: true
          description: Phone number of the contact
          maxLength: 150
        position:
          type: string
          nullable: true
          description: Job title if it's helpful - else leave blank
          maxLength: 255
        is_primary:
          type: boolean
          description: Indicates if this is the primary contact for the client
        notes:
          type: string
          nullable: true
          description: Additional notes about this contact
      required:
        - client
        - name
    ClientCreateRequest:
      type: object
      description: Serializer for client creation request
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        email:
          type: string
          format: email
          nullable: true
        phone:
          type: string
          nullable: true
          maxLength: 50
        address:
          type: string
          nullable: true
        is_account_customer:
          type: boolean
          default: true
      required:
        - name
    ClientCreateResponse:
      type: object
      description: Serializer for client creation response
      properties:
        success:
          type: boolean
        client:
          $ref: '#/components/schemas/ClientSearchResult'
        message:
          type: string
      required:
        - client
        - message
        - success
    ClientDetailResponse:
      type: object
      description: Serializer for client detail response
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string
        phone:
          type: string
        address:
          type: string
        is_account_customer:
          type: boolean
        is_supplier:
          type: boolean
        xero_contact_id:
          type: string
        xero_tenant_id:
          type: string
        primary_contact_name:
          type: string
        primary_contact_email:
          type: string
        additional_contact_persons:
          type: array
          items: {}
        all_phones:
          type: array
          items: {}
        xero_last_modified:
          type: string
          format: date-time
          nullable: true
        xero_last_synced:
          type: string
          format: date-time
          nullable: true
        xero_archived:
          type: boolean
        xero_merged_into_id:
          type: string
        merged_into:
          type: string
          nullable: true
        django_created_at:
          type: string
          format: date-time
        django_updated_at:
          type: string
          format: date-time
        last_invoice_date:
          type: string
          format: date-time
          nullable: true
        total_spend:
          type: string
      required:
        - address
        - django_created_at
        - django_updated_at
        - email
        - id
        - is_account_customer
        - is_supplier
        - last_invoice_date
        - merged_into
        - name
        - phone
        - primary_contact_email
        - primary_contact_name
        - total_spend
        - xero_archived
        - xero_contact_id
        - xero_last_modified
        - xero_last_synced
        - xero_merged_into_id
        - xero_tenant_id
    ClientDuplicateErrorResponse:
      type: object
      description: Serializer for client duplicate error response
      properties:
        success:
          type: boolean
          default: false
        error:
          type: string
        existing_client:
          type: object
          additionalProperties: {}
      required:
        - error
        - existing_client
    ClientErrorResponse:
      type: object
      description: Serializer for client error responses
      properties:
        success:
          type: boolean
          default: false
        error:
          type: string
        details:
          type: string
      required:
        - error
    ClientJobHeader:
      type: object
      description: Serializer for job header in client jobs list.
      properties:
        job_id:
          type: string
          format: uuid
        job_number:
          type: integer
        name:
          type: string
        client:
          type: object
          additionalProperties: {}
          nullable: true
        status:
          type: string
        pricing_methodology:
          type: string
          nullable: true
        speed_quality_tradeoff:
          type: string
        fully_invoiced:
          type: boolean
        has_quote_in_xero:
          type: boolean
        is_fixed_price:
          type: boolean
        quote_acceptance_date:
          type: string
          format: date-time
          nullable: true
        paid:
          type: boolean
        rejected_flag:
          type: boolean
      required:
        - client
        - fully_invoiced
        - has_quote_in_xero
        - is_fixed_price
        - job_id
        - job_number
        - name
        - paid
        - pricing_methodology
        - quote_acceptance_date
        - rejected_flag
        - speed_quality_tradeoff
        - status
    ClientJobsResponse:
      type: object
      description: Serializer for client jobs list response
      properties:
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientJobHeader'
      required:
        - results
    ClientNameOnly:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          readOnly: true
      required:
        - id
        - name
    ClientSearchResponse:
      type: object
      description: Serializer for paginated client search response
      properties:
        results:
          type: array
          items:
            $ref: '#/components/schemas/ClientSearchResult'
        count:
          type: integer
        page:
          type: integer
        page_size:
          type: integer
        total_pages:
          type: integer
      required:
        - count
        - page
        - page_size
        - results
        - total_pages
    ClientSearchResult:
      type: object
      description: Serializer for individual client search result
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string
        phone:
          type: string
        address:
          type: string
        is_account_customer:
          type: boolean
        is_supplier:
          type: boolean
        xero_contact_id:
          type: string
        last_invoice_date:
          type: string
          format: date-time
          nullable: true
        total_spend:
          type: string
      required:
        - address
        - email
        - id
        - is_account_customer
        - is_supplier
        - last_invoice_date
        - name
        - phone
        - total_spend
        - xero_contact_id
    ClientUpdateRequest:
      type: object
      description: Serializer for client update request
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        email:
          type: string
          format: email
        phone:
          type: string
          maxLength: 50
        address:
          type: string
        is_account_customer:
          type: boolean
    ClientUpdateResponse:
      type: object
      description: Serializer for client update response
      properties:
        success:
          type: boolean
        client:
          $ref: '#/components/schemas/ClientDetailResponse'
        message:
          type: string
      required:
        - client
        - message
        - success
    CompanyDefaults:
      type: object
      properties:
        company_name:
          type: string
          readOnly: true
        company_acronym:
          type: string
          nullable: true
          description: Short acronym for the company (e.g., 'MSM' for Morris Sheetmetal)
          maxLength: 10
        is_primary:
          type: boolean
        time_markup:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        materials_markup:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        charge_out_rate:
          type: number
          format: double
          maximum: 10000
          minimum: -10000
          exclusiveMaximum: true
          exclusiveMinimum: true
        wage_rate:
          type: number
          format: double
          maximum: 10000
          minimum: -10000
          exclusiveMaximum: true
          exclusiveMinimum: true
        starting_job_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Helper field to set the starting job number based on the latest
            paper job
        starting_po_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Helper field to set the starting purchase order number
        po_prefix:
          type: string
          description: Prefix for purchase order numbers (e.g., PO-, JO-)
          maxLength: 10
        master_quote_template_url:
          type: string
          format: uri
          nullable: true
          description: URL to the master Google Sheets quote template
          maxLength: 200
        master_quote_template_id:
          type: string
          nullable: true
          description: Google Sheets ID for the quote template
          maxLength: 100
        gdrive_quotes_folder_url:
          type: string
          format: uri
          nullable: true
          description: URL to the Google Drive folder for storing quotes
          maxLength: 200
        gdrive_quotes_folder_id:
          type: string
          nullable: true
          description: Google Drive folder ID for storing quotes
          maxLength: 100
        xero_tenant_id:
          type: string
          nullable: true
          description: The Xero tenant ID to use for this company
          maxLength: 100
        xero_shortcode:
          type: string
          nullable: true
          description: Xero organisation shortcode for deep linking (e.g., '!8-5Xl')
          maxLength: 20
        xero_payroll_calendar_name:
          type: string
          description: Name of Xero Payroll calendar to use (e.g., 'Weekly 2025')
          maxLength: 100
        xero_payroll_calendar_id:
          type: string
          format: uuid
          nullable: true
          description: Cached Xero Payroll calendar ID (set by xero --setup command)
        mon_start:
          type: string
          format: time
        mon_end:
          type: string
          format: time
        tue_start:
          type: string
          format: time
        tue_end:
          type: string
          format: time
        wed_start:
          type: string
          format: time
        wed_end:
          type: string
          format: time
        thu_start:
          type: string
          format: time
        thu_end:
          type: string
          format: time
        fri_start:
          type: string
          format: time
        fri_end:
          type: string
          format: time
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        last_xero_sync:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          description: The last time Xero data was synchronized
        last_xero_deep_sync:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          description: The last time a deep Xero sync was performed (looking back
            90 days)
        address_line1:
          type: string
          nullable: true
          description: Street address line 1
          maxLength: 255
        address_line2:
          type: string
          nullable: true
          description: Street address line 2 (optional)
          maxLength: 255
        suburb:
          type: string
          nullable: true
          description: Suburb (for NZ addresses)
          maxLength: 100
        city:
          type: string
          nullable: true
          description: City
          maxLength: 100
        post_code:
          type: string
          nullable: true
          description: Postal/ZIP code
          maxLength: 20
        country:
          type: string
          description: Country name
          maxLength: 100
        company_email:
          type: string
          format: email
          nullable: true
          description: Company contact email address
          maxLength: 254
        company_url:
          type: string
          format: uri
          nullable: true
          description: Company website URL
          maxLength: 200
        shop_client_name:
          type: string
          nullable: true
          description: Name of the internal shop client for tracking shop work (e.g.,
            'MSM (Shop)')
          maxLength: 255
        test_client_name:
          type: string
          nullable: true
          description: Name of the test client used for testing (e.g., 'ABC Carpet
            Cleaning TEST IGNORE'). This client's name is preserved during data backports.
          maxLength: 255
        billable_threshold_green:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Green Threshold of Billable Hours
          description: Daily billable hours above this threshold are marked in green
        billable_threshold_amber:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Amber Threshold of Billable Hours
          description: Daily billable hours between this threshold and the green threshold
            are marked in amber
        daily_gp_target:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Daily Goal of Gross Profit
          description: Daily gross profit goal in dolars
        shop_hours_target_percentage:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Hours percentage goal in Shop Jobs
          description: Target percentage of hours worked in shop jobs
      required:
        - company_name
        - created_at
        - last_xero_deep_sync
        - last_xero_sync
        - updated_at
    CompanyDefaultsJobDetail:
      type: object
      description: Serializer for company defaults in job detail response
      properties:
        materials_markup:
          type: number
          format: double
          description: Default markup percentage for materials
        time_markup:
          type: number
          format: double
          description: Default markup percentage for time
        charge_out_rate:
          type: number
          format: double
          description: Default charge-out rate for staff
        wage_rate:
          type: number
          format: double
          description: Default wage rate for staff
      required:
        - charge_out_rate
        - materials_markup
        - time_markup
        - wage_rate
    CompanyDefaultsRequest:
      type: object
      properties:
        company_acronym:
          type: string
          nullable: true
          description: Short acronym for the company (e.g., 'MSM' for Morris Sheetmetal)
          maxLength: 10
        is_primary:
          type: boolean
        time_markup:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        materials_markup:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        charge_out_rate:
          type: number
          format: double
          maximum: 10000
          minimum: -10000
          exclusiveMaximum: true
          exclusiveMinimum: true
        wage_rate:
          type: number
          format: double
          maximum: 10000
          minimum: -10000
          exclusiveMaximum: true
          exclusiveMinimum: true
        starting_job_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Helper field to set the starting job number based on the latest
            paper job
        starting_po_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Helper field to set the starting purchase order number
        po_prefix:
          type: string
          minLength: 1
          description: Prefix for purchase order numbers (e.g., PO-, JO-)
          maxLength: 10
        master_quote_template_url:
          type: string
          format: uri
          nullable: true
          description: URL to the master Google Sheets quote template
          maxLength: 200
        master_quote_template_id:
          type: string
          nullable: true
          description: Google Sheets ID for the quote template
          maxLength: 100
        gdrive_quotes_folder_url:
          type: string
          format: uri
          nullable: true
          description: URL to the Google Drive folder for storing quotes
          maxLength: 200
        gdrive_quotes_folder_id:
          type: string
          nullable: true
          description: Google Drive folder ID for storing quotes
          maxLength: 100
        xero_tenant_id:
          type: string
          nullable: true
          description: The Xero tenant ID to use for this company
          maxLength: 100
        xero_shortcode:
          type: string
          nullable: true
          description: Xero organisation shortcode for deep linking (e.g., '!8-5Xl')
          maxLength: 20
        xero_payroll_calendar_name:
          type: string
          minLength: 1
          description: Name of Xero Payroll calendar to use (e.g., 'Weekly 2025')
          maxLength: 100
        xero_payroll_calendar_id:
          type: string
          format: uuid
          nullable: true
          description: Cached Xero Payroll calendar ID (set by xero --setup command)
        mon_start:
          type: string
          format: time
        mon_end:
          type: string
          format: time
        tue_start:
          type: string
          format: time
        tue_end:
          type: string
          format: time
        wed_start:
          type: string
          format: time
        wed_end:
          type: string
          format: time
        thu_start:
          type: string
          format: time
        thu_end:
          type: string
          format: time
        fri_start:
          type: string
          format: time
        fri_end:
          type: string
          format: time
        address_line1:
          type: string
          nullable: true
          description: Street address line 1
          maxLength: 255
        address_line2:
          type: string
          nullable: true
          description: Street address line 2 (optional)
          maxLength: 255
        suburb:
          type: string
          nullable: true
          description: Suburb (for NZ addresses)
          maxLength: 100
        city:
          type: string
          nullable: true
          description: City
          maxLength: 100
        post_code:
          type: string
          nullable: true
          description: Postal/ZIP code
          maxLength: 20
        country:
          type: string
          minLength: 1
          description: Country name
          maxLength: 100
        company_email:
          type: string
          format: email
          nullable: true
          description: Company contact email address
          maxLength: 254
        company_url:
          type: string
          format: uri
          nullable: true
          description: Company website URL
          maxLength: 200
        shop_client_name:
          type: string
          nullable: true
          description: Name of the internal shop client for tracking shop work (e.g.,
            'MSM (Shop)')
          maxLength: 255
        test_client_name:
          type: string
          nullable: true
          description: Name of the test client used for testing (e.g., 'ABC Carpet
            Cleaning TEST IGNORE'). This client's name is preserved during data backports.
          maxLength: 255
        billable_threshold_green:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Green Threshold of Billable Hours
          description: Daily billable hours above this threshold are marked in green
        billable_threshold_amber:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Amber Threshold of Billable Hours
          description: Daily billable hours between this threshold and the green threshold
            are marked in amber
        daily_gp_target:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Daily Goal of Gross Profit
          description: Daily gross profit goal in dolars
        shop_hours_target_percentage:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Hours percentage goal in Shop Jobs
          description: Target percentage of hours worked in shop jobs
    CompanyDefaultsSchema:
      type: object
      description: Serializer for the complete schema response.
      properties:
        sections:
          type: array
          items:
            $ref: '#/components/schemas/SettingsSection'
      required:
        - sections
    CompleteJob:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        job_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        name:
          type: string
          maxLength: 100
        client_name:
          type: string
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        job_status:
          type: string
      required:
        - client_name
        - id
        - job_number
        - job_status
        - name
        - updated_at
    ComplianceSummary:
      type: object
      description: Summary of compliance issues.
      properties:
        not_invoiced:
          type: integer
          description: Number of jobs that are not invoiced
        not_paid:
          type: integer
          description: Number of jobs that are not paid
        not_cancelled:
          type: integer
          description: Number of jobs that should be cancelled but are not
        has_open_tasks:
          type: integer
          description: Number of jobs with open tasks
      required:
        - has_open_tasks
        - not_cancelled
        - not_invoiced
        - not_paid
    CostLine:
      type: object
      description: Serializer for CostLine model - read-only with basic depth
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        kind:
          $ref: '#/components/schemas/Kind332Enum'
        desc:
          type: string
          description: Description of this cost line
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 10000000
          minimum: -10000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        ext_refs:
          description: External references (e.g., time entry IDs, material IDs)
        meta:
          description: Additional metadata - structure varies by kind (see class docstring)
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        accounting_date:
          type: string
          format: date
          description: The date this cost should be attributed to for accounting purposes
        xero_time_id:
          type: string
          nullable: true
          maxLength: 255
        xero_expense_id:
          type: string
          nullable: true
          maxLength: 255
        xero_last_modified:
          type: string
          format: date-time
          nullable: true
        xero_last_synced:
          type: string
          format: date-time
          nullable: true
        approved:
          type: boolean
          description: Indicates whether this line is approved or not by an office
            staff (when the line is created by a workshop worker)
        xero_pay_item:
          type: string
          format: uuid
          nullable: true
          description: The Xero pay item for this time entry (leave type, earnings
            rate, etc.)
        total_cost:
          type: number
          format: double
          description: Get total cost (quantity * unit_cost)
          readOnly: true
        total_rev:
          type: number
          format: double
          description: Get total revenue (quantity * unit_rev)
          readOnly: true
      required:
        - accounting_date
        - created_at
        - id
        - kind
        - total_cost
        - total_rev
        - updated_at
    CostLineApprovalResponse:
      type: object
      description: Serializer for non-material cost line approval responses.
      properties:
        success:
          type: boolean
        message:
          type: string
        line:
          $ref: '#/components/schemas/CostLine'
      required:
        - line
        - success
    CostLineApprovalResult:
      oneOf:
        - $ref: '#/components/schemas/StockConsumeResponse'
        - $ref: '#/components/schemas/CostLineApprovalResponse'
    CostLineCreateUpdate:
      type: object
      description: Serializer for CostLine creation and updates - full write capabilities
      properties:
        kind:
          $ref: '#/components/schemas/Kind332Enum'
        desc:
          type: string
          description: Description of this cost line
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 10000000
          minimum: -10000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        accounting_date:
          type: string
          format: date
          description: The date this cost should be attributed to for accounting purposes
        ext_refs:
          type: object
          additionalProperties: {}
        meta:
          type: object
          additionalProperties: {}
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        xero_pay_item:
          type: string
          format: uuid
          nullable: true
          description: The Xero pay item for this time entry (leave type, earnings
            rate, etc.)
      required:
        - accounting_date
        - created_at
        - kind
        - updated_at
    CostLineCreateUpdateRequest:
      type: object
      description: Serializer for CostLine creation and updates - full write capabilities
      properties:
        kind:
          $ref: '#/components/schemas/Kind332Enum'
        desc:
          type: string
          description: Description of this cost line
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 10000000
          minimum: -10000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        accounting_date:
          type: string
          format: date
          description: The date this cost should be attributed to for accounting purposes
        ext_refs:
          type: object
          additionalProperties: {}
        meta:
          type: object
          additionalProperties: {}
        xero_pay_item:
          type: string
          format: uuid
          nullable: true
          description: The Xero pay item for this time entry (leave type, earnings
            rate, etc.)
      required:
        - accounting_date
        - kind
    CostLineErrorResponse:
      type: object
      description: Serializer for cost line error responses.
      properties:
        error:
          type: string
      required:
        - error
    CostLineRequest:
      type: object
      description: Serializer for CostLine model - read-only with basic depth
      properties:
        kind:
          $ref: '#/components/schemas/Kind332Enum'
        desc:
          type: string
          description: Description of this cost line
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 10000000
          minimum: -10000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        ext_refs:
          description: External references (e.g., time entry IDs, material IDs)
        meta:
          description: Additional metadata - structure varies by kind (see class docstring)
        accounting_date:
          type: string
          format: date
          description: The date this cost should be attributed to for accounting purposes
        xero_time_id:
          type: string
          nullable: true
          maxLength: 255
        xero_expense_id:
          type: string
          nullable: true
          maxLength: 255
        xero_last_modified:
          type: string
          format: date-time
          nullable: true
        xero_last_synced:
          type: string
          format: date-time
          nullable: true
        approved:
          type: boolean
          description: Indicates whether this line is approved or not by an office
            staff (when the line is created by a workshop worker)
        xero_pay_item:
          type: string
          format: uuid
          nullable: true
          description: The Xero pay item for this time entry (leave type, earnings
            rate, etc.)
      required:
        - accounting_date
        - kind
    CostSet:
      type: object
      description: Serializer for CostSet model - includes nested cost lines
      properties:
        id:
          type: string
          readOnly: true
        job:
          type: string
          format: uuid
          readOnly: true
        kind:
          allOf:
            - $ref: '#/components/schemas/CostSetKindEnum'
          readOnly: true
        rev:
          type: integer
          readOnly: true
        summary:
          allOf:
            - $ref: '#/components/schemas/CostSetSummary'
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        cost_lines:
          type: array
          items:
            $ref: '#/components/schemas/CostLine'
          readOnly: true
      required:
        - cost_lines
        - created
        - id
        - job
        - kind
        - rev
        - summary
    CostSetKindEnum:
      enum:
        - estimate
        - quote
        - actual
      type: string
      description: |-
        * `estimate` - Estimate
        * `quote` - Quote
        * `actual` - Actual
    CostSetSummary:
      type: object
      description: Serializer for CostSet summary data - used in cost analysis
      properties:
        cost:
          type: number
          format: double
          description: Total cost for this cost set
        rev:
          type: number
          format: double
          description: Total revenue for this cost set
        hours:
          type: number
          format: double
          description: Total hours for this cost set
        profitMargin:
          type: number
          format: double
          description: Calculated profit margin percentage
          readOnly: true
      required:
        - cost
        - hours
        - profitMargin
        - rev
    CreatePayRunRequest:
      type: object
      description: Request serializer for creating a pay run
      properties:
        week_start_date:
          type: string
          format: date
          description: Monday of the week (YYYY-MM-DD)
      required:
        - week_start_date
    CreatePayRunResponse:
      type: object
      description: Response serializer for created pay run
      properties:
        id:
          type: string
          format: uuid
          description: Django primary key
        xero_id:
          type: string
          format: uuid
          description: Xero pay run ID
        status:
          type: string
        period_start_date:
          type: string
          format: date
        period_end_date:
          type: string
          format: date
        payment_date:
          type: string
          format: date
        xero_url:
          type: string
          description: Deep link to pay run in Xero
      required:
        - id
        - payment_date
        - period_end_date
        - period_start_date
        - status
        - xero_id
        - xero_url
    CustomTokenObtainPairRequest:
      type: object
      description: Custom serializer that accepts username and maps it to email
      properties:
        username:
          type: string
          writeOnly: true
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
        - password
        - username
    DailyTimesheetSummary:
      type: object
      description: Serializer for complete daily timesheet summary
      properties:
        date:
          type: string
          format: date
        staff_data:
          type: array
          items:
            $ref: '#/components/schemas/StaffDailyData'
        daily_totals:
          $ref: '#/components/schemas/DailyTotals'
        summary_stats:
          $ref: '#/components/schemas/SummaryStats'
        weekend_enabled:
          type: boolean
          default: false
        is_weekend:
          type: boolean
          default: false
        day_type:
          type: string
      required:
        - daily_totals
        - date
        - staff_data
        - summary_stats
    DailyTotals:
      type: object
      description: Serializer for daily totals
      properties:
        total_scheduled_hours:
          type: number
          format: double
        total_actual_hours:
          type: number
          format: double
        total_billable_hours:
          type: number
          format: double
        total_non_billable_hours:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
        total_cost:
          type: number
          format: double
        total_entries:
          type: integer
        completion_percentage:
          type: number
          format: double
        billable_percentage:
          type: number
          format: double
        missing_hours:
          type: number
          format: double
      required:
        - billable_percentage
        - completion_percentage
        - missing_hours
        - total_actual_hours
        - total_billable_hours
        - total_cost
        - total_entries
        - total_non_billable_hours
        - total_revenue
        - total_scheduled_hours
    DataIntegrityResponse:
      type: object
      description: Response for data integrity scan.
      properties:
        scanned_at:
          type: string
          format: date-time
          description: When the scan was performed
        broken_fk_references:
          type: array
          items:
            $ref: '#/components/schemas/BrokenFKReference'
          description: List of broken foreign key references
        broken_json_references:
          type: array
          items:
            $ref: '#/components/schemas/BrokenJSONReference'
          description: List of broken JSON field references
        business_rule_violations:
          type: array
          items:
            $ref: '#/components/schemas/BusinessRuleViolation'
          description: List of business rule violations
        summary:
          allOf:
            - $ref: '#/components/schemas/DataIntegritySummary'
          description: Summary statistics
      required:
        - broken_fk_references
        - broken_json_references
        - business_rule_violations
        - scanned_at
        - summary
    DataIntegritySummary:
      type: object
      description: Summary of data integrity scan results.
      properties:
        total_broken_fks:
          type: integer
          description: Number of broken foreign key references found
        total_broken_json_refs:
          type: integer
          description: Number of broken JSON references found
        total_business_rule_violations:
          type: integer
          description: Number of business rule violations found
        total_issues:
          type: integer
          description: Total issues found
      required:
        - total_broken_fks
        - total_broken_json_refs
        - total_business_rule_violations
        - total_issues
    DeliveryReceiptAllocationRequest:
      type: object
      description: Serializer for individual allocation within a delivery receipt
        line.
      properties:
        job_id:
          type: string
          format: uuid
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        retail_rate:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Custom retail rate percentage (e.g., 20.00 for 20%)
        metadata:
          type: object
          additionalProperties: {}
          description: Additional metadata including location, metal_type, alloy,
            specifics
      required:
        - job_id
        - quantity
    DeliveryReceiptLineRequest:
      type: object
      description: Serializer for delivery receipt line allocation data.
      properties:
        total_received:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        allocations:
          type: array
          items:
            $ref: '#/components/schemas/DeliveryReceiptAllocationRequest'
      required:
        - allocations
        - total_received
    DeliveryReceiptRequest:
      type: object
      description: Serializer for delivery receipt request data.
      properties:
        purchase_order_id:
          type: string
          format: uuid
        allocations:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/DeliveryReceiptLineRequest'
          description: Dictionary where keys are PurchaseOrderLine IDs and values
            are allocation data
      required:
        - allocations
        - purchase_order_id
    DeliveryReceiptResponse:
      type: object
      description: Serializer for delivery receipt response data.
      properties:
        success:
          type: boolean
        error:
          type: string
      required:
        - success
    DiffPreview:
      type: object
      description: Serializer for a summary of changes in a quote sync.
      properties:
        additions_count:
          type: integer
        updates_count:
          type: integer
        deletions_count:
          type: integer
        total_changes:
          type: integer
        next_revision:
          type: integer
        current_revision:
          type: integer
          nullable: true
      required:
        - additions_count
        - deletions_count
        - total_changes
        - updates_count
    DiffPreviewRequest:
      type: object
      description: Serializer for a summary of changes in a quote sync.
      properties:
        additions_count:
          type: integer
        updates_count:
          type: integer
        deletions_count:
          type: integer
        total_changes:
          type: integer
        next_revision:
          type: integer
        current_revision:
          type: integer
          nullable: true
      required:
        - additions_count
        - deletions_count
        - total_changes
        - updates_count
    DjangoJob:
      type: object
      properties:
        id:
          type: string
          description: Unique id for this job.
          maxLength: 255
        next_run_time:
          type: string
          format: date-time
          nullable: true
          description: Date and time at which this job is scheduled to be executed
            next.
        job_state:
          type: string
          format: byte
          readOnly: true
      required:
        - id
        - job_state
    DjangoJobExecution:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
          description: Unique ID for this job execution.
        job_id:
          type: string
          readOnly: true
        status:
          allOf:
            - $ref: '#/components/schemas/DjangoJobExecutionStatusEnum'
          description: |-
            The current status of this job execution.

            * `Started execution` - Started execution
            * `Error!` - Error!
            * `Executed` - Executed
        run_time:
          type: string
          format: date-time
          description: Date and time at which this job was executed.
        duration:
          type: number
          format: double
          maximum: 10000000000000
          minimum: -10000000000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Total run time of this job (in seconds).
        exception:
          type: string
          nullable: true
          description: Details of exception that occurred during job execution (if
            any).
          maxLength: 1000
        traceback:
          type: string
          nullable: true
          description: Traceback of exception that occurred during job execution (if
            any).
      required:
        - id
        - job_id
        - run_time
        - status
    DjangoJobExecutionStatusEnum:
      enum:
        - Started execution
        - Error!
        - Executed
      type: string
      description: |-
        * `Started execution` - Started execution
        * `Error!` - Error!
        * `Executed` - Executed
    DjangoJobRequest:
      type: object
      properties:
        id:
          type: string
          minLength: 1
          description: Unique id for this job.
          maxLength: 255
        next_run_time:
          type: string
          format: date-time
          nullable: true
          description: Date and time at which this job is scheduled to be executed
            next.
      required:
        - id
    DocumentTypeEnum:
      enum:
        - jsa
        - swp
        - sop
      type: string
      description: |-
        * `jsa` - Job Safety Analysis
        * `swp` - Safe Work Procedure
        * `sop` - Standard Operating Procedure
    DraftLine:
      type: object
      description: Serializer for draft line data.
      properties:
        kind:
          type: string
        desc:
          type: string
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
      required:
        - desc
        - kind
        - quantity
        - total_cost
        - total_rev
        - unit_cost
        - unit_rev
    DraftLineRequest:
      type: object
      description: Serializer for draft line data.
      properties:
        kind:
          type: string
          minLength: 1
        desc:
          type: string
          minLength: 1
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
      required:
        - desc
        - kind
        - quantity
        - total_cost
        - total_rev
        - unit_cost
        - unit_rev
    FetchAllJobsResponse:
      type: object
      description: Serializer for fetch_all_jobs response.
      properties:
        success:
          type: boolean
          default: true
        active_jobs:
          type: array
          items:
            $ref: '#/components/schemas/KanbanJob'
        archived_jobs:
          type: array
          items:
            $ref: '#/components/schemas/KanbanJob'
        total_archived:
          type: integer
        error:
          type: string
    FetchJobsByColumnResponse:
      type: object
      description: Serializer for fetch_jobs_by_column response.
      properties:
        success:
          type: boolean
          default: true
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/KanbanColumnJob'
        total:
          type: integer
        filtered_count:
          type: integer
        error:
          type: string
    FetchJobsResponse:
      type: object
      description: Serializer for fetch_jobs response.
      properties:
        success:
          type: boolean
          default: true
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/KanbanJob'
        total:
          type: integer
        filtered_count:
          type: integer
        error:
          type: string
    FetchStatusValuesResponse:
      type: object
      description: Serializer for fetch_status_values response.
      properties:
        success:
          type: boolean
          default: true
        statuses:
          type: object
          additionalProperties:
            type: string
        tooltips:
          type: object
          additionalProperties:
            type: string
        error:
          type: string
    GenerateControlsRequestRequest:
      type: object
      properties:
        hazards:
          type: array
          items:
            type: string
            minLength: 1
        task_description:
          type: string
          minLength: 1
          default: ''
      required:
        - hazards
    GenerateControlsResponse:
      type: object
      properties:
        controls:
          type: array
          items:
            type: string
      required:
        - controls
    GenerateHazardsRequestRequest:
      type: object
      properties:
        task_description:
          type: string
          minLength: 1
      required:
        - task_description
    GenerateHazardsResponse:
      type: object
      properties:
        hazards:
          type: array
          items:
            type: string
      required:
        - hazards
    ImproveDocumentRequestRequest:
      type: object
      properties:
        raw_text:
          type: string
          minLength: 1
        document_type:
          type: string
          minLength: 1
          default: swp
      required:
        - raw_text
    ImproveDocumentResponse:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        site_location:
          type: string
        ppe_requirements:
          type: array
          items:
            type: string
        tasks:
          type: array
          items: {}
        additional_notes:
          type: string
      required:
        - additional_notes
        - description
        - ppe_requirements
        - site_location
        - tasks
        - title
    ImproveSectionRequestRequest:
      type: object
      properties:
        section_text:
          type: string
          minLength: 1
        section_type:
          type: string
          minLength: 1
        context:
          type: string
          minLength: 1
          default: ''
      required:
        - section_text
        - section_type
    ImproveSectionResponse:
      type: object
      properties:
        improved_text:
          type: string
      required:
        - improved_text
    Invoice:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        xero_id:
          type: string
          format: uuid
        number:
          type: string
          maxLength: 255
        status:
          $ref: '#/components/schemas/Status1beEnum'
        date:
          type: string
          format: date
        due_date:
          type: string
          format: date
          nullable: true
        total_excl_tax:
          type: number
          format: double
        total_incl_tax:
          type: number
          format: double
        amount_due:
          type: number
          format: double
        tax:
          type: number
          format: double
        online_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
      required:
        - amount_due
        - date
        - id
        - number
        - total_excl_tax
        - total_incl_tax
        - xero_id
    Job:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          maxLength: 100
        client_id:
          type: string
          format: uuid
          nullable: true
        client_name:
          type: string
          readOnly: true
          nullable: true
        contact_id:
          type: string
          format: uuid
          nullable: true
        contact_name:
          type: string
          readOnly: true
          nullable: true
        job_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        notes:
          type: string
          nullable: true
          description: Internal notes about the job. Not shown on the invoice.
        order_number:
          type: string
          nullable: true
          maxLength: 100
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        description:
          type: string
          nullable: true
          description: This becomes the first line item on the invoice
        latest_estimate:
          allOf:
            - $ref: '#/components/schemas/CostSet'
          readOnly: true
        latest_quote:
          allOf:
            - $ref: '#/components/schemas/CostSet'
          readOnly: true
        latest_actual:
          allOf:
            - $ref: '#/components/schemas/CostSet'
          readOnly: true
        job_status:
          type: string
        delivery_date:
          type: string
          format: date
          nullable: true
        paid:
          type: boolean
        quote_acceptance_date:
          type: string
          format: date-time
          nullable: true
        job_is_valid:
          type: boolean
        job_files:
          type: array
          items:
            $ref: '#/components/schemas/JobFile'
        charge_out_rate:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        pricing_methodology:
          allOf:
            - $ref: '#/components/schemas/PricingMethodologyEnum'
          description: |-
            Determines whether job uses quotes or time and materials pricing type.

            * `time_materials` - Time & Materials
            * `fixed_price` - Fixed Price
        price_cap:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Maximum amount to invoice for T&M jobs (do not exceed). For
            quoted jobs it is set to the quote.
        speed_quality_tradeoff:
          allOf:
            - $ref: '#/components/schemas/SpeedQualityTradeoffEnum'
          description: |-
            Speed vs quality tradeoff for workshop execution

            * `fast` - Fast - Prioritize Speed
            * `normal` - Normal - Balanced
            * `quality` - Quality - Prioritize Quality
        quote_sheet:
          allOf:
            - $ref: '#/components/schemas/QuoteSpreadsheet'
          readOnly: true
          nullable: true
        quoted:
          type: boolean
          readOnly: true
        fully_invoiced:
          type: boolean
          readOnly: true
        quote:
          allOf:
            - $ref: '#/components/schemas/Quote'
          nullable: true
          readOnly: true
        invoices:
          type: array
          items:
            $ref: '#/components/schemas/Invoice'
          readOnly: true
        xero_quote:
          allOf:
            - $ref: '#/components/schemas/XeroQuote'
          nullable: true
          readOnly: true
        xero_invoices:
          type: array
          items:
            $ref: '#/components/schemas/XeroInvoice'
          readOnly: true
        shop_job:
          type: boolean
          description: Indicates if this is a shop job (belongs to shop client).
          readOnly: true
        rejected_flag:
          type: boolean
          description: Indicates if this job was rejected (shown in Archived with
            rejected styling)
        default_xero_pay_item_id:
          type: string
          format: uuid
          nullable: true
        default_xero_pay_item_name:
          type: string
          readOnly: true
          nullable: true
      required:
        - charge_out_rate
        - client_name
        - contact_name
        - created_at
        - default_xero_pay_item_name
        - fully_invoiced
        - id
        - invoices
        - job_number
        - job_status
        - latest_actual
        - latest_estimate
        - latest_quote
        - name
        - quote
        - quote_sheet
        - quoted
        - shop_job
        - updated_at
        - xero_invoices
        - xero_quote
    JobAgingFinancialData:
      type: object
      description: Serialiser for job aging financial data
      properties:
        estimate_total:
          type: number
          format: double
        quote_total:
          type: number
          format: double
        actual_total:
          type: number
          format: double
      required:
        - actual_total
        - estimate_total
        - quote_total
    JobAgingJobData:
      type: object
      description: Serialiser for individual job aging data
      properties:
        id:
          type: string
        job_number:
          type: integer
        name:
          type: string
        client_name:
          type: string
        status:
          type: string
        status_display:
          type: string
        financial_data:
          $ref: '#/components/schemas/JobAgingFinancialData'
        timing_data:
          $ref: '#/components/schemas/JobAgingTimingData'
      required:
        - client_name
        - financial_data
        - id
        - job_number
        - name
        - status
        - status_display
        - timing_data
    JobAgingResponse:
      type: object
      description: Serialiser for job aging API response
      properties:
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/JobAgingJobData'
      required:
        - jobs
    JobAgingTimingData:
      type: object
      description: Serialiser for job aging timing data
      properties:
        created_date:
          type: string
          format: date
        created_days_ago:
          type: integer
        days_in_current_status:
          type: integer
        last_activity_date:
          type: string
          format: date-time
          nullable: true
        last_activity_days_ago:
          type: integer
          nullable: true
        last_activity_type:
          type: string
          nullable: true
        last_activity_description:
          type: string
          nullable: true
      required:
        - created_date
        - created_days_ago
        - days_in_current_status
        - last_activity_date
        - last_activity_days_ago
    JobBasicInformationResponse:
      type: object
      description: Serializer for job basic information response
      properties:
        description:
          type: string
          nullable: true
        delivery_date:
          type: string
          format: date
          nullable: true
        order_number:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
      required:
        - delivery_date
        - description
        - notes
        - order_number
    JobBreakdown:
      type: object
      description: Serializer for job breakdown data
      properties:
        job_id:
          type: string
        job_number:
          type: integer
        job_name:
          type: string
        client:
          type: string
        hours:
          type: number
          format: double
        revenue:
          type: number
          format: double
        cost:
          type: number
          format: double
        is_billable:
          type: boolean
      required:
        - client
        - cost
        - hours
        - is_billable
        - job_id
        - job_name
        - job_number
        - revenue
    JobClientHeader:
      type: object
      description: Serializer for client data in job header response
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
      required:
        - id
        - name
    JobContactResponse:
      type: object
      description: Serializer for job contact information response
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        position:
          type: string
          nullable: true
        is_primary:
          type: boolean
        notes:
          type: string
          nullable: true
      required:
        - email
        - id
        - is_primary
        - name
        - notes
        - phone
        - position
    JobContactUpdateRequest:
      type: object
      description: Serializer for job contact update request
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 1
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        position:
          type: string
          nullable: true
        is_primary:
          type: boolean
        notes:
          type: string
          nullable: true
      required:
        - email
        - id
        - is_primary
        - name
        - notes
        - phone
        - position
    JobCostSetSummary:
      type: object
      description: Serializer for cost set summary data in job views
      properties:
        cost:
          type: number
          format: double
        rev:
          type: number
          format: double
        hours:
          type: number
          format: double
        profitMargin:
          type: number
          format: double
          nullable: true
      required:
        - cost
        - hours
        - profitMargin
        - rev
    JobCostSummaryResponse:
      type: object
      description: Serializer for job cost summary response
      properties:
        estimate:
          allOf:
            - $ref: '#/components/schemas/JobCostSetSummary'
          nullable: true
        quote:
          allOf:
            - $ref: '#/components/schemas/JobCostSetSummary'
          nullable: true
        actual:
          allOf:
            - $ref: '#/components/schemas/JobCostSetSummary'
          nullable: true
      required:
        - actual
        - estimate
        - quote
    JobCreateRequest:
      type: object
      description: Serializer for job creation request data.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        client_id:
          type: string
          format: uuid
        description:
          type: string
        order_number:
          type: string
        notes:
          type: string
        contact_id:
          type: string
          format: uuid
          nullable: true
        pricing_methodology:
          type: string
          nullable: true
        estimated_materials:
          type: number
          format: double
          maximum: 100000000
          minimum: 0
          exclusiveMaximum: true
          description: Estimated material costs in dollars
        estimated_time:
          type: number
          format: double
          maximum: 100000000
          minimum: 0
          exclusiveMaximum: true
          description: Estimated workshop time in hours
      required:
        - client_id
        - estimated_materials
        - estimated_time
        - name
    JobCreateResponse:
      type: object
      description: Serializer for job creation response.
      properties:
        success:
          type: boolean
          default: true
        job_id:
          type: string
        job_number:
          type: integer
        message:
          type: string
      required:
        - job_id
        - job_number
        - message
    JobData:
      type: object
      properties:
        job:
          $ref: '#/components/schemas/Job'
        events:
          type: array
          items:
            $ref: '#/components/schemas/JobEvent'
          readOnly: true
        company_defaults:
          allOf:
            - $ref: '#/components/schemas/CompanyDefaultsJobDetail'
          readOnly: true
      required:
        - company_defaults
        - events
        - job
    JobDeleteResponse:
      type: object
      description: Serializer for job deletion response.
      properties:
        success:
          type: boolean
          default: true
        message:
          type: string
      required:
        - message
    JobDeltaEnvelopeRequest:
      type: object
      description: Serializer that validates the delta envelope submitted by the frontend.
      properties:
        change_id:
          type: string
          format: uuid
        actor_id:
          type: string
          format: uuid
          nullable: true
        made_at:
          type: string
          format: date-time
          nullable: true
        job_id:
          type: string
          format: uuid
          nullable: true
        fields:
          type: array
          items:
            type: string
            minLength: 1
          minItems: 1
        before: {}
        after: {}
        before_checksum:
          type: string
          minLength: 1
        etag:
          type: string
          nullable: true
      required:
        - after
        - before
        - before_checksum
        - change_id
        - fields
    JobDeltaRejection:
      type: object
      description: Serializer for delta rejection records (read-only).
      properties:
        id:
          type: string
          format: uuid
        change_id:
          type: string
          format: uuid
          nullable: true
        job_id:
          type: string
          format: uuid
          nullable: true
        job_name:
          type: string
          nullable: true
          readOnly: true
        reason:
          type: string
        detail:
          readOnly: true
        checksum:
          type: string
        request_etag:
          type: string
        request_ip:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        envelope: {}
        staff_id:
          type: string
          format: uuid
          nullable: true
        staff_email:
          type: string
          nullable: true
          readOnly: true
      required:
        - change_id
        - checksum
        - created_at
        - detail
        - envelope
        - id
        - job_id
        - job_name
        - reason
        - request_etag
        - request_ip
        - staff_email
        - staff_id
    JobDeltaRejectionListResponse:
      type: object
      description: Serializer for paginated delta rejection responses.
      properties:
        count:
          type: integer
        next:
          type: string
          nullable: true
        previous:
          type: string
          nullable: true
        results:
          type: array
          items:
            $ref: '#/components/schemas/JobDeltaRejection'
      required:
        - count
        - results
    JobDetailResponse:
      type: object
      description: Serializer for job detail response.
      properties:
        success:
          type: boolean
          default: true
        data:
          $ref: '#/components/schemas/JobData'
      required:
        - data
    JobEvent:
      type: object
      description: |-
        Serializer for JobEvent model - read-only for frontend consumption

        Enhanced to expose complete delta envelope data for undo operations.
        Includes all fields necessary for frontend to implement undo functionality.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        description:
          type: string
          readOnly: true
        timestamp:
          type: string
          format: date-time
          readOnly: true
        staff:
          type: string
          readOnly: true
          nullable: true
        event_type:
          type: string
          readOnly: true
        schema_version:
          type: integer
          readOnly: true
        change_id:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        delta_before:
          readOnly: true
          nullable: true
        delta_after:
          readOnly: true
          nullable: true
        delta_meta:
          readOnly: true
          nullable: true
        delta_checksum:
          type: string
          readOnly: true
        can_undo:
          type: boolean
          description: Whether this event can be undone
          readOnly: true
        undo_description:
          type: string
          nullable: true
          description: Human-readable description of what undoing this event would
            do
          readOnly: true
      required:
        - can_undo
        - change_id
        - delta_after
        - delta_before
        - delta_checksum
        - delta_meta
        - description
        - event_type
        - id
        - schema_version
        - staff
        - timestamp
        - undo_description
    JobEventCreateRequest:
      type: object
      description: Serializer for job event creation request
      properties:
        description:
          type: string
          minLength: 1
          maxLength: 500
      required:
        - description
    JobEventCreateResponse:
      type: object
      description: Serializer for job event creation response
      properties:
        success:
          type: boolean
        event:
          $ref: '#/components/schemas/JobEvent'
      required:
        - event
        - success
    JobEventsResponse:
      type: object
      description: Serializer for job events response
      properties:
        events:
          type: array
          items:
            $ref: '#/components/schemas/JobEvent'
      required:
        - events
    JobFile:
      type: object
      properties:
        id:
          type: string
          format: uuid
        filename:
          type: string
          maxLength: 255
        mime_type:
          type: string
          maxLength: 100
        uploaded_at:
          type: string
          format: date-time
          readOnly: true
        status:
          $ref: '#/components/schemas/JobFileStatusEnum'
        print_on_jobsheet:
          type: boolean
        size:
          type: integer
          nullable: true
          description: Get file size in bytes
          readOnly: true
        download_url:
          type: string
          readOnly: true
        thumbnail_url:
          type: string
          nullable: true
          readOnly: true
      required:
        - download_url
        - filename
        - id
        - size
        - thumbnail_url
        - uploaded_at
    JobFileErrorResponse:
      type: object
      description: Serializer for error responses.
      properties:
        status:
          type: string
          default: error
        message:
          type: string
      required:
        - message
    JobFileRequest:
      type: object
      properties:
        id:
          type: string
          format: uuid
        filename:
          type: string
          minLength: 1
          maxLength: 255
        mime_type:
          type: string
          maxLength: 100
        status:
          $ref: '#/components/schemas/JobFileStatusEnum'
        print_on_jobsheet:
          type: boolean
      required:
        - filename
        - id
    JobFileStatusEnum:
      enum:
        - active
        - deleted
      type: string
      description: |-
        * `active` - Active
        * `deleted` - Deleted
    JobFileThumbnailErrorResponse:
      type: object
      description: Serializer for thumbnail error response.
      properties:
        status:
          type: string
          default: error
        message:
          type: string
      required:
        - message
    JobFileUpdateSuccessResponse:
      type: object
      description: Serializer for successful file update response.
      properties:
        status:
          type: string
          default: success
        message:
          type: string
        print_on_jobsheet:
          type: boolean
      required:
        - message
        - print_on_jobsheet
    JobFileUploadPartialResponse:
      type: object
      description: Serializer for partial success file upload response.
      properties:
        status:
          type: string
        uploaded:
          type: array
          items:
            $ref: '#/components/schemas/UploadedFile'
        errors:
          type: array
          items:
            type: string
      required:
        - errors
        - status
        - uploaded
    JobFileUploadRequest:
      type: object
      description: Serializer for job file upload requests.
      properties:
        files:
          type: array
          items:
            type: string
            format: binary
          description: Files to upload
        print_on_jobsheet:
          type: boolean
          default: true
          description: Flag indicating whether the file should print on the jobsheet.
      required:
        - files
    JobFileUploadSuccessResponse:
      type: object
      description: Serializer for successful file upload response.
      properties:
        status:
          type: string
          default: success
        uploaded:
          type: array
          items:
            $ref: '#/components/schemas/UploadedFile'
        message:
          type: string
      required:
        - message
        - uploaded
    JobForPurchasing:
      type: object
      description: Serializer for Job model in purchasing contexts.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        job_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        name:
          type: string
          maxLength: 100
        client_name:
          type: string
          readOnly: true
        status:
          $ref: '#/components/schemas/Status7b9Enum'
        is_stock_holding:
          type: boolean
          readOnly: true
        job_display_name:
          type: string
          readOnly: true
      required:
        - client_name
        - id
        - is_stock_holding
        - job_display_name
        - job_number
        - name
    JobHeaderResponse:
      type: object
      description: Serializer for job header response - essential job data for fast
        loading.
      properties:
        job_id:
          type: string
          format: uuid
        client:
          $ref: '#/components/schemas/JobClientHeader'
        quoted:
          type: boolean
        default_xero_pay_item_id:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        default_xero_pay_item_name:
          type: string
          readOnly: true
          nullable: true
        job_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        name:
          type: string
          maxLength: 100
        status:
          $ref: '#/components/schemas/Status7b9Enum'
        pricing_methodology:
          allOf:
            - $ref: '#/components/schemas/PricingMethodologyEnum'
          description: |-
            Determines whether job uses quotes or time and materials pricing type.

            * `time_materials` - Time & Materials
            * `fixed_price` - Fixed Price
        price_cap:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Maximum amount to invoice for T&M jobs (do not exceed). For
            quoted jobs it is set to the quote.
        speed_quality_tradeoff:
          allOf:
            - $ref: '#/components/schemas/SpeedQualityTradeoffEnum'
          description: |-
            Speed vs quality tradeoff for workshop execution

            * `fast` - Fast - Prioritize Speed
            * `normal` - Normal - Balanced
            * `quality` - Quality - Prioritize Quality
        fully_invoiced:
          type: boolean
          description: The total value of invoices for this job matches the total
            value of the job.
        quote_acceptance_date:
          type: string
          format: date-time
          nullable: true
        paid:
          type: boolean
        rejected_flag:
          type: boolean
          description: Indicates if this job was rejected (shown in Archived with
            rejected styling)
      required:
        - client
        - default_xero_pay_item_id
        - default_xero_pay_item_name
        - job_id
        - job_number
        - name
        - quoted
    JobInvoicesResponse:
      type: object
      description: Serializer for job invoices response
      properties:
        invoices:
          type: array
          items:
            $ref: '#/components/schemas/Invoice'
      required:
        - invoices
    JobMetrics:
      type: object
      description: Serializer for job metrics in weekly timesheet context
      properties:
        total_estimated_profit:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_actual_profit:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_profit:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
      required:
        - total_actual_profit
        - total_estimated_profit
        - total_profit
    JobQuoteAcceptance:
      type: object
      description: Serializer for job quote acceptance data.
      properties:
        success:
          type: boolean
        job_id:
          type: string
          format: uuid
        quote_acceptance_date:
          type: string
        message:
          type: string
      required:
        - job_id
        - message
        - quote_acceptance_date
        - success
    JobQuoteAcceptanceRequest:
      type: object
      description: Serializer for job quote acceptance data.
      properties:
        success:
          type: boolean
        job_id:
          type: string
          format: uuid
        quote_acceptance_date:
          type: string
          minLength: 1
        message:
          type: string
          minLength: 1
      required:
        - job_id
        - message
        - quote_acceptance_date
        - success
    JobQuoteChat:
      type: object
      description: |-
        Serializer for JobQuoteChat responses (includes timestamp).
        Used when returning saved messages to the client.
      properties:
        message_id:
          type: string
          description: Frontend-generated unique ID
          maxLength: 100
        role:
          $ref: '#/components/schemas/RoleEnum'
        content:
          type: string
        metadata:
          description: Extra data like streaming status, processing time, etc.
        timestamp:
          type: string
          format: date-time
          readOnly: true
      required:
        - content
        - message_id
        - role
        - timestamp
    JobQuoteChatCreateRequest:
      type: object
      description: |-
        Serializer for creating new JobQuoteChat messages.
        Validates required fields and business rules.
      properties:
        message_id:
          type: string
          minLength: 1
          description: Frontend-generated unique ID
          maxLength: 100
        role:
          $ref: '#/components/schemas/RoleEnum'
        content:
          type: string
          minLength: 1
        metadata:
          description: Extra data like streaming status, processing time, etc.
      required:
        - content
        - message_id
        - role
    JobQuoteChatHistoryResponse:
      type: object
      description: Serializer for chat history response.
      properties:
        success:
          type: boolean
        data:
          type: object
          additionalProperties: {}
      required:
        - data
        - success
    JobQuoteChatInteractionErrorResponse:
      type: object
      description: Serializer for error chat interaction response.
      properties:
        success:
          type: boolean
          default: false
        error:
          type: string
        code:
          type: string
          description: Error code for specific error types
      required:
        - error
    JobQuoteChatInteractionRequest:
      type: object
      description: Serializer for chat interaction request data.
      properties:
        message:
          type: string
          minLength: 1
          description: User message content to send to the AI assistant
          maxLength: 5000
        mode:
          allOf:
            - $ref: '#/components/schemas/ModeEnum'
          default: AUTO
          description: |-
            Operation mode: CALC for calculations, PRICE for pricing, TABLE for summaries, AUTO for automatic detection

            * `CALC` - CALC
            * `PRICE` - PRICE
            * `TABLE` - TABLE
            * `AUTO` - AUTO
      required:
        - message
    JobQuoteChatInteractionSuccessResponse:
      type: object
      description: Serializer for successful chat interaction response.
      properties:
        success:
          type: boolean
          default: true
        data:
          $ref: '#/components/schemas/JobQuoteChat'
      required:
        - data
    JobQuoteChatUpdate:
      type: object
      description: |-
        Serializer for updating existing JobQuoteChat messages.
        Used for PATCH operations, especially streaming response updates.
      properties:
        content:
          type: string
        metadata:
          description: Extra data like streaming status, processing time, etc.
    JobReorderRequest:
      type: object
      description: Serializer for job reorder request data.
      properties:
        before_id:
          type: string
          format: uuid
          nullable: true
          description: ID of job to place this job before
        after_id:
          type: string
          format: uuid
          nullable: true
          description: ID of job to place this job after
        status:
          type: string
          nullable: true
          minLength: 1
          description: New status if moving between columns
    JobRestErrorResponse:
      type: object
      description: Serializer for job REST error responses.
      properties:
        error:
          type: string
      required:
        - error
    JobStatusChoicesResponse:
      type: object
      description: Serializer for job status choices response
      properties:
        statuses:
          type: object
          additionalProperties: {}
      required:
        - statuses
    JobStatusUpdateRequest:
      type: object
      description: Serializer for job status update request data.
      properties:
        status:
          type: string
          minLength: 1
          description: New status for the job
      required:
        - status
    JobTimelineResponse:
      type: object
      description: Serializer for job timeline response (events + cost lines)
      properties:
        timeline:
          type: array
          items:
            $ref: '#/components/schemas/TimelineEntry'
      required:
        - timeline
    JobUndoRequest:
      type: object
      description: Request serializer for undoing a job delta.
      properties:
        change_id:
          type: string
          format: uuid
        undo_change_id:
          type: string
          format: uuid
          nullable: true
      required:
        - change_id
    JobsListResponse:
      type: object
      description: Serializer for jobs list API response
      properties:
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/ModernTimesheetJob'
        total_count:
          type: integer
      required:
        - jobs
        - total_count
    KPICalendarData:
      type: object
      description: Serializer for KPI Calendar data response.
      properties:
        calendar_data:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/KPIDayData'
        monthly_totals:
          $ref: '#/components/schemas/KPIMonthlyTotals'
        thresholds:
          $ref: '#/components/schemas/KPIThresholds'
        year:
          type: integer
        month:
          type: integer
      required:
        - calendar_data
        - month
        - monthly_totals
        - thresholds
        - year
    KPIDayData:
      type: object
      description: Serializer for individual day data in KPI calendar
      properties:
        date:
          type: string
          format: date
        day:
          type: integer
        holiday:
          type: boolean
        holiday_name:
          type: string
        billable_hours:
          type: number
          format: double
        total_hours:
          type: number
          format: double
        shop_hours:
          type: number
          format: double
        shop_percentage:
          type: number
          format: double
        gross_profit:
          type: number
          format: double
        color:
          type: string
        gp_target_achievement:
          type: number
          format: double
        details:
          $ref: '#/components/schemas/KPIDetails'
      required:
        - billable_hours
        - color
        - date
        - day
        - details
        - gp_target_achievement
        - gross_profit
        - holiday
        - shop_hours
        - shop_percentage
        - total_hours
    KPIDetails:
      type: object
      description: Serializer for detailed KPI data per day
      properties:
        time_revenue:
          type: number
          format: double
        material_revenue:
          type: number
          format: double
        adjustment_revenue:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
        staff_cost:
          type: number
          format: double
        material_cost:
          type: number
          format: double
        adjustment_cost:
          type: number
          format: double
        total_cost:
          type: number
          format: double
        profit_breakdown:
          $ref: '#/components/schemas/KPIProfitBreakdown'
        job_breakdown:
          type: array
          items:
            $ref: '#/components/schemas/KPIJobBreakdown'
      required:
        - adjustment_cost
        - adjustment_revenue
        - job_breakdown
        - material_cost
        - material_revenue
        - profit_breakdown
        - staff_cost
        - time_revenue
        - total_cost
        - total_revenue
    KPIJobBreakdown:
      type: object
      description: Serializer for job breakdown data in KPI calendar
      properties:
        job_id:
          type: string
        job_number:
          type: string
        job_name:
          type: string
        client_name:
          type: string
        billable_hours:
          type: number
          format: double
        revenue:
          type: number
          format: double
        cost:
          type: number
          format: double
        profit:
          type: number
          format: double
      required:
        - billable_hours
        - client_name
        - cost
        - job_id
        - job_name
        - job_number
        - profit
        - revenue
    KPIMonthlyTotals:
      type: object
      description: Serializer for monthly totals in KPI calendar
      properties:
        billable_hours:
          type: number
          format: double
        total_hours:
          type: number
          format: double
        shop_hours:
          type: number
          format: double
        gross_profit:
          type: number
          format: double
        days_green:
          type: integer
        days_amber:
          type: integer
        days_red:
          type: integer
        labour_green_days:
          type: integer
        labour_amber_days:
          type: integer
        labour_red_days:
          type: integer
        profit_green_days:
          type: integer
        profit_amber_days:
          type: integer
        profit_red_days:
          type: integer
        working_days:
          type: integer
        elapsed_workdays:
          type: integer
        remaining_workdays:
          type: integer
        time_revenue:
          type: number
          format: double
        material_revenue:
          type: number
          format: double
        adjustment_revenue:
          type: number
          format: double
        staff_cost:
          type: number
          format: double
        material_cost:
          type: number
          format: double
        adjustment_cost:
          type: number
          format: double
        material_profit:
          type: number
          format: double
        adjustment_profit:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
        total_cost:
          type: number
          format: double
        elapsed_target:
          type: number
          format: double
        net_profit:
          type: number
          format: double
        billable_percentage:
          type: number
          format: double
        shop_percentage:
          type: number
          format: double
        avg_daily_gp:
          type: number
          format: double
        avg_daily_gp_so_far:
          type: number
          format: double
        avg_billable_hours_so_far:
          type: number
          format: double
        color_hours:
          type: string
        color_gp:
          type: string
        color_shop:
          type: string
      required:
        - adjustment_cost
        - adjustment_profit
        - adjustment_revenue
        - avg_billable_hours_so_far
        - avg_daily_gp
        - avg_daily_gp_so_far
        - billable_hours
        - billable_percentage
        - color_gp
        - color_hours
        - color_shop
        - days_amber
        - days_green
        - days_red
        - elapsed_target
        - elapsed_workdays
        - gross_profit
        - labour_amber_days
        - labour_green_days
        - labour_red_days
        - material_cost
        - material_profit
        - material_revenue
        - net_profit
        - profit_amber_days
        - profit_green_days
        - profit_red_days
        - remaining_workdays
        - shop_hours
        - shop_percentage
        - staff_cost
        - time_revenue
        - total_cost
        - total_hours
        - total_revenue
        - working_days
    KPIProfitBreakdown:
      type: object
      description: Serializer for profit breakdown in KPI calendar details
      properties:
        labor_profit:
          type: number
          format: double
        material_profit:
          type: number
          format: double
        adjustment_profit:
          type: number
          format: double
      required:
        - adjustment_profit
        - labor_profit
        - material_profit
    KPIThresholds:
      type: object
      description: Serializer for KPI thresholds
      properties:
        billable_threshold_green:
          type: number
          format: double
        billable_threshold_amber:
          type: number
          format: double
        daily_gp_target:
          type: number
          format: double
        shop_hours_target:
          type: number
          format: double
      required:
        - billable_threshold_amber
        - billable_threshold_green
        - daily_gp_target
        - shop_hours_target
    KanbanColumnJob:
      type: object
      description: |-
        Serializer for job data in kanban column context
        (from get_jobs_by_kanban_column - uses serialize_job_for_api).
      properties:
        id:
          type: string
        job_number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client_name:
          type: string
        contact_person:
          type: string
        people:
          type: array
          items:
            $ref: '#/components/schemas/KanbanJobPerson'
        status:
          type: string
        status_key:
          type: string
        rejected_flag:
          type: boolean
        paid:
          type: boolean
        fully_invoiced:
          type: boolean
        speed_quality_tradeoff:
          type: string
        created_by_id:
          type: string
          nullable: true
        created_at:
          type: string
          nullable: true
        priority:
          type: number
          format: double
        badge_label:
          type: string
        badge_color:
          type: string
      required:
        - badge_color
        - badge_label
        - client_name
        - contact_person
        - created_at
        - created_by_id
        - description
        - fully_invoiced
        - id
        - job_number
        - name
        - paid
        - people
        - priority
        - rejected_flag
        - speed_quality_tradeoff
        - status
        - status_key
    KanbanErrorResponse:
      type: object
      description: Serializer for error kanban operation response.
      properties:
        success:
          type: boolean
          default: false
        error:
          type: string
      required:
        - error
    KanbanJob:
      type: object
      description: |-
        Serializer for job data in kanban context
        (matches KanbanService.serialize_job_for_api).
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        job_number:
          type: integer
        client_name:
          type: string
        contact_person:
          type: string
        people:
          type: array
          items:
            $ref: '#/components/schemas/KanbanJobPerson'
        status:
          type: string
        status_key:
          type: string
        rejected_flag:
          type: boolean
        paid:
          type: boolean
        fully_invoiced:
          type: boolean
        speed_quality_tradeoff:
          type: string
        created_by_id:
          type: string
          format: uuid
          nullable: true
        created_at:
          type: string
          nullable: true
        priority:
          type: number
          format: double
      required:
        - client_name
        - contact_person
        - created_at
        - created_by_id
        - description
        - fully_invoiced
        - id
        - job_number
        - name
        - paid
        - people
        - priority
        - rejected_flag
        - speed_quality_tradeoff
        - status
        - status_key
    KanbanJobPerson:
      type: object
      description: Serializer for person data in kanban job context.
      properties:
        id:
          type: string
          format: uuid
        display_name:
          type: string
        icon_url:
          type: string
          format: uri
          nullable: true
      required:
        - display_name
        - icon_url
        - id
    KanbanStaff:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        first_name:
          type: string
          maxLength: 30
        last_name:
          type: string
          maxLength: 30
        icon_url:
          type: string
          nullable: true
          readOnly: true
        display_name:
          type: string
          readOnly: true
      required:
        - display_name
        - first_name
        - icon_url
        - id
        - last_name
    KanbanSuccessResponse:
      type: object
      description: Serializer for successful kanban operation response.
      properties:
        success:
          type: boolean
          default: true
        message:
          type: string
      required:
        - message
    Kind332Enum:
      enum:
        - time
        - material
        - adjust
      type: string
      description: |-
        * `time` - Time
        * `material` - Material
        * `adjust` - Adjustment
    LinkQuoteSheet:
      type: object
      description: Serializer for link quote sheet request data.
      properties:
        template_url:
          type: string
          format: uri
    LinkQuoteSheetRequest:
      type: object
      description: Serializer for link quote sheet request data.
      properties:
        template_url:
          type: string
          format: uri
    MetalTypeEnum:
      enum:
        - stainless_steel
        - mild_steel
        - aluminum
        - brass
        - copper
        - titanium
        - zinc
        - galvanized
        - unspecified
        - other
      type: string
      description: |-
        * `stainless_steel` - Stainless Steel
        * `mild_steel` - Mild Steel
        * `aluminum` - Aluminum
        * `brass` - Brass
        * `copper` - Copper
        * `titanium` - Titanium
        * `zinc` - Zinc
        * `galvanized` - Galvanized
        * `unspecified` - Unspecified
        * `other` - Other
    ModeEnum:
      enum:
        - CALC
        - PRICE
        - TABLE
        - AUTO
      type: string
      description: |-
        * `CALC` - CALC
        * `PRICE` - PRICE
        * `TABLE` - TABLE
        * `AUTO` - AUTO
    ModernStaff:
      type: object
      description: Serializer for staff in timesheet context
      properties:
        id:
          type: string
        name:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        icon_url:
          type: string
          nullable: true
        wageRate:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
      required:
        - email
        - firstName
        - id
        - lastName
        - name
        - wageRate
    ModernTimesheetDayGetResponse:
      type: object
      description: Serializer for timesheet day GET response
      properties:
        entries:
          type: array
          items:
            $ref: '#/components/schemas/TimesheetCostLine'
        summary:
          $ref: '#/components/schemas/ModernTimesheetSummary'
        date:
          type: string
          format: date
      required:
        - date
        - entries
        - summary
    ModernTimesheetEntryGetResponse:
      type: object
      description: Serializer for timesheet entry GET response
      properties:
        cost_lines:
          type: array
          items:
            $ref: '#/components/schemas/TimesheetCostLine'
        staff:
          $ref: '#/components/schemas/ModernTimesheetStaff'
        date:
          type: string
          format: date
        summary:
          $ref: '#/components/schemas/ModernTimesheetSummary'
      required:
        - cost_lines
        - date
        - staff
        - summary
    ModernTimesheetEntryPostRequest:
      type: object
      description: Serializer for timesheet entry POST request
      properties:
        job_id:
          type: string
          format: uuid
        staff_id:
          type: string
          format: uuid
        date:
          type: string
          format: date
        hours:
          type: number
          format: double
          minimum: 0
        description:
          type: string
          minLength: 1
          maxLength: 500
        is_billable:
          type: boolean
          default: true
        hourly_rate:
          type: number
          format: double
          minimum: 0
        xero_pay_item_id:
          type: string
          format: uuid
      required:
        - date
        - description
        - hours
        - job_id
        - staff_id
        - xero_pay_item_id
    ModernTimesheetEntryPostResponse:
      type: object
      description: Serializer for timesheet entry POST response
      properties:
        success:
          type: boolean
        cost_line_id:
          type: string
          format: uuid
        message:
          type: string
      required:
        - success
    ModernTimesheetErrorResponse:
      type: object
      description: Serializer for timesheet error responses
      properties:
        error:
          type: string
          description: Error message
      required:
        - error
    ModernTimesheetJob:
      type: object
      description: Serializer for jobs in timesheet context using modern CostSet system
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        job_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        name:
          type: string
          maxLength: 100
        client_name:
          type: string
          readOnly: true
          nullable: true
        status:
          $ref: '#/components/schemas/Status7b9Enum'
        charge_out_rate:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        has_actual_costset:
          type: boolean
          description: Check if job has an actual cost set
          readOnly: true
        leave_type:
          type: string
          nullable: true
          description: Get leave type if this is a payroll leave job
          readOnly: true
        default_xero_pay_item_id:
          type: string
          format: uuid
          readOnly: true
        default_xero_pay_item_name:
          type: string
          readOnly: true
      required:
        - charge_out_rate
        - client_name
        - default_xero_pay_item_id
        - default_xero_pay_item_name
        - has_actual_costset
        - id
        - job_number
        - leave_type
        - name
    ModernTimesheetJobGetResponse:
      type: object
      description: Serializer for timesheet job GET response
      properties:
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/Job'
        total_count:
          type: integer
      required:
        - jobs
        - total_count
    ModernTimesheetStaff:
      type: object
      description: Serializer for staff information in timesheet responses
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        firstName:
          type: string
        lastName:
          type: string
      required:
        - firstName
        - id
        - lastName
        - name
    ModernTimesheetSummary:
      type: object
      description: Serializer for timesheet entry summary
      properties:
        total_hours:
          type: number
          format: double
        billable_hours:
          type: number
          format: double
        non_billable_hours:
          type: number
          format: double
        total_cost:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
        entry_count:
          type: integer
      required:
        - billable_hours
        - entry_count
        - non_billable_hours
        - total_cost
        - total_hours
        - total_revenue
    MonthEndGetResponse:
      type: object
      description: Serializer for month-end GET response
      properties:
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/MonthEndJob'
        stock_job:
          $ref: '#/components/schemas/MonthEndStockJob'
      required:
        - jobs
        - stock_job
    MonthEndJob:
      type: object
      description: Serializer for special jobs in month-end processing
      properties:
        job_id:
          type: string
          format: uuid
        job_number:
          type: integer
        job_name:
          type: string
        client_name:
          type: string
        history:
          type: array
          items:
            $ref: '#/components/schemas/MonthEndJobHistory'
        total_hours:
          type: number
          format: double
        total_dollars:
          type: number
          format: double
      required:
        - client_name
        - history
        - job_id
        - job_name
        - job_number
        - total_dollars
        - total_hours
    MonthEndJobHistory:
      type: object
      description: Serializer for job history in month-end data
      properties:
        date:
          type: string
          format: date
        total_hours:
          type: number
          format: double
        total_dollars:
          type: number
          format: double
      required:
        - date
        - total_dollars
        - total_hours
    MonthEndPostRequest:
      type: object
      description: Serializer for month-end POST request
      properties:
        job_ids:
          type: array
          items:
            type: string
            format: uuid
          description: List of job IDs to process for month-end
      required:
        - job_ids
    MonthEndPostResponse:
      type: object
      description: Serializer for month-end POST response
      properties:
        processed:
          type: array
          items:
            type: string
            format: uuid
          description: List of successfully processed job IDs
        errors:
          type: array
          items:
            type: string
          description: List of error messages for failed processing
      required:
        - errors
        - processed
    MonthEndStockHistory:
      type: object
      description: Serializer for stock job history in month-end data
      properties:
        date:
          type: string
          format: date
        material_line_count:
          type: integer
        material_cost:
          type: number
          format: double
      required:
        - date
        - material_cost
        - material_line_count
    MonthEndStockJob:
      type: object
      description: Serializer for stock job in month-end processing
      properties:
        job_id:
          type: string
          format: uuid
        job_number:
          type: integer
        job_name:
          type: string
        history:
          type: array
          items:
            $ref: '#/components/schemas/MonthEndStockHistory'
      required:
        - history
        - job_id
        - job_name
        - job_number
    NullEnum:
      enum:
        - null
    PaginatedAppErrorList:
      type: object
      required:
        - count
        - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/AppError'
    PaginatedCompleteJobList:
      type: object
      required:
        - count
        - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/CompleteJob'
    PaginatedXeroErrorList:
      type: object
      required:
        - count
        - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/XeroError'
    PatchedAIProviderCreateUpdateRequest:
      type: object
      description: |-
        Serializer for creating and updating AIProvider instances.
        This serializer handles the `api_key` securely by making it write-only.
      properties:
        name:
          type: string
          minLength: 1
          description: Friendly name for this provider
          maxLength: 100
        provider_type:
          allOf:
            - $ref: '#/components/schemas/ProviderTypeEnum'
          description: |-
            Type of AI provider

            * `Claude` - Anthropic
            * `Gemini` - Google
            * `Mistral` - Mistral
        model_name:
          type: string
          description: Specific model name (e.g., gemini-2.5-flash-lite-preview-06-17)
          maxLength: 100
        default:
          type: boolean
          description: Use this provider as the default
        api_key:
          type: string
          writeOnly: true
          description: API Key for the provider. Leave blank to keep unchanged on
            update.
    PatchedClientContactRequest:
      type: object
      description: Serializer for ClientContact model.
      properties:
        client:
          type: string
          format: uuid
          description: The client this contact belongs to
        name:
          type: string
          minLength: 1
          description: Full name of the contact person
          maxLength: 255
        email:
          type: string
          format: email
          nullable: true
          description: Email address of the contact
          maxLength: 254
        phone:
          type: string
          nullable: true
          description: Phone number of the contact
          maxLength: 150
        position:
          type: string
          nullable: true
          description: Job title if it's helpful - else leave blank
          maxLength: 255
        is_primary:
          type: boolean
          description: Indicates if this is the primary contact for the client
        notes:
          type: string
          nullable: true
          description: Additional notes about this contact
    PatchedClientUpdateRequest:
      type: object
      description: Serializer for client update request
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        email:
          type: string
          format: email
        phone:
          type: string
          maxLength: 50
        address:
          type: string
        is_account_customer:
          type: boolean
    PatchedCompanyDefaultsRequest:
      type: object
      properties:
        company_acronym:
          type: string
          nullable: true
          description: Short acronym for the company (e.g., 'MSM' for Morris Sheetmetal)
          maxLength: 10
        is_primary:
          type: boolean
        time_markup:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        materials_markup:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        charge_out_rate:
          type: number
          format: double
          maximum: 10000
          minimum: -10000
          exclusiveMaximum: true
          exclusiveMinimum: true
        wage_rate:
          type: number
          format: double
          maximum: 10000
          minimum: -10000
          exclusiveMaximum: true
          exclusiveMinimum: true
        starting_job_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Helper field to set the starting job number based on the latest
            paper job
        starting_po_number:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          description: Helper field to set the starting purchase order number
        po_prefix:
          type: string
          minLength: 1
          description: Prefix for purchase order numbers (e.g., PO-, JO-)
          maxLength: 10
        master_quote_template_url:
          type: string
          format: uri
          nullable: true
          description: URL to the master Google Sheets quote template
          maxLength: 200
        master_quote_template_id:
          type: string
          nullable: true
          description: Google Sheets ID for the quote template
          maxLength: 100
        gdrive_quotes_folder_url:
          type: string
          format: uri
          nullable: true
          description: URL to the Google Drive folder for storing quotes
          maxLength: 200
        gdrive_quotes_folder_id:
          type: string
          nullable: true
          description: Google Drive folder ID for storing quotes
          maxLength: 100
        xero_tenant_id:
          type: string
          nullable: true
          description: The Xero tenant ID to use for this company
          maxLength: 100
        xero_shortcode:
          type: string
          nullable: true
          description: Xero organisation shortcode for deep linking (e.g., '!8-5Xl')
          maxLength: 20
        xero_payroll_calendar_name:
          type: string
          minLength: 1
          description: Name of Xero Payroll calendar to use (e.g., 'Weekly 2025')
          maxLength: 100
        xero_payroll_calendar_id:
          type: string
          format: uuid
          nullable: true
          description: Cached Xero Payroll calendar ID (set by xero --setup command)
        mon_start:
          type: string
          format: time
        mon_end:
          type: string
          format: time
        tue_start:
          type: string
          format: time
        tue_end:
          type: string
          format: time
        wed_start:
          type: string
          format: time
        wed_end:
          type: string
          format: time
        thu_start:
          type: string
          format: time
        thu_end:
          type: string
          format: time
        fri_start:
          type: string
          format: time
        fri_end:
          type: string
          format: time
        address_line1:
          type: string
          nullable: true
          description: Street address line 1
          maxLength: 255
        address_line2:
          type: string
          nullable: true
          description: Street address line 2 (optional)
          maxLength: 255
        suburb:
          type: string
          nullable: true
          description: Suburb (for NZ addresses)
          maxLength: 100
        city:
          type: string
          nullable: true
          description: City
          maxLength: 100
        post_code:
          type: string
          nullable: true
          description: Postal/ZIP code
          maxLength: 20
        country:
          type: string
          minLength: 1
          description: Country name
          maxLength: 100
        company_email:
          type: string
          format: email
          nullable: true
          description: Company contact email address
          maxLength: 254
        company_url:
          type: string
          format: uri
          nullable: true
          description: Company website URL
          maxLength: 200
        shop_client_name:
          type: string
          nullable: true
          description: Name of the internal shop client for tracking shop work (e.g.,
            'MSM (Shop)')
          maxLength: 255
        test_client_name:
          type: string
          nullable: true
          description: Name of the test client used for testing (e.g., 'ABC Carpet
            Cleaning TEST IGNORE'). This client's name is preserved during data backports.
          maxLength: 255
        billable_threshold_green:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Green Threshold of Billable Hours
          description: Daily billable hours above this threshold are marked in green
        billable_threshold_amber:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Amber Threshold of Billable Hours
          description: Daily billable hours between this threshold and the green threshold
            are marked in amber
        daily_gp_target:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Daily Goal of Gross Profit
          description: Daily gross profit goal in dolars
        shop_hours_target_percentage:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          title: Hours percentage goal in Shop Jobs
          description: Target percentage of hours worked in shop jobs
    PatchedCostLineCreateUpdateRequest:
      type: object
      description: Serializer for CostLine creation and updates - full write capabilities
      properties:
        kind:
          $ref: '#/components/schemas/Kind332Enum'
        desc:
          type: string
          description: Description of this cost line
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 10000000
          minimum: -10000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        accounting_date:
          type: string
          format: date
          description: The date this cost should be attributed to for accounting purposes
        ext_refs:
          type: object
          additionalProperties: {}
        meta:
          type: object
          additionalProperties: {}
        xero_pay_item:
          type: string
          format: uuid
          nullable: true
          description: The Xero pay item for this time entry (leave type, earnings
            rate, etc.)
    PatchedDjangoJobRequest:
      type: object
      properties:
        id:
          type: string
          minLength: 1
          description: Unique id for this job.
          maxLength: 255
        next_run_time:
          type: string
          format: date-time
          nullable: true
          description: Date and time at which this job is scheduled to be executed
            next.
    PatchedJobDeltaEnvelopeRequest:
      type: object
      description: Serializer that validates the delta envelope submitted by the frontend.
      properties:
        change_id:
          type: string
          format: uuid
        actor_id:
          type: string
          format: uuid
          nullable: true
        made_at:
          type: string
          format: date-time
          nullable: true
        job_id:
          type: string
          format: uuid
          nullable: true
        fields:
          type: array
          items:
            type: string
            minLength: 1
          minItems: 1
        before: {}
        after: {}
        before_checksum:
          type: string
          minLength: 1
        etag:
          type: string
          nullable: true
    PatchedJobQuoteChatUpdateRequest:
      type: object
      description: |-
        Serializer for updating existing JobQuoteChat messages.
        Used for PATCH operations, especially streaming response updates.
      properties:
        content:
          type: string
          minLength: 1
        metadata:
          description: Extra data like streaming status, processing time, etc.
    PatchedPurchaseOrderUpdateRequest:
      type: object
      description: Serializer for updating purchase orders.
      properties:
        supplier_id:
          type: string
          format: uuid
          nullable: true
        pickup_address_id:
          type: string
          format: uuid
          nullable: true
        reference:
          type: string
          maxLength: 255
        expected_delivery:
          type: string
          format: date
          nullable: true
        status:
          type: string
          maxLength: 50
        lines_to_delete:
          type: array
          items:
            type: string
            format: uuid
          description: List of line IDs to delete
        lines:
          type: array
          items:
            $ref: '#/components/schemas/PurchaseOrderLineUpdateRequest'
    PatchedStaffRequest:
      type: object
      description: Base serializer for Staff model with shared logic for create and
        update operations.
      properties:
        email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        first_name:
          type: string
          minLength: 1
          maxLength: 30
        last_name:
          type: string
          minLength: 1
          maxLength: 30
        preferred_name:
          type: string
          nullable: true
          maxLength: 30
        wage_rate:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        xero_user_id:
          type: string
          nullable: true
          maxLength: 255
        date_left:
          type: string
          format: date
          nullable: true
          description: Date staff member left employment (null for current employees)
        is_office_staff:
          type: boolean
        is_superuser:
          type: boolean
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
        password_needs_reset:
          type: boolean
        hours_mon:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Monday, 0 for non-working day
        hours_tue:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Tuesday, 0 for non-working day
        hours_wed:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Wednesday, 0 for non-working day
        hours_thu:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Thursday, 0 for non-working day
        hours_fri:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Friday, 0 for non-working day
        hours_sat:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Saturday, 0 for non-working day
        hours_sun:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Sunday, 0 for non-working day
        groups:
          type: array
          items:
            type: integer
          description: The groups this user belongs to. A user will get all permissions
            granted to each of their groups.
        user_permissions:
          type: array
          items:
            type: integer
          description: Specific permissions for this user.
        password:
          type: string
          writeOnly: true
          minLength: 1
          maxLength: 128
        icon:
          type: string
          format: binary
          writeOnly: true
          nullable: true
    PatchedStockItemRequest:
      type: object
      description: Serializer for individual stock items.
      properties:
        item_code:
          type: string
          nullable: true
          description: Xero Item Code
          maxLength: 255
        description:
          type: string
          minLength: 1
          description: Description of the stock item
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Current quantity of the stock item
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Cost per unit of the stock item
        unit_revenue:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Revenue per unit (what customer pays)
        date:
          type: string
          format: date-time
          description: Date the stock item was created
        source:
          allOf:
            - $ref: '#/components/schemas/SourceEnum'
          description: |-
            Origin of this stock item

            * `purchase_order` - Purchase Order Receipt
            * `split_from_stock` - Split/Offcut from Stock
            * `manual` - Manual Adjustment/Stocktake
            * `product_catalog` - Product Catalog
        location:
          type: string
          description: Where we are keeping this
        metal_type:
          description: |-
            Type of metal

            * `stainless_steel` - Stainless Steel
            * `mild_steel` - Mild Steel
            * `aluminum` - Aluminum
            * `brass` - Brass
            * `copper` - Copper
            * `titanium` - Titanium
            * `zinc` - Zinc
            * `galvanized` - Galvanized
            * `unspecified` - Unspecified
            * `other` - Other
          oneOf:
            - $ref: '#/components/schemas/MetalTypeEnum'
            - $ref: '#/components/schemas/BlankEnum'
        alloy:
          type: string
          nullable: true
          description: Alloy specification (e.g., 304, 6061)
          maxLength: 50
        specifics:
          type: string
          nullable: true
          description: Specific details (e.g., m8 countersunk socket screw)
          maxLength: 255
        is_active:
          type: boolean
          description: False when quantity reaches zero or item is fully consumed/transformed
    PatchedSupplierPickupAddressRequest:
      type: object
      description: Serializer for SupplierPickupAddress model (delivery/pickup locations).
      properties:
        client:
          type: string
          format: uuid
          description: The supplier this pickup address belongs to
        name:
          type: string
          minLength: 1
          description: Friendly name for this address (e.g., 'Main Warehouse', 'City
            Branch')
          maxLength: 255
        street:
          type: string
          minLength: 1
          description: Street address including unit/suite number
          maxLength: 255
        suburb:
          type: string
          nullable: true
          description: Suburb or neighbourhood (e.g., Thorndon, Northcote Point)
          maxLength: 100
        city:
          type: string
          minLength: 1
          description: City (e.g., Wellington, Auckland)
          maxLength: 100
        state:
          type: string
          nullable: true
          description: State or province
          maxLength: 100
        postal_code:
          type: string
          nullable: true
          description: Postal or ZIP code
          maxLength: 20
        country:
          type: string
          minLength: 1
          description: Country name
          maxLength: 100
        google_place_id:
          type: string
          nullable: true
          description: Google Place ID for this address
          maxLength: 255
        latitude:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Latitude coordinate
        longitude:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Longitude coordinate
        is_primary:
          type: boolean
          description: Indicates if this is the primary pickup address for the supplier
        notes:
          type: string
          nullable: true
          description: Additional notes (e.g., opening hours, access instructions)
    PatchedWorkshopTimesheetEntryUpdateRequest:
      type: object
      description: Serializer validating workshop timesheet update (PATCH) requests.
      properties:
        entry_id:
          type: string
          format: uuid
        job_id:
          type: string
          format: uuid
        accounting_date:
          type: string
          format: date
        hours:
          type: number
          format: double
          maximum: 100000
          minimum: 0.01
          exclusiveMaximum: true
        description:
          type: string
          nullable: true
          maxLength: 255
        start_time:
          type: string
          format: time
          nullable: true
        end_time:
          type: string
          format: time
          nullable: true
        is_billable:
          type: boolean
        wage_rate_multiplier:
          type: number
          format: double
          maximum: 100
          minimum: 0.1
          exclusiveMaximum: true
    PayRunListItem:
      type: object
      description: Serializer for a pay run in the list response.
      properties:
        id:
          type: string
          format: uuid
          description: Django primary key
        xero_id:
          type: string
          format: uuid
          description: Xero pay run ID
        period_start_date:
          type: string
          format: date
        period_end_date:
          type: string
          format: date
        payment_date:
          type: string
          format: date
        pay_run_status:
          type: string
        xero_url:
          type: string
          description: Deep link to pay run in Xero
      required:
        - id
        - pay_run_status
        - payment_date
        - period_end_date
        - period_start_date
        - xero_id
        - xero_url
    PayRunListResponse:
      type: object
      description: Response serializer for listing all pay runs.
      properties:
        pay_runs:
          type: array
          items:
            $ref: '#/components/schemas/PayRunListItem'
      required:
        - pay_runs
    PayRunSyncResponse:
      type: object
      description: Response payload after refreshing cached pay runs.
      properties:
        synced:
          type: boolean
        fetched:
          type: integer
          description: Number of pay runs fetched from Xero
        created:
          type: integer
          description: Number of new pay runs created locally
        updated:
          type: integer
          description: Number of existing pay runs updated
      required:
        - created
        - fetched
        - synced
        - updated
    PayRunSyncResponseRequest:
      type: object
      description: Response payload after refreshing cached pay runs.
      properties:
        synced:
          type: boolean
        fetched:
          type: integer
          description: Number of pay runs fetched from Xero
        created:
          type: integer
          description: Number of new pay runs created locally
        updated:
          type: integer
          description: Number of existing pay runs updated
      required:
        - created
        - fetched
        - synced
        - updated
    PostWeekToXeroRequest:
      type: object
      description: Request serializer for posting weekly timesheets to Xero
      properties:
        staff_ids:
          type: array
          items:
            type: string
            format: uuid
          description: List of staff member UUIDs
        week_start_date:
          type: string
          format: date
          description: Monday of the week (YYYY-MM-DD)
      required:
        - staff_ids
        - week_start_date
    PreviewQuoteResponse:
      type: object
      description: Serializer for preview quote response.
      properties:
        success:
          type: boolean
        draft_lines:
          type: array
          items:
            $ref: '#/components/schemas/DraftLine'
        changes:
          $ref: '#/components/schemas/QuoteChanges'
        message:
          type: string
        can_proceed:
          type: boolean
          default: false
        validation_report:
          allOf:
            - $ref: '#/components/schemas/ValidationReport'
          nullable: true
        diff_preview:
          allOf:
            - $ref: '#/components/schemas/DiffPreview'
          nullable: true
    PreviewQuoteResponseRequest:
      type: object
      description: Serializer for preview quote response.
      properties:
        success:
          type: boolean
        draft_lines:
          type: array
          items:
            $ref: '#/components/schemas/DraftLineRequest'
        changes:
          $ref: '#/components/schemas/QuoteChangesRequest'
        message:
          type: string
          minLength: 1
        can_proceed:
          type: boolean
          default: false
        validation_report:
          allOf:
            - $ref: '#/components/schemas/ValidationReportRequest'
          nullable: true
        diff_preview:
          allOf:
            - $ref: '#/components/schemas/DiffPreviewRequest'
          nullable: true
    PricingMethodologyEnum:
      enum:
        - time_materials
        - fixed_price
      type: string
      description: |-
        * `time_materials` - Time & Materials
        * `fixed_price` - Fixed Price
    ProductMapping:
      type: object
      description: Serializer for ProductParsingMapping model.
      properties:
        id:
          type: string
          format: uuid
        input_hash:
          type: string
        input_data: {}
        derived_key:
          type: string
          nullable: true
        mapped_item_code:
          type: string
          nullable: true
        mapped_description:
          type: string
          nullable: true
        mapped_metal_type:
          type: string
          nullable: true
        mapped_alloy:
          type: string
          nullable: true
        mapped_specifics:
          type: string
          nullable: true
        mapped_dimensions:
          type: string
          nullable: true
        mapped_unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        mapped_price_unit:
          type: string
          nullable: true
        parser_version:
          type: string
          nullable: true
        parser_confidence:
          type: number
          format: double
          maximum: 10
          minimum: -10
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        is_validated:
          type: boolean
        validated_at:
          type: string
          format: date-time
          nullable: true
        validation_notes:
          type: string
          nullable: true
        item_code_is_in_xero:
          type: boolean
        created_at:
          type: string
          format: date-time
      required:
        - created_at
        - derived_key
        - id
        - input_data
        - input_hash
        - is_validated
        - item_code_is_in_xero
        - mapped_alloy
        - mapped_description
        - mapped_dimensions
        - mapped_item_code
        - mapped_metal_type
        - mapped_price_unit
        - mapped_specifics
        - mapped_unit_cost
        - parser_confidence
        - parser_version
        - validated_at
        - validation_notes
    ProductMappingListResponse:
      type: object
      description: Serializer for product mapping list response.
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ProductMapping'
        total_count:
          type: integer
        validated_count:
          type: integer
        unvalidated_count:
          type: integer
      required:
        - items
        - total_count
        - unvalidated_count
        - validated_count
    ProductMappingValidateRequest:
      type: object
      description: Serializer for product mapping validation request.
      properties:
        mapped_item_code:
          type: string
        mapped_description:
          type: string
        mapped_metal_type:
          type: string
        mapped_alloy:
          type: string
        mapped_specifics:
          type: string
        mapped_dimensions:
          type: string
        mapped_unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        mapped_price_unit:
          type: string
        validation_notes:
          type: string
    ProductMappingValidateResponse:
      type: object
      description: Serializer for product mapping validation response.
      properties:
        success:
          type: boolean
        message:
          type: string
        updated_products_count:
          type: integer
      required:
        - message
        - success
    ProviderTypeEnum:
      enum:
        - Claude
        - Gemini
        - Mistral
      type: string
      description: |-
        * `Claude` - Anthropic
        * `Gemini` - Google
        * `Mistral` - Mistral
    PurchaseOrderAllocationsResponse:
      type: object
      description: Serializer for purchase order allocations response.
      properties:
        po_id:
          type: string
          format: uuid
        allocations:
          type: object
          additionalProperties:
            type: array
            items:
              $ref: '#/components/schemas/AllocationItem'
          description: Dictionary where keys are PurchaseOrderLine IDs and values
            are lists of allocations
      required:
        - allocations
        - po_id
    PurchaseOrderCreate:
      type: object
      description: Serializer for creating purchase orders.
      properties:
        supplier_id:
          type: string
          format: uuid
          nullable: true
        pickup_address_id:
          type: string
          format: uuid
          nullable: true
        reference:
          type: string
          maxLength: 255
        order_date:
          type: string
          format: date
          nullable: true
        expected_delivery:
          type: string
          format: date
          nullable: true
        lines:
          type: array
          items:
            $ref: '#/components/schemas/PurchaseOrderLineCreate'
    PurchaseOrderCreateRequest:
      type: object
      description: Serializer for creating purchase orders.
      properties:
        supplier_id:
          type: string
          format: uuid
          nullable: true
        pickup_address_id:
          type: string
          format: uuid
          nullable: true
        reference:
          type: string
          maxLength: 255
        order_date:
          type: string
          format: date
          nullable: true
        expected_delivery:
          type: string
          format: date
          nullable: true
        lines:
          type: array
          items:
            $ref: '#/components/schemas/PurchaseOrderLineCreateRequest'
    PurchaseOrderDetail:
      type: object
      description: Return purchase order details with related lines.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        po_number:
          type: string
          maxLength: 50
        reference:
          type: string
          nullable: true
          description: Optional reference for the purchase order
          maxLength: 100
        status:
          $ref: '#/components/schemas/PurchaseOrderDetailStatusEnum'
        order_date:
          type: string
          format: date
        expected_delivery:
          type: string
          format: date
          nullable: true
        online_url:
          type: string
          format: uri
          nullable: true
          maxLength: 500
        xero_id:
          type: string
          format: uuid
          nullable: true
        pickup_address_id:
          type: string
          format: uuid
          nullable: true
          description: Delivery/pickup address for this purchase order
          readOnly: true
        supplier:
          type: string
          readOnly: true
        supplier_id:
          type: string
          nullable: true
          readOnly: true
        supplier_has_xero_id:
          type: boolean
          readOnly: true
        lines:
          type: array
          items:
            $ref: '#/components/schemas/PurchaseOrderLine'
        pickup_address:
          allOf:
            - $ref: '#/components/schemas/SupplierPickupAddress'
          readOnly: true
          nullable: true
      required:
        - id
        - lines
        - pickup_address
        - pickup_address_id
        - po_number
        - supplier
        - supplier_has_xero_id
        - supplier_id
    PurchaseOrderDetailStatusEnum:
      enum:
        - draft
        - submitted
        - partially_received
        - fully_received
        - deleted
      type: string
      description: |-
        * `draft` - Draft
        * `submitted` - Submitted to Supplier
        * `partially_received` - Partially Received
        * `fully_received` - Fully Received
        * `deleted` - Deleted
    PurchaseOrderEmailRequest:
      type: object
      description: Serializer for purchase order email generation request
      properties:
        recipient_email:
          type: string
          format: email
          minLength: 1
        message:
          type: string
          maxLength: 1000
    PurchaseOrderEmailResponse:
      type: object
      description: Serializer for purchase order email generation response
      properties:
        success:
          type: boolean
        email_subject:
          type: string
        email_body:
          type: string
        pdf_url:
          type: string
        message:
          type: string
      required:
        - success
    PurchaseOrderEvent:
      type: object
      description: Serializer for PurchaseOrderEvent model - read-only for frontend.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        description:
          type: string
        timestamp:
          type: string
          format: date-time
        staff:
          type: string
          readOnly: true
      required:
        - description
        - id
        - staff
    PurchaseOrderEventCreateRequest:
      type: object
      description: Serializer for purchase order event creation request.
      properties:
        description:
          type: string
          minLength: 1
          maxLength: 500
      required:
        - description
    PurchaseOrderEventCreateResponse:
      type: object
      description: Serializer for purchase order event creation response.
      properties:
        success:
          type: boolean
        event:
          $ref: '#/components/schemas/PurchaseOrderEvent'
      required:
        - event
        - success
    PurchaseOrderEventsResponse:
      type: object
      description: Serializer for purchase order events list response.
      properties:
        events:
          type: array
          items:
            $ref: '#/components/schemas/PurchaseOrderEvent'
      required:
        - events
    PurchaseOrderJob:
      type: object
      description: Serializer for job info within a purchase order listing.
      properties:
        job_number:
          type: string
        name:
          type: string
        client:
          type: string
      required:
        - client
        - job_number
        - name
    PurchaseOrderLine:
      type: object
      description: Serializer for PurchaseOrderLine model.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        description:
          type: string
          maxLength: 200
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        dimensions:
          type: string
          nullable: true
          description: Dimensions such as length, width, height, etc.
          maxLength: 255
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        price_tbc:
          type: boolean
          description: If true, the price is to be confirmed and unit cost will be
            None
        supplier_item_code:
          type: string
          nullable: true
          description: Supplier's own item code/SKU
          maxLength: 50
        item_code:
          type: string
          nullable: true
          description: Internal item code for Xero integration
          maxLength: 50
        received_quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Total quantity received against this line
        metal_type:
          nullable: true
          oneOf:
            - $ref: '#/components/schemas/MetalTypeEnum'
            - $ref: '#/components/schemas/BlankEnum'
            - $ref: '#/components/schemas/NullEnum'
        alloy:
          type: string
          nullable: true
          description: Alloy specification (e.g., 304, 6061)
          maxLength: 50
        specifics:
          type: string
          nullable: true
          description: Specific details (e.g., m8 countersunk socket screw)
          maxLength: 255
        location:
          type: string
          nullable: true
          description: Where this item will be stored
          maxLength: 255
        job_id:
          type: string
          format: uuid
          readOnly: true
          nullable: true
      required:
        - description
        - id
        - job_id
        - quantity
    PurchaseOrderLineCreate:
      type: object
      description: Serializer for creating purchase order lines.
      properties:
        job_id:
          type: string
          format: uuid
          nullable: true
        description:
          type: string
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          default: 0.00
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        price_tbc:
          type: boolean
          default: false
        item_code:
          type: string
          maxLength: 100
        metal_type:
          type: string
          maxLength: 100
        alloy:
          type: string
          maxLength: 100
        specifics:
          type: string
          maxLength: 255
        location:
          type: string
          maxLength: 255
        dimensions:
          type: string
          maxLength: 255
    PurchaseOrderLineCreateRequest:
      type: object
      description: Serializer for creating purchase order lines.
      properties:
        job_id:
          type: string
          format: uuid
          nullable: true
        description:
          type: string
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          default: 0.00
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        price_tbc:
          type: boolean
          default: false
        item_code:
          type: string
          maxLength: 100
        metal_type:
          type: string
          maxLength: 100
        alloy:
          type: string
          maxLength: 100
        specifics:
          type: string
          maxLength: 255
        location:
          type: string
          maxLength: 255
        dimensions:
          type: string
          maxLength: 255
    PurchaseOrderLineUpdate:
      type: object
      description: Serializer for updating purchase order lines (includes ID).
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        job_id:
          type: string
          format: uuid
          nullable: true
        description:
          type: string
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          default: 0.00
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        price_tbc:
          type: boolean
          default: false
        item_code:
          type: string
          maxLength: 100
        metal_type:
          type: string
          maxLength: 100
        alloy:
          type: string
          maxLength: 100
        specifics:
          type: string
          maxLength: 255
        location:
          type: string
          maxLength: 255
        dimensions:
          type: string
          maxLength: 255
    PurchaseOrderLineUpdateRequest:
      type: object
      description: Serializer for updating purchase order lines (includes ID).
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        job_id:
          type: string
          format: uuid
          nullable: true
        description:
          type: string
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          default: 0.00
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        price_tbc:
          type: boolean
          default: false
        item_code:
          type: string
          maxLength: 100
        metal_type:
          type: string
          maxLength: 100
        alloy:
          type: string
          maxLength: 100
        specifics:
          type: string
          maxLength: 255
        location:
          type: string
          maxLength: 255
        dimensions:
          type: string
          maxLength: 255
    PurchaseOrderList:
      type: object
      description: Serializer for listing purchase orders from service data.
      properties:
        id:
          type: string
          format: uuid
        po_number:
          type: string
        status:
          type: string
        order_date:
          type: string
          format: date
        supplier:
          type: string
        supplier_id:
          type: string
          format: uuid
          nullable: true
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/PurchaseOrderJob'
      required:
        - id
        - jobs
        - order_date
        - po_number
        - status
        - supplier
        - supplier_id
    PurchaseOrderUpdate:
      type: object
      description: Serializer for updating purchase orders.
      properties:
        supplier_id:
          type: string
          format: uuid
          nullable: true
        pickup_address_id:
          type: string
          format: uuid
          nullable: true
        reference:
          type: string
          maxLength: 255
        expected_delivery:
          type: string
          format: date
          nullable: true
        status:
          type: string
          maxLength: 50
        lines_to_delete:
          type: array
          items:
            type: string
            format: uuid
          description: List of line IDs to delete
        lines:
          type: array
          items:
            $ref: '#/components/schemas/PurchaseOrderLineUpdate'
    PurchasingErrorResponse:
      type: object
      description: Serializer for purchasing error responses
      properties:
        error:
          type: string
          description: Error message
        details:
          type: string
          description: Optional details about the failure
      required:
        - error
    PurchasingJobsResponse:
      type: object
      description: Serializer for PurchasingJobsAPIView response
      properties:
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/JobForPurchasing'
        total_count:
          type: integer
      required:
        - jobs
        - total_count
    Quote:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        xero_id:
          type: string
          format: uuid
        status:
          $ref: '#/components/schemas/Status7aeEnum'
        date:
          type: string
          format: date
        total_excl_tax:
          type: number
          format: double
        total_incl_tax:
          type: number
          format: double
        online_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
      required:
        - date
        - id
        - total_excl_tax
        - total_incl_tax
        - xero_id
    QuoteChanges:
      type: object
      description: Serializer for quote changes data.
      properties:
        additions:
          type: array
          items:
            $ref: '#/components/schemas/DraftLine'
        updates:
          type: array
          items:
            $ref: '#/components/schemas/DraftLine'
        deletions:
          type: array
          items:
            $ref: '#/components/schemas/DraftLine'
      required:
        - additions
        - deletions
        - updates
    QuoteChangesRequest:
      type: object
      description: Serializer for quote changes data.
      properties:
        additions:
          type: array
          items:
            $ref: '#/components/schemas/DraftLineRequest'
        updates:
          type: array
          items:
            $ref: '#/components/schemas/DraftLineRequest'
        deletions:
          type: array
          items:
            $ref: '#/components/schemas/DraftLineRequest'
      required:
        - additions
        - deletions
        - updates
    QuoteImportStatusResponse:
      type: object
      description: Serializer for quote import status response
      properties:
        job_id:
          type: string
        job_name:
          type: string
        has_quote:
          type: boolean
        quote:
          $ref: '#/components/schemas/CostSet'
        revision:
          type: integer
        created:
          type: string
          format: date-time
        summary: {}
      required:
        - has_quote
        - job_id
        - job_name
    QuoteRevisionRequest:
      type: object
      description: Serializer for quote revision request - validates input data
      properties:
        reason:
          type: string
          minLength: 1
          description: Optional reason for creating a new quote revision
          maxLength: 500
    QuoteRevisionResponse:
      type: object
      description: Serializer for quote revision response
      properties:
        success:
          type: boolean
        message:
          type: string
        quote_revision:
          type: integer
        archived_cost_lines_count:
          type: integer
        job_id:
          type: string
        error:
          type: string
      required:
        - archived_cost_lines_count
        - job_id
        - message
        - quote_revision
        - success
    QuoteRevisionsList:
      type: object
      description: Serializer for listing quote revisions
      properties:
        job_id:
          type: string
        job_number:
          type: integer
        current_cost_set_rev:
          type: integer
        total_revisions:
          type: integer
        revisions:
          type: array
          items:
            type: object
            additionalProperties: {}
          description: List of archived quote revisions with their data
      required:
        - current_cost_set_rev
        - job_id
        - job_number
        - revisions
        - total_revisions
    QuoteSpreadsheet:
      type: object
      description: |-
        Serializer for QuoteSpreadsheet model.

        Provides clean JSON representation for REST endpoints with
        job information for context.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        sheet_id:
          type: string
          description: Google Drive file ID
          maxLength: 100
        sheet_url:
          type: string
          format: uri
          nullable: true
          maxLength: 500
        tab:
          type: string
          nullable: true
          maxLength: 100
        job_id:
          type: string
          readOnly: true
        job_number:
          type: integer
          readOnly: true
        job_name:
          type: string
          readOnly: true
      required:
        - id
        - job_id
        - job_name
        - job_number
        - sheet_id
    RoleEnum:
      enum:
        - user
        - assistant
      type: string
      description: |-
        * `user` - User
        * `assistant` - Assistant
    SOPGenerateRequestRequest:
      type: object
      description: Request body for generating a new SOP.
      properties:
        title:
          type: string
          minLength: 1
        description:
          type: string
          minLength: 1
          default: ''
        document_number:
          type: string
          minLength: 1
          default: ''
      required:
        - title
    SWPGenerateRequestRequest:
      type: object
      description: Request serializer for generating a new SWP (standalone).
      properties:
        document_number:
          type: string
          description: Document number (e.g., '307' for section 3, doc 7)
          maxLength: 50
        title:
          type: string
          minLength: 1
          description: Name of the safe work procedure
          maxLength: 255
        description:
          type: string
          minLength: 1
          description: Scope and description of the procedure
        site_location:
          type: string
          description: Optional site location for the procedure
      required:
        - description
        - title
    SafetyDocument:
      type: object
      description: |-
        Main serializer for SafetyDocument model.

        Returns document metadata and Google Docs URL for editing.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        document_type:
          allOf:
            - $ref: '#/components/schemas/DocumentTypeEnum'
          readOnly: true
          description: |-
            Type of safety document (JSA or SWP)

            * `jsa` - Job Safety Analysis
            * `swp` - Safe Work Procedure
            * `sop` - Standard Operating Procedure
        document_number:
          type: string
          nullable: true
          description: Document number for SWPs (e.g., '307' for section 3, doc 7)
          maxLength: 50
        job_id:
          type: string
          format: uuid
          readOnly: true
          nullable: true
          description: Linked job ID (null for SWPs)
        job_number:
          type: string
          readOnly: true
          nullable: true
          description: Linked job number (null for SWPs)
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        title:
          type: string
          description: Job name for JSA, procedure name for SWP
          maxLength: 255
        company_name:
          type: string
          maxLength: 255
        site_location:
          type: string
          description: Work site location (optional for SWPs)
          maxLength: 500
        google_doc_id:
          type: string
          readOnly: true
          description: Google Docs document ID
        google_doc_url:
          type: string
          format: uri
          readOnly: true
          description: URL to edit the document in Google Docs
      required:
        - company_name
        - created_at
        - document_type
        - google_doc_id
        - google_doc_url
        - id
        - job_id
        - job_number
        - title
        - updated_at
    SafetyDocumentContentResponse:
      type: object
      description: Response when reading safety document content from Google Docs.
      properties:
        title:
          type: string
        document_type:
          type: string
        description:
          type: string
        site_location:
          type: string
        ppe_requirements:
          type: array
          items:
            type: string
        tasks:
          type: array
          items: {}
        additional_notes:
          type: string
        raw_text:
          type: string
      required:
        - additional_notes
        - description
        - document_type
        - ppe_requirements
        - raw_text
        - site_location
        - tasks
        - title
    SafetyDocumentContentUpdateRequest:
      type: object
      description: Request body for updating safety document content in Google Docs.
      properties:
        title:
          type: string
          minLength: 1
        site_location:
          type: string
          minLength: 1
        description:
          type: string
          minLength: 1
        ppe_requirements:
          type: array
          items:
            type: string
            minLength: 1
        tasks:
          type: array
          items: {}
        additional_notes:
          type: string
          minLength: 1
    SafetyDocumentList:
      type: object
      description: Lightweight serializer for listing safety documents.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        document_type:
          allOf:
            - $ref: '#/components/schemas/DocumentTypeEnum'
          description: |-
            Type of safety document (JSA or SWP)

            * `jsa` - Job Safety Analysis
            * `swp` - Safe Work Procedure
            * `sop` - Standard Operating Procedure
        document_number:
          type: string
          nullable: true
          description: Document number for SWPs (e.g., '307' for section 3, doc 7)
          maxLength: 50
        job_number:
          type: string
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        title:
          type: string
          description: Job name for JSA, procedure name for SWP
          maxLength: 255
        site_location:
          type: string
          description: Work site location (optional for SWPs)
          maxLength: 500
        google_doc_url:
          type: string
          format: uri
          description: URL to edit the document in Google Docs
          maxLength: 200
      required:
        - created_at
        - document_type
        - id
        - job_number
        - title
        - updated_at
    SettingsField:
      type: object
      description: Serializer for individual field metadata.
      properties:
        key:
          type: string
        label:
          type: string
        type:
          type: string
        required:
          type: boolean
        help_text:
          type: string
        section:
          type: string
        read_only:
          type: boolean
      required:
        - help_text
        - key
        - label
        - read_only
        - required
        - section
        - type
    SettingsSection:
      type: object
      description: Serializer for a section containing fields.
      properties:
        key:
          type: string
        title:
          type: string
        order:
          type: integer
        fields:
          type: array
          items:
            $ref: '#/components/schemas/SettingsField'
      required:
        - fields
        - key
        - order
        - title
    SourceEnum:
      enum:
        - purchase_order
        - split_from_stock
        - manual
        - product_catalog
      type: string
      description: |-
        * `purchase_order` - Purchase Order Receipt
        * `split_from_stock` - Split/Offcut from Stock
        * `manual` - Manual Adjustment/Stocktake
        * `product_catalog` - Product Catalog
    SpeedQualityTradeoffEnum:
      enum:
        - fast
        - normal
        - quality
      type: string
      description: |-
        * `fast` - Fast - Prioritize Speed
        * `normal` - Normal - Balanced
        * `quality` - Quality - Prioritize Quality
    Staff:
      type: object
      description: Base serializer for Staff model with shared logic for create and
        update operations.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        email:
          type: string
          format: email
          maxLength: 254
        first_name:
          type: string
          maxLength: 30
        last_name:
          type: string
          maxLength: 30
        preferred_name:
          type: string
          nullable: true
          maxLength: 30
        wage_rate:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        xero_user_id:
          type: string
          nullable: true
          maxLength: 255
        date_left:
          type: string
          format: date
          nullable: true
          description: Date staff member left employment (null for current employees)
        is_office_staff:
          type: boolean
        is_superuser:
          type: boolean
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
        password_needs_reset:
          type: boolean
        hours_mon:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Monday, 0 for non-working day
        hours_tue:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Tuesday, 0 for non-working day
        hours_wed:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Wednesday, 0 for non-working day
        hours_thu:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Thursday, 0 for non-working day
        hours_fri:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Friday, 0 for non-working day
        hours_sat:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Saturday, 0 for non-working day
        hours_sun:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Sunday, 0 for non-working day
        date_joined:
          type: string
          format: date-time
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        last_login:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        groups:
          type: array
          items:
            type: integer
          description: The groups this user belongs to. A user will get all permissions
            granted to each of their groups.
        user_permissions:
          type: array
          items:
            type: integer
          description: Specific permissions for this user.
        icon_url:
          type: string
          nullable: true
          readOnly: true
      required:
        - created_at
        - date_joined
        - email
        - first_name
        - icon_url
        - id
        - last_login
        - last_name
        - updated_at
    StaffCreateRequest:
      type: object
      description: Base serializer for Staff model with shared logic for create and
        update operations.
      properties:
        email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        first_name:
          type: string
          minLength: 1
          maxLength: 30
        last_name:
          type: string
          minLength: 1
          maxLength: 30
        preferred_name:
          type: string
          nullable: true
          maxLength: 30
        wage_rate:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        xero_user_id:
          type: string
          nullable: true
          maxLength: 255
        date_left:
          type: string
          format: date
          nullable: true
          description: Date staff member left employment (null for current employees)
        is_office_staff:
          type: boolean
        is_superuser:
          type: boolean
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
        password_needs_reset:
          type: boolean
        hours_mon:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Monday, 0 for non-working day
        hours_tue:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Tuesday, 0 for non-working day
        hours_wed:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Wednesday, 0 for non-working day
        hours_thu:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Thursday, 0 for non-working day
        hours_fri:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Friday, 0 for non-working day
        hours_sat:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Saturday, 0 for non-working day
        hours_sun:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Sunday, 0 for non-working day
        date_joined:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
        last_login:
          type: string
          format: date-time
          nullable: true
        groups:
          type: array
          items:
            type: integer
          description: The groups this user belongs to. A user will get all permissions
            granted to each of their groups.
        user_permissions:
          type: array
          items:
            type: integer
          description: Specific permissions for this user.
        password:
          type: string
          writeOnly: true
          minLength: 1
          maxLength: 128
        icon:
          type: string
          format: binary
          writeOnly: true
          nullable: true
      required:
        - email
        - first_name
        - last_name
        - password
    StaffDailyData:
      type: object
      description: Serializer for individual staff daily timesheet data
      properties:
        staff_id:
          type: string
        staff_name:
          type: string
        staff_initials:
          type: string
        icon_url:
          type: string
          nullable: true
        scheduled_hours:
          type: number
          format: double
        actual_hours:
          type: number
          format: double
        billable_hours:
          type: number
          format: double
        non_billable_hours:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
        total_cost:
          type: number
          format: double
        status:
          type: string
        status_class:
          type: string
        billable_percentage:
          type: number
          format: double
        completion_percentage:
          type: number
          format: double
        job_breakdown:
          type: array
          items:
            $ref: '#/components/schemas/JobBreakdown'
        entry_count:
          type: integer
        alerts:
          type: array
          items:
            type: string
        is_weekend:
          type: boolean
          default: false
        weekend_enabled:
          type: boolean
          default: false
      required:
        - actual_hours
        - alerts
        - billable_hours
        - billable_percentage
        - completion_percentage
        - entry_count
        - icon_url
        - job_breakdown
        - non_billable_hours
        - scheduled_hours
        - staff_id
        - staff_initials
        - staff_name
        - status
        - status_class
        - total_cost
        - total_revenue
    StaffListResponse:
      type: object
      description: Serializer for staff list API response
      properties:
        staff:
          type: array
          items:
            $ref: '#/components/schemas/ModernStaff'
        total_count:
          type: integer
      required:
        - staff
        - total_count
    StaffPerformanceJobBreakdown:
      type: object
      description: Serializer for job breakdown data in staff performance
      properties:
        job_id:
          type: string
        job_number:
          type: integer
        job_name:
          type: string
        client_name:
          type: string
        billable_hours:
          type: number
          format: double
        non_billable_hours:
          type: number
          format: double
        total_hours:
          type: number
          format: double
        revenue:
          type: number
          format: double
        cost:
          type: number
          format: double
        profit:
          type: number
          format: double
        revenue_per_hour:
          type: number
          format: double
      required:
        - billable_hours
        - client_name
        - cost
        - job_id
        - job_name
        - job_number
        - non_billable_hours
        - profit
        - revenue
        - revenue_per_hour
        - total_hours
    StaffPerformancePeriodSummary:
      type: object
      description: Serializer for period summary in staff performance report
      properties:
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        total_staff:
          type: integer
        period_description:
          type: string
      required:
        - end_date
        - period_description
        - start_date
        - total_staff
    StaffPerformanceResponse:
      type: object
      description: Unified serializer for staff performance report responses
      properties:
        team_averages:
          $ref: '#/components/schemas/StaffPerformanceTeamAverages'
        staff:
          type: array
          items:
            $ref: '#/components/schemas/StaffPerformanceStaffData'
        period_summary:
          $ref: '#/components/schemas/StaffPerformancePeriodSummary'
      required:
        - period_summary
        - staff
        - team_averages
    StaffPerformanceStaffData:
      type: object
      description: Serializer for individual staff performance data
      properties:
        staff_id:
          type: string
        name:
          type: string
        total_hours:
          type: number
          format: double
        billable_hours:
          type: number
          format: double
        billable_percentage:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
        total_cost:
          type: number
          format: double
        profit:
          type: number
          format: double
        revenue_per_hour:
          type: number
          format: double
        profit_per_hour:
          type: number
          format: double
        jobs_worked:
          type: integer
        job_breakdown:
          type: array
          items:
            $ref: '#/components/schemas/StaffPerformanceJobBreakdown'
      required:
        - billable_hours
        - billable_percentage
        - jobs_worked
        - name
        - profit
        - profit_per_hour
        - revenue_per_hour
        - staff_id
        - total_cost
        - total_hours
        - total_revenue
    StaffPerformanceTeamAverages:
      type: object
      description: Serializer for team average metrics
      properties:
        billable_percentage:
          type: number
          format: double
        revenue_per_hour:
          type: number
          format: double
        profit_per_hour:
          type: number
          format: double
        jobs_per_person:
          type: number
          format: double
        total_hours:
          type: number
          format: double
        billable_hours:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
        total_profit:
          type: number
          format: double
      required:
        - billable_hours
        - billable_percentage
        - jobs_per_person
        - profit_per_hour
        - revenue_per_hour
        - total_hours
        - total_profit
        - total_revenue
    StaffRequest:
      type: object
      description: Base serializer for Staff model with shared logic for create and
        update operations.
      properties:
        email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        first_name:
          type: string
          minLength: 1
          maxLength: 30
        last_name:
          type: string
          minLength: 1
          maxLength: 30
        preferred_name:
          type: string
          nullable: true
          maxLength: 30
        wage_rate:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        xero_user_id:
          type: string
          nullable: true
          maxLength: 255
        date_left:
          type: string
          format: date
          nullable: true
          description: Date staff member left employment (null for current employees)
        is_office_staff:
          type: boolean
        is_superuser:
          type: boolean
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
        password_needs_reset:
          type: boolean
        hours_mon:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Monday, 0 for non-working day
        hours_tue:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Tuesday, 0 for non-working day
        hours_wed:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Wednesday, 0 for non-working day
        hours_thu:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Thursday, 0 for non-working day
        hours_fri:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Friday, 0 for non-working day
        hours_sat:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Saturday, 0 for non-working day
        hours_sun:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Standard hours for Sunday, 0 for non-working day
        groups:
          type: array
          items:
            type: integer
          description: The groups this user belongs to. A user will get all permissions
            granted to each of their groups.
        user_permissions:
          type: array
          items:
            type: integer
          description: Specific permissions for this user.
        password:
          type: string
          writeOnly: true
          minLength: 1
          maxLength: 128
        icon:
          type: string
          format: binary
          writeOnly: true
          nullable: true
      required:
        - email
        - first_name
        - last_name
    StandardError:
      type: object
      description: Standard serialiser for error responses
      properties:
        error:
          type: string
        details: {}
      required:
        - error
    Status1beEnum:
      enum:
        - DRAFT
        - SUBMITTED
        - AUTHORISED
        - DELETED
        - VOIDED
        - PAID
      type: string
      description: |-
        * `DRAFT` - Draft
        * `SUBMITTED` - Submitted
        * `AUTHORISED` - Authorised
        * `DELETED` - Deleted
        * `VOIDED` - Voided
        * `PAID` - Paid
    Status7aeEnum:
      enum:
        - DRAFT
        - SENT
        - DECLINED
        - ACCEPTED
        - INVOICED
        - DELETED
      type: string
      description: |-
        * `DRAFT` - Draft
        * `SENT` - Sent
        * `DECLINED` - Declined
        * `ACCEPTED` - Accepted
        * `INVOICED` - Invoiced
        * `DELETED` - Deleted
    Status7b9Enum:
      enum:
        - draft
        - awaiting_approval
        - approved
        - in_progress
        - unusual
        - recently_completed
        - special
        - archived
      type: string
      description: |-
        * `draft` - Draft
        * `awaiting_approval` - Awaiting Approval
        * `approved` - Approved
        * `in_progress` - In Progress
        * `unusual` - Unusual
        * `recently_completed` - Recently Completed
        * `special` - Special
        * `archived` - Archived
    StockConsumeRequest:
      type: object
      description: Serializer for stock consumption request
      properties:
        job_id:
          type: string
          format: uuid
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: 0
          exclusiveMaximum: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
      required:
        - job_id
        - quantity
    StockConsumeResponse:
      type: object
      description: Serializer for stock consumption response
      properties:
        success:
          type: boolean
        message:
          type: string
        remaining_quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        line:
          $ref: '#/components/schemas/CostLine'
      required:
        - line
        - success
    StockItem:
      type: object
      description: Serializer for individual stock items.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        item_code:
          type: string
          nullable: true
          description: Xero Item Code
          maxLength: 255
        description:
          type: string
          description: Description of the stock item
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Current quantity of the stock item
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Cost per unit of the stock item
        unit_revenue:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Revenue per unit (what customer pays)
        date:
          type: string
          format: date-time
          description: Date the stock item was created
        source:
          allOf:
            - $ref: '#/components/schemas/SourceEnum'
          description: |-
            Origin of this stock item

            * `purchase_order` - Purchase Order Receipt
            * `split_from_stock` - Split/Offcut from Stock
            * `manual` - Manual Adjustment/Stocktake
            * `product_catalog` - Product Catalog
        location:
          type: string
          description: Where we are keeping this
        metal_type:
          description: |-
            Type of metal

            * `stainless_steel` - Stainless Steel
            * `mild_steel` - Mild Steel
            * `aluminum` - Aluminum
            * `brass` - Brass
            * `copper` - Copper
            * `titanium` - Titanium
            * `zinc` - Zinc
            * `galvanized` - Galvanized
            * `unspecified` - Unspecified
            * `other` - Other
          oneOf:
            - $ref: '#/components/schemas/MetalTypeEnum'
            - $ref: '#/components/schemas/BlankEnum'
        alloy:
          type: string
          nullable: true
          description: Alloy specification (e.g., 304, 6061)
          maxLength: 50
        specifics:
          type: string
          nullable: true
          description: Specific details (e.g., m8 countersunk socket screw)
          maxLength: 255
        is_active:
          type: boolean
          description: False when quantity reaches zero or item is fully consumed/transformed
        job_id:
          type: string
          format: uuid
          readOnly: true
          nullable: true
      required:
        - description
        - id
        - job_id
        - quantity
        - source
        - unit_cost
    StockItemRequest:
      type: object
      description: Serializer for individual stock items.
      properties:
        item_code:
          type: string
          nullable: true
          description: Xero Item Code
          maxLength: 255
        description:
          type: string
          minLength: 1
          description: Description of the stock item
          maxLength: 255
        quantity:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Current quantity of the stock item
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          description: Cost per unit of the stock item
        unit_revenue:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Revenue per unit (what customer pays)
        date:
          type: string
          format: date-time
          description: Date the stock item was created
        source:
          allOf:
            - $ref: '#/components/schemas/SourceEnum'
          description: |-
            Origin of this stock item

            * `purchase_order` - Purchase Order Receipt
            * `split_from_stock` - Split/Offcut from Stock
            * `manual` - Manual Adjustment/Stocktake
            * `product_catalog` - Product Catalog
        location:
          type: string
          description: Where we are keeping this
        metal_type:
          description: |-
            Type of metal

            * `stainless_steel` - Stainless Steel
            * `mild_steel` - Mild Steel
            * `aluminum` - Aluminum
            * `brass` - Brass
            * `copper` - Copper
            * `titanium` - Titanium
            * `zinc` - Zinc
            * `galvanized` - Galvanized
            * `unspecified` - Unspecified
            * `other` - Other
          oneOf:
            - $ref: '#/components/schemas/MetalTypeEnum'
            - $ref: '#/components/schemas/BlankEnum'
        alloy:
          type: string
          nullable: true
          description: Alloy specification (e.g., 304, 6061)
          maxLength: 50
        specifics:
          type: string
          nullable: true
          description: Specific details (e.g., m8 countersunk socket screw)
          maxLength: 255
        is_active:
          type: boolean
          description: False when quantity reaches zero or item is fully consumed/transformed
      required:
        - description
        - quantity
        - source
        - unit_cost
    SummaryStats:
      type: object
      description: Serializer for summary statistics
      properties:
        total_staff:
          type: integer
        complete_staff:
          type: integer
        partial_staff:
          type: integer
        missing_staff:
          type: integer
        completion_rate:
          type: number
          format: double
      required:
        - complete_staff
        - completion_rate
        - missing_staff
        - partial_staff
        - total_staff
    SupplierPickupAddress:
      type: object
      description: Serializer for SupplierPickupAddress model (delivery/pickup locations).
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        client:
          type: string
          format: uuid
          description: The supplier this pickup address belongs to
        name:
          type: string
          description: Friendly name for this address (e.g., 'Main Warehouse', 'City
            Branch')
          maxLength: 255
        street:
          type: string
          description: Street address including unit/suite number
          maxLength: 255
        suburb:
          type: string
          nullable: true
          description: Suburb or neighbourhood (e.g., Thorndon, Northcote Point)
          maxLength: 100
        city:
          type: string
          description: City (e.g., Wellington, Auckland)
          maxLength: 100
        state:
          type: string
          nullable: true
          description: State or province
          maxLength: 100
        postal_code:
          type: string
          nullable: true
          description: Postal or ZIP code
          maxLength: 20
        country:
          type: string
          description: Country name
          maxLength: 100
        google_place_id:
          type: string
          nullable: true
          description: Google Place ID for this address
          maxLength: 255
        latitude:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Latitude coordinate
        longitude:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Longitude coordinate
        is_primary:
          type: boolean
          description: Indicates if this is the primary pickup address for the supplier
        notes:
          type: string
          nullable: true
          description: Additional notes (e.g., opening hours, access instructions)
        is_active:
          type: boolean
          readOnly: true
          description: Soft delete flag - inactive addresses are hidden from normal
            queries
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        formatted_address:
          type: string
          readOnly: true
      required:
        - city
        - client
        - created_at
        - formatted_address
        - id
        - is_active
        - name
        - street
        - updated_at
    SupplierPickupAddressRequest:
      type: object
      description: Serializer for SupplierPickupAddress model (delivery/pickup locations).
      properties:
        client:
          type: string
          format: uuid
          description: The supplier this pickup address belongs to
        name:
          type: string
          minLength: 1
          description: Friendly name for this address (e.g., 'Main Warehouse', 'City
            Branch')
          maxLength: 255
        street:
          type: string
          minLength: 1
          description: Street address including unit/suite number
          maxLength: 255
        suburb:
          type: string
          nullable: true
          description: Suburb or neighbourhood (e.g., Thorndon, Northcote Point)
          maxLength: 100
        city:
          type: string
          minLength: 1
          description: City (e.g., Wellington, Auckland)
          maxLength: 100
        state:
          type: string
          nullable: true
          description: State or province
          maxLength: 100
        postal_code:
          type: string
          nullable: true
          description: Postal or ZIP code
          maxLength: 20
        country:
          type: string
          minLength: 1
          description: Country name
          maxLength: 100
        google_place_id:
          type: string
          nullable: true
          description: Google Place ID for this address
          maxLength: 255
        latitude:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Latitude coordinate
        longitude:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Longitude coordinate
        is_primary:
          type: boolean
          description: Indicates if this is the primary pickup address for the supplier
        notes:
          type: string
          nullable: true
          description: Additional notes (e.g., opening hours, access instructions)
      required:
        - city
        - client
        - name
        - street
    SupplierPriceStatusItem:
      type: object
      description: Single supplier price status row.
      properties:
        supplier_id:
          type: string
          format: uuid
        supplier_name:
          type: string
        last_uploaded_at:
          type: string
          format: date-time
          nullable: true
        file_name:
          type: string
          nullable: true
        total_products:
          type: integer
          nullable: true
        changes_last_update:
          type: integer
          nullable: true
      required:
        - changes_last_update
        - file_name
        - last_uploaded_at
        - supplier_id
        - supplier_name
        - total_products
    SupplierPriceStatusResponse:
      type: object
      description: Response containing list of supplier price statuses.
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/SupplierPriceStatusItem'
        total_count:
          type: integer
      required:
        - items
        - total_count
    TimelineEntry:
      type: object
      description: Serializer for unified timeline entry (JobEvent or CostLine)
      properties:
        id:
          type: string
          format: uuid
        timestamp:
          type: string
          format: date-time
        entry_type:
          type: string
          description: "Type of entry: 'event', 'costline_created', or 'costline_updated'"
        description:
          type: string
        staff:
          type: string
          nullable: true
        event_type:
          type: string
          nullable: true
        can_undo:
          type: boolean
          nullable: true
          description: Whether this event can be undone (only for event entries)
          readOnly: true
        undo_description:
          type: string
          nullable: true
          description: Human-readable description of what undoing this event would
            do (only for event entries)
          readOnly: true
        change_id:
          type: string
          format: uuid
          nullable: true
        schema_version:
          type: integer
          nullable: true
        delta_before:
          nullable: true
        delta_after:
          nullable: true
        delta_meta:
          nullable: true
        delta_checksum:
          type: string
          nullable: true
        cost_set_kind:
          type: string
          nullable: true
        costline_kind:
          type: string
          nullable: true
          description: "Kind of costline: 'time', 'material', or 'adjust'"
        quantity:
          type: number
          format: double
          maximum: 10000000
          minimum: -10000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        total_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        total_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
        created_at:
          type: string
          format: date-time
          nullable: true
        updated_at:
          type: string
          format: date-time
          nullable: true
      required:
        - can_undo
        - description
        - entry_type
        - id
        - timestamp
        - undo_description
    TimesheetCostLine:
      type: object
      description: |-
        Serializer for CostLine model specifically for timesheet entries

        Architecture principle: Job data comes from CostSet->Job relationship,
        NOT from metadata. This ensures data consistency and follows SRP:
        - Metadata = timesheet-specific data (staff, date, billable, etc.)
        - Relationship = job data (job_id, job_number, job_name, client)

        Benefits:
        - No data duplication
        - Always consistent with source Job
        - Simplified queries and maintenance
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        kind:
          allOf:
            - $ref: '#/components/schemas/Kind332Enum'
          readOnly: true
        desc:
          type: string
          readOnly: true
          description: Description of this cost line
        quantity:
          type: number
          format: double
          maximum: 10000000
          minimum: -10000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          readOnly: true
        unit_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          readOnly: true
        unit_rev:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          readOnly: true
        ext_refs:
          readOnly: true
          description: External references (e.g., time entry IDs, material IDs)
        meta:
          readOnly: true
          description: Additional metadata - structure varies by kind (see class docstring)
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        accounting_date:
          type: string
          format: date
          readOnly: true
          description: The date this cost should be attributed to for accounting purposes
        xero_time_id:
          type: string
          readOnly: true
          nullable: true
        xero_expense_id:
          type: string
          readOnly: true
          nullable: true
        xero_last_modified:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        xero_last_synced:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        approved:
          type: boolean
          readOnly: true
          description: Indicates whether this line is approved or not by an office
            staff (when the line is created by a workshop worker)
        xero_pay_item:
          type: string
          format: uuid
          readOnly: true
          nullable: true
          description: The Xero pay item for this time entry (leave type, earnings
            rate, etc.)
        total_cost:
          type: number
          format: double
          description: Get total cost (quantity * unit_cost)
          readOnly: true
        total_rev:
          type: number
          format: double
          description: Get total revenue (quantity * unit_rev)
          readOnly: true
        job_id:
          type: string
          readOnly: true
        job_number:
          type: integer
          readOnly: true
        job_name:
          type: string
          readOnly: true
        client_name:
          type: string
          description: Get client name with safe null handling
          readOnly: true
        charge_out_rate:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
          readOnly: true
        wage_rate:
          type: number
          format: double
          description: Get staff wage rate from metadata staff_id
          readOnly: true
        xero_pay_item_name:
          type: string
          readOnly: true
          minLength: 1
      required:
        - accounting_date
        - approved
        - charge_out_rate
        - client_name
        - created_at
        - desc
        - ext_refs
        - id
        - job_id
        - job_name
        - job_number
        - kind
        - meta
        - quantity
        - total_cost
        - total_rev
        - unit_cost
        - unit_rev
        - updated_at
        - wage_rate
        - xero_expense_id
        - xero_last_modified
        - xero_last_synced
        - xero_pay_item
        - xero_pay_item_name
        - xero_time_id
    TokenObtainPairResponse:
      type: object
      description: |-
        Serializer for the response of the token obtain pair view.
        This is used to properly document the API response schema.

        All fields are optional because when ENABLE_JWT_AUTH=True,
        tokens are set as httpOnly cookies and removed from the JSON response.
      properties:
        access:
          type: string
          description: JWT access token (only present when not using httpOnly cookies)
        refresh:
          type: string
          description: JWT refresh token (only present when not using httpOnly cookies)
        password_needs_reset:
          type: boolean
          description: Indicates if the user needs to reset their password
        password_reset_url:
          type: string
          format: uri
          description: URL to reset password if needed
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          writeOnly: true
          minLength: 1
      required:
        - refresh
    TokenRefreshResponse:
      type: object
      description: |-
        Serializer for the response of the token refresh view.
        This is used to properly document the API response schema.

        The access field is optional because when ENABLE_JWT_AUTH=True,
        the token is set as an httpOnly cookie and removed from the JSON response.
      properties:
        access:
          type: string
          description: New JWT access token (only present when not using httpOnly
            cookies)
    TokenVerifyRequest:
      type: object
      properties:
        token:
          type: string
          writeOnly: true
          minLength: 1
      required:
        - token
    TypeC98Enum:
      enum:
        - stock
        - job
      type: string
      description: |-
        * `stock` - Stock
        * `job` - Job
    UploadedFile:
      type: object
      description: Serializer for file upload response.
      properties:
        id:
          type: string
        filename:
          type: string
        file_path:
          type: string
        print_on_jobsheet:
          type: boolean
      required:
        - file_path
        - filename
        - id
        - print_on_jobsheet
    UserProfile:
      type: object
      description: Serializer for user profile information returned by /accounts/me/
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        username:
          type: string
          readOnly: true
        email:
          type: string
          format: email
          readOnly: true
        first_name:
          type: string
          readOnly: true
        last_name:
          type: string
          readOnly: true
        preferred_name:
          type: string
          readOnly: true
          nullable: true
          description: Preferred name (may be null)
        fullName:
          type: string
          readOnly: true
        is_office_staff:
          type: boolean
          readOnly: true
        is_superuser:
          type: boolean
          readOnly: true
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
      required:
        - email
        - first_name
        - fullName
        - id
        - is_office_staff
        - is_superuser
        - last_name
        - preferred_name
        - username
    ValidationReport:
      type: object
      description: Serializer for validation report data.
      properties:
        warnings:
          type: array
          items:
            type: string
        errors:
          type: array
          items:
            type: string
    ValidationReportRequest:
      type: object
      description: Serializer for validation report data.
      properties:
        warnings:
          type: array
          items:
            type: string
            minLength: 1
        errors:
          type: array
          items:
            type: string
            minLength: 1
    WeeklyMetrics:
      type: object
      description: Serializer for weekly metrics data
      properties:
        job_id:
          type: string
          format: uuid
        job_number:
          type: integer
        name:
          type: string
        client:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        status:
          type: string
        people:
          type: array
          items:
            type: object
            additionalProperties: {}
        estimated_hours:
          type: number
          format: double
        actual_hours:
          type: number
          format: double
        profit:
          type: number
          format: double
      required:
        - actual_hours
        - estimated_hours
        - job_id
        - job_number
        - name
        - people
        - profit
        - status
    WeeklyStaffData:
      type: object
      description: Serializer for staff data in weekly timesheet context with payroll
        fields
      properties:
        staff_id:
          type: string
          format: uuid
        name:
          type: string
        weekly_hours:
          type: array
          items:
            $ref: '#/components/schemas/WeeklyStaffDataWeeklyHours'
        total_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_billable_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_scheduled_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        billable_percentage:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        status:
          type: string
        total_billed_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_unbilled_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_overtime_1_5x_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_overtime_2x_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_sick_leave_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_annual_leave_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_bereavement_leave_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        weekly_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
      required:
        - billable_percentage
        - name
        - staff_id
        - status
        - total_annual_leave_hours
        - total_bereavement_leave_hours
        - total_billable_hours
        - total_billed_hours
        - total_hours
        - total_overtime_1_5x_hours
        - total_overtime_2x_hours
        - total_scheduled_hours
        - total_sick_leave_hours
        - total_unbilled_hours
        - weekly_cost
        - weekly_hours
    WeeklyStaffDataWeeklyHours:
      type: object
      description: Serializer for weekly hours data of staff with payroll fields
      properties:
        day:
          type: string
        hours:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        billable_hours:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        scheduled_hours:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
        status:
          type: string
        leave_type:
          type: string
          nullable: true
        has_leave:
          type: boolean
          default: false
        billed_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        unbilled_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        overtime_1_5x_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        overtime_2x_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        sick_leave_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        annual_leave_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        bereavement_leave_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        daily_cost:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
      required:
        - annual_leave_hours
        - bereavement_leave_hours
        - billable_hours
        - billed_hours
        - daily_cost
        - day
        - hours
        - overtime_1_5x_hours
        - overtime_2x_hours
        - scheduled_hours
        - sick_leave_hours
        - status
        - unbilled_hours
    WeeklySummary:
      type: object
      description: Serializer for weekly summary data
      properties:
        total_hours:
          type: number
          format: double
          maximum: 100000000
          minimum: -100000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        staff_count:
          type: integer
        billable_percentage:
          type: number
          format: double
          maximum: 1000
          minimum: -1000
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
      required:
        - staff_count
        - total_hours
    WeeklyTimesheetData:
      type: object
      description: Serializer for complete weekly timesheet data with payroll fields
      properties:
        start_date:
          type: string
        end_date:
          type: string
        week_days:
          type: array
          items:
            type: string
        staff_data:
          type: array
          items:
            $ref: '#/components/schemas/WeeklyStaffData'
        weekly_summary:
          $ref: '#/components/schemas/WeeklySummary'
        job_metrics:
          $ref: '#/components/schemas/JobMetrics'
        summary_stats:
          $ref: '#/components/schemas/SummaryStats'
        export_mode:
          type: string
        is_current_week:
          type: boolean
        navigation:
          type: object
          additionalProperties: {}
          nullable: true
        weekend_enabled:
          type: boolean
        week_type:
          type: string
      required:
        - end_date
        - export_mode
        - is_current_week
        - job_metrics
        - staff_data
        - start_date
        - summary_stats
        - week_days
        - weekly_summary
    WorkshopJob:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        job_number:
          type: integer
        client_name:
          type: string
        contact_person:
          type: string
          nullable: true
        people:
          type: array
          items:
            $ref: '#/components/schemas/KanbanJobPerson'
      required:
        - client_name
        - contact_person
        - description
        - id
        - job_number
        - name
        - people
    WorkshopPDFResponse:
      type: object
      description: Serializer for workshop PDF generation response
      properties:
        status:
          type: string
          description: Response status
        message:
          type: string
          description: Error message if applicable
    WorkshopTimesheetEntry:
      type: object
      description: Serializer used to expose simplified workshop timesheet entries.
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        job_id:
          type: string
          format: uuid
          readOnly: true
        job_number:
          type: integer
          readOnly: true
        job_name:
          type: string
          readOnly: true
        client_name:
          type: string
          readOnly: true
        description:
          type: string
          readOnly: true
        hours:
          type: number
          format: double
          maximum: 100000
          minimum: -100000
          exclusiveMaximum: true
          exclusiveMinimum: true
          readOnly: true
        accounting_date:
          type: string
          format: date
          readOnly: true
        start_time:
          type: string
          format: time
          readOnly: true
          nullable: true
        end_time:
          type: string
          format: time
          readOnly: true
          nullable: true
        is_billable:
          type: boolean
          readOnly: true
        wage_rate_multiplier:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
        - accounting_date
        - client_name
        - created_at
        - description
        - end_time
        - hours
        - id
        - is_billable
        - job_id
        - job_name
        - job_number
        - start_time
        - updated_at
        - wage_rate_multiplier
    WorkshopTimesheetEntryRequestRequest:
      type: object
      description: Serializer validating workshop timesheet create requests.
      properties:
        job_id:
          type: string
          format: uuid
        accounting_date:
          type: string
          format: date
        hours:
          type: number
          format: double
          maximum: 100000
          minimum: 0.01
          exclusiveMaximum: true
        description:
          type: string
          nullable: true
          maxLength: 255
        start_time:
          type: string
          format: time
          nullable: true
        end_time:
          type: string
          format: time
          nullable: true
        is_billable:
          type: boolean
          default: true
        wage_rate_multiplier:
          type: number
          format: double
          maximum: 100
          minimum: 0.1
          exclusiveMaximum: true
          default: 1.00
      required:
        - accounting_date
        - hours
        - job_id
    WorkshopTimesheetListResponse:
      type: object
      description: Serializer describing the GET response payload for workshop timesheets.
      properties:
        date:
          type: string
          format: date
        entries:
          type: array
          items:
            $ref: '#/components/schemas/WorkshopTimesheetEntry'
        summary:
          $ref: '#/components/schemas/WorkshopTimesheetSummary'
      required:
        - date
        - entries
        - summary
    WorkshopTimesheetSummary:
      type: object
      description: Serializer for the aggregated summary in workshop timesheets.
      properties:
        total_hours:
          type: number
          format: double
        billable_hours:
          type: number
          format: double
        non_billable_hours:
          type: number
          format: double
        total_cost:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
      required:
        - billable_hours
        - non_billable_hours
        - total_cost
        - total_hours
        - total_revenue
    XeroDocumentErrorResponse:
      type: object
      description: Standardized serializer for a failed Xero document operation.
      properties:
        success:
          type: boolean
          default: false
        error:
          type: string
          description: A description of the error that occurred.
        messages:
          type: array
          items:
            type: string
          description: Contextual error messages.
        error_type:
          type: string
          description: A machine-readable error type (e.g., 'validation_error').
        redirect_to_auth:
          type: boolean
          description: Indicates if re-authentication is needed.
      required:
        - error
    XeroDocumentSuccessResponse:
      type: object
      description: Standardized serializer for a successful Xero document operation.
      properties:
        success:
          type: boolean
          default: true
        xero_id:
          type: string
          format: uuid
          description: The Xero UUID of the created/modified document.
        online_url:
          type: string
          format: uri
          description: Direct link to the document in Xero.
        messages:
          type: array
          items:
            type: string
          description: Informational messages.
        client:
          type: string
          description: Name of the client.
        total_excl_tax:
          type: number
          format: double
          maximum: 10000000000
          minimum: -10000000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        total_incl_tax:
          type: number
          format: double
          maximum: 10000000000
          minimum: -10000000000
          exclusiveMaximum: true
          exclusiveMinimum: true
        action:
          type: string
          description: The action performed (e.g., 'created', 'updated', 'deleted').
      required:
        - xero_id
    XeroError:
      type: object
      description: |-
        Basic serializer to expose all fields of XeroError.

        This is required by apps that import `XeroErrorSerializer`
        (e.g., `apps.workflow.views.xero.xero_view`).
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        timestamp:
          type: string
          format: date-time
          readOnly: true
        message:
          type: string
        data:
          nullable: true
        app:
          type: string
          nullable: true
          maxLength: 50
        file:
          type: string
          nullable: true
          maxLength: 200
        function:
          type: string
          nullable: true
          maxLength: 100
        severity:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
        job_id:
          type: string
          format: uuid
          nullable: true
        user_id:
          type: string
          format: uuid
          nullable: true
        resolved:
          type: boolean
        resolved_timestamp:
          type: string
          format: date-time
          nullable: true
        entity:
          type: string
          maxLength: 100
        reference_id:
          type: string
          maxLength: 255
        kind:
          type: string
          maxLength: 50
        resolved_by:
          type: string
          format: uuid
          nullable: true
      required:
        - entity
        - id
        - kind
        - message
        - reference_id
        - timestamp
    XeroInvoice:
      type: object
      description: Simplified Invoice serializer for xero_invoices field
      properties:
        number:
          type: string
          maxLength: 255
        status:
          $ref: '#/components/schemas/Status1beEnum'
        online_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
      required:
        - number
    XeroItem:
      type: object
      description: Serializer for Xero item data
      properties:
        code:
          type: string
        name:
          type: string
        description:
          type: string
        sales_details:
          type: object
          additionalProperties: {}
        purchase_details:
          type: object
          additionalProperties: {}
      required:
        - code
        - name
    XeroItemListResponse:
      type: object
      description: Serializer for XeroItemList response
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/XeroItem'
        total_count:
          type: integer
      required:
        - items
    XeroPayItem:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        xero_id:
          type: string
          description: Xero's UUID for this pay item
          maxLength: 50
        xero_tenant_id:
          type: string
          description: Xero tenant this pay item belongs to
          maxLength: 255
        name:
          type: string
          description: Display name (e.g., 'Ordinary Time', 'Annual Leave')
          maxLength: 100
        uses_leave_api:
          type: boolean
          description: True = Xero Leave API, False = Xero Timesheets API
        multiplier:
          type: number
          format: double
          maximum: 100
          minimum: -100
          exclusiveMaximum: true
          exclusiveMinimum: true
          nullable: true
          description: Rate multiplier from Xero (1.0, 1.5, 2.0, etc.). NULL for leave
            types.
        xero_last_modified:
          type: string
          format: date-time
          nullable: true
          description: Last modified timestamp from Xero
        xero_last_synced:
          type: string
          format: date-time
          nullable: true
          description: When we last synced this record from Xero
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
        - created_at
        - id
        - name
        - updated_at
        - uses_leave_api
        - xero_id
        - xero_tenant_id
    XeroQuote:
      type: object
      description: Simplified Quote serializer for xero_quote field
      properties:
        status:
          $ref: '#/components/schemas/Status7aeEnum'
        online_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
    XeroQuoteCreateRequest:
      type: object
      description: |-
        Request serializer for creating a Xero quote.
        Requires explicit choice of breakdown format.
      properties:
        breakdown:
          type: boolean
          description: If true, sends detailed line items. If false, sends single
            total line.
      required:
        - breakdown
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: access_token
